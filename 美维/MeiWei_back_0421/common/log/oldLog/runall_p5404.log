[INFO]2021-06-15 09:28:32,870: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-15 09:28:32,882: find module account.main_account
[INFO]2021-06-15 09:28:32,887: find module agvCtrl.main_agv
[INFO]2021-06-15 09:28:32,888: find module agvDevice.main_agvDevice
[INFO]2021-06-15 09:28:32,889: find module akmCtrl.main_akmCtrl
[INFO]2021-06-15 09:28:32,890: find module alarm.main_alarm
[INFO]2021-06-15 09:28:32,891: find module auth.main_auth
[INFO]2021-06-15 09:28:32,891: find module door.main_door
[INFO]2021-06-15 09:28:32,900: find module elevator.main_elevator
[INFO]2021-06-15 09:28:32,905: find module feed.main_feed
[INFO]2021-06-15 09:28:32,906: find module remoteio.main_remoteio
[INFO]2021-06-15 09:28:32,906: import account.main_account
[INFO]2021-06-15 09:28:33,038: import agvCtrl.main_agv
[INFO]2021-06-15 09:28:33,348: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139ED5DDA0>>
[INFO]2021-06-15 09:28:33,363: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139ED5DF08>>
[INFO]2021-06-15 09:28:33,456: create lock <lock name:timer.lock_2283296481856,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F0C6C10>>
[ERROR]2021-06-15 09:28:33,471: mqtt is disabled
[INFO]2021-06-15 09:28:33,472: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-15 09:28:33,473: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-15 09:28:36,503: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-15 09:28:36,526: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F3970D0>>
[WARNING]2021-06-15 09:28:36,536: use mockAgvCtrl
[INFO]2021-06-15 09:28:36,539: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139D59DC88>>
[INFO]2021-06-15 09:28:36,804: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F448030>>
[INFO]2021-06-15 09:28:36,809: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F448C88>>
[INFO]2021-06-15 09:28:36,866: charge policy 1 , fix time
[INFO]2021-06-15 09:28:36,902: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F4C10D0>>
[INFO]2021-06-15 09:28:37,527: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-15 09:28:37,623: elevator thread start
[INFO]2021-06-15 09:28:37,642: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 123 ms
[INFO]2021-06-15 09:28:37,652: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-15 09:28:37,697: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 54 ms
[INFO]2021-06-15 09:28:37,708: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-15 09:28:37,827: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 128 ms
[INFO]2021-06-15 09:28:37,838: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-15 09:28:37,952: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 123 ms
[INFO]2021-06-15 09:28:37,962: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-15 09:28:38,028: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 74 ms
[INFO]2021-06-15 09:28:38,038: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-15 09:28:38,088: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 59 ms
[INFO]2021-06-15 09:28:38,093: import agvDevice.main_agvDevice
[INFO]2021-06-15 09:28:38,093: import akmCtrl.main_akmCtrl
[INFO]2021-06-15 09:28:38,106: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F8B6F08>>
[INFO]2021-06-15 09:28:38,130: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F986698>>
[INFO]2021-06-15 09:28:38,155: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F8B6B98>>
[INFO]2021-06-15 09:28:38,156: create lock <lock name:timer.lock_2283344945840,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139F89A378>>
[INFO]2021-06-15 09:28:38,158: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139E197260>>
[INFO]2021-06-15 09:28:38,208: import alarm.main_alarm
[INFO]2021-06-15 09:28:38,209: import auth.main_auth
[INFO]2021-06-15 09:28:38,609: import door.main_door
[INFO]2021-06-15 09:28:38,615: import elevator.main_elevator
[INFO]2021-06-15 09:28:38,619: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002139E197D50>>
[INFO]2021-06-15 09:28:38,621: import feed.main_feed
[INFO]2021-06-15 09:28:38,624: IP: 0.0.0.0 port: 10001
[INFO]2021-06-15 09:28:38,625: import remoteio.main_remoteio
[SUCC]2021-06-15 09:28:38,640: utility start, pid=5404, ppid=5832
[DEBUG]2021-06-15 09:28:38,642: start timer
[INFO]2021-06-15 09:28:38,658: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-15 09:28:38,659: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000213A0000738>>
[DEBUG]2021-06-15 09:28:38,666: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-15 09:28:38,668: AGV30 start agvList run thread
[INFO]2021-06-15 09:28:38,669: AGV30 start agvList run2 thread
[ERROR]2021-06-15 09:28:38,675: agv check init error False
[DEBUG]2021-06-15 09:28:38,676: start timer
[WARNING]2021-06-15 09:28:38,688: Local server start! version 3.7.3, path C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common, pid 5404
[INFO]2021-06-15 09:28:38,689: add_ignore: taskStatus
[INFO]2021-06-15 09:28:38,693: add_ignore: api/elevator/status
[INFO]2021-06-15 09:28:38,694: add_ignore: scada/getTask
[INFO]2021-06-15 09:28:39,183: AGV30 current map meiwei428
[INFO]2021-06-15 09:28:39,186: AGV30 is online
[INFO]2021-06-15 09:28:39,405: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61726
[DEBUG]2021-06-15 09:28:39,706: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-15 09:28:39,709: MeiWeiTask init client agvApi
[DEBUG]2021-06-15 09:28:39,714: used 7ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[DEBUG]2021-06-15 09:28:42,916: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[DEBUG]2021-06-15 09:28:42,943: used 27ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[WARNING]2021-06-15 09:28:43,102: timer_thread[tid:11556] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=11556 count=1 at 0x000002139F8B6F08>> ,hold 3414 ms
[INFO]2021-06-15 09:28:43,374: name=timer_thread, pid=5404, tid=11556
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-15 09:28:45,655: {'21': {'loc': 'Locl', 'map': 'meiwei428'}, '23': {'loc': 'Loc2', 'map': 'meiwei428'}}
[INFO]2021-06-15 09:28:45,748: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-15 09:28:45,795: 21 0
[INFO]2021-06-15 09:28:45,859: ----------
[CRITICAL]2021-06-15 09:28:46,044: 192.168.252.159:10001 <--> 192.168.252.148:61726 error:  cause a error: 'function' object does not support item assignment
pid=5404, ppid=5832, tid=15428
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 171, in _handle
    objectUtil.setAllownext(devID=devID, sig=0)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\utils\objectUtil.py", line 85, in setAllownext
    g_allowNext[devID] = sig
TypeError: 'function' object does not support item assignment

[INFO]2021-06-15 09:28:46,121: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61726
[WARNING]2021-06-15 09:28:46,184: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61726
[INFO]2021-06-15 09:28:46,357: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61727
[INFO]2021-06-15 09:28:56,450: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61727
[WARNING]2021-06-15 09:28:56,511: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61727
[INFO]2021-06-15 09:28:56,621: tcp server [0.0.0.0][10001] ,connectedLen: 2, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61728
[INFO]2021-06-15 09:29:06,722: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61728
[WARNING]2021-06-15 09:29:06,784: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61728
[INFO]2021-06-15 09:29:07,027: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61729
[INFO]2021-06-15 09:29:17,131: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61729
[WARNING]2021-06-15 09:29:17,177: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61729
[INFO]2021-06-15 09:29:17,284: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61730
[INFO]2021-06-15 09:29:27,422: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61730
[WARNING]2021-06-15 09:29:27,486: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61730
[INFO]2021-06-15 09:29:27,606: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61731
[INFO]2021-06-15 09:29:37,720: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61731
[WARNING]2021-06-15 09:29:37,783: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61731
[INFO]2021-06-15 09:29:37,908: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61732
[INFO]2021-06-15 09:29:48,031: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61732
[WARNING]2021-06-15 09:29:48,078: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61732
[INFO]2021-06-15 09:29:48,233: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61733

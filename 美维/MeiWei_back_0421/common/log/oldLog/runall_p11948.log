[INFO]2021-03-25 14:08:35,183: log files at D:\python_work\AKMfloor\common\log
[INFO]2021-03-25 14:08:35,183: find module account.main_account
[INFO]2021-03-25 14:08:35,183: find module agvCtrl.main_agv
[INFO]2021-03-25 14:08:35,184: find module agvDevice.main_agvDevice
[INFO]2021-03-25 14:08:35,184: find module alarm.main_alarm
[INFO]2021-03-25 14:08:35,184: find module auth.main_auth
[INFO]2021-03-25 14:08:35,185: find module door.main_door
[INFO]2021-03-25 14:08:35,185: find module elevator.main_elevator
[INFO]2021-03-25 14:08:35,185: find module feed.main_feed
[INFO]2021-03-25 14:08:35,185: find module menu.main_menu
[INFO]2021-03-25 14:08:35,186: find module pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-25 14:08:35,186: find module webFront.main_web
[INFO]2021-03-25 14:08:35,186: find module wmqtt.main_wmqtt
[INFO]2021-03-25 14:08:35,186: import account.main_account
[INFO]2021-03-25 14:08:35,325: import agvCtrl.main_agv
[INFO]2021-03-25 14:08:35,773: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80101AE0>>
[INFO]2021-03-25 14:08:35,775: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80111420>>
[INFO]2021-03-25 14:08:35,930: create lock <lock name:timer.lock_2317139152416,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80418F60>>
[ERROR]2021-03-25 14:08:35,971: mqtt is disabled
[INFO]2021-03-25 14:08:35,971: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-25 14:08:35,971: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-25 14:08:39,015: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-25 14:08:39,093: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B806795A0>>
[INFO]2021-03-25 14:08:39,095: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B8066C960>>
[INFO]2021-03-25 14:08:39,891: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80683510>>
[INFO]2021-03-25 14:08:40,374: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80763540>>
[INFO]2021-03-25 14:08:40,379: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80804360>>
[INFO]2021-03-25 14:08:40,463: charge policy 1 , fix time
[INFO]2021-03-25 14:08:40,505: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80804F00>>
[INFO]2021-03-25 14:08:40,800: start load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap
[DEBUG]2021-03-25 14:08:41,113: elevator thread start
[INFO]2021-03-25 14:08:41,139: load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap ,used 351 ms
[INFO]2021-03-25 14:08:41,152: start load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap
[INFO]2021-03-25 14:08:41,238: load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap ,used 99 ms
[INFO]2021-03-25 14:08:41,244: import agvDevice.main_agvDevice
[INFO]2021-03-25 14:08:41,245: import alarm.main_alarm
[INFO]2021-03-25 14:08:41,245: import auth.main_auth
[INFO]2021-03-25 14:08:41,272: import door.main_door
[INFO]2021-03-25 14:08:41,280: import elevator.main_elevator
[INFO]2021-03-25 14:08:41,280: import feed.main_feed
[INFO]2021-03-25 14:08:41,317: create lock <lock name:feedTask.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80A86360>>
[INFO]2021-03-25 14:08:41,326: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B80A86F00>>
[INFO]2021-03-25 14:08:42,325: import menu.main_menu
[INFO]2021-03-25 14:08:42,473: import pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-25 14:08:42,606: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B8173CC60>>
[INFO]2021-03-25 14:08:42,607: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B81751DE0>>
[INFO]2021-03-25 14:08:42,618: recover can release agv *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload]
[INFO]2021-03-25 14:08:42,618: load task: *task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waiting]
[INFO]2021-03-25 14:08:42,620: import webFront.main_web
[INFO]2021-03-25 14:08:42,626: import wmqtt.main_wmqtt
[SUCC]2021-03-25 14:08:42,640: utility start, pid=11948, ppid=9204
[DEBUG]2021-03-25 14:08:42,640: start timer
[INFO]2021-03-25 14:08:42,654: load agv file: D:\python_work\AKMfloor\agvCtrl/projects/AKMfloor/agv.cfg
[INFO]2021-03-25 14:08:42,654: create lock <lock name:agvList.AGV03.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B8222C6F0>>
[DEBUG]2021-03-25 14:08:42,657: create aliveObj AGV03 AGV离线异常 timeout 300
[INFO]2021-03-25 14:08:42,658: AGV03 start agvList run thread
[INFO]2021-03-25 14:08:42,658: create lock <lock name:agv.AGV03.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B821C45D0>>
[DEBUG]2021-03-25 14:08:42,658: try connect AGV03 192.168.20.182:19204
[INFO]2021-03-25 14:08:42,659: AGV03 start agvList run2 thread
[INFO]2021-03-25 14:08:42,663: add_ignore: taskStatus
[INFO]2021-03-25 14:08:42,663: add_ignore: api/elevator/status
[INFO]2021-03-25 14:08:42,663: add_ignore: scada/getTask
[INFO]2021-03-25 14:08:42,684: AGV03 connected 192.168.20.182 19204
[INFO]2021-03-25 14:08:42,685: create lock <lock name:agv.AGV03.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B821C4600>>
[DEBUG]2021-03-25 14:08:42,685: try connect AGV03 192.168.20.182:19205
[INFO]2021-03-25 14:08:42,693: AGV03 connected 192.168.20.182 19205
[INFO]2021-03-25 14:08:42,693: create lock <lock name:agv.AGV03.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B821C4630>>
[DEBUG]2021-03-25 14:08:42,694: try connect AGV03 192.168.20.182:19206
[INFO]2021-03-25 14:08:42,726: AGV03 connected 192.168.20.182 19206
[INFO]2021-03-25 14:08:42,726: create lock <lock name:agv.AGV03.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B821C4690>>
[DEBUG]2021-03-25 14:08:42,726: try connect AGV03 192.168.20.182:19207
[INFO]2021-03-25 14:08:42,734: AGV03 connected 192.168.20.182 19207
[INFO]2021-03-25 14:08:42,735: create lock <lock name:agv.AGV03.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B821E34B0>>
[DEBUG]2021-03-25 14:08:42,735: try connect AGV03 192.168.20.182:19208
[INFO]2021-03-25 14:08:42,741: AGV03 connected 192.168.20.182 19208
[INFO]2021-03-25 14:08:42,742: create lock <lock name:agv.AGV03.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x0000021B821E3570>>
[DEBUG]2021-03-25 14:08:42,742: try connect AGV03 192.168.20.182:19210
[INFO]2021-03-25 14:08:42,747: AGV03 connected 192.168.20.182 19210
[INFO]2021-03-25 14:08:42,766: AGV03 current map AKM4F
[INFO]2021-03-25 14:08:42,816: AGV03 is online
[WARNING]2021-03-25 14:08:42,832: clear alarm obj=AGV03, typeId=54070, id=605c282c07e2e631304f4279
[CRITICAL]2021-03-25 14:08:46,669: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=11948, ppid=9204, tid=21968
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[DEBUG]2021-03-25 14:08:47,288: AGV03 set loc AKM4F.LM15 ,old AP13 (-9.89,-3.46)
[CRITICAL]2021-03-25 14:08:49,699: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=11948, ppid=9204, tid=21968
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[ERROR]2021-03-25 14:08:50,650: raise alarm obj=AGV03, typeId=49997, desc=小车置信度小于最低阈值,当前值:0.7264, id=605c28f207e2e631304f42d8
[WARNING]2021-03-25 14:08:51,206: clear alarm obj=AGV03, typeId=49997, id=605c28f207e2e631304f42d8
[CRITICAL]2021-03-25 14:08:52,743: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=11948, ppid=9204, tid=21968
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 14:08:55,778: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=11948, ppid=9204, tid=21968
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[DEBUG]2021-03-25 14:08:56,864: AGV03 set loc AKM4F.LM9 ,old LM15 (-9.90,-4.31)
[DEBUG]2021-03-25 14:08:57,794: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-03-25 14:08:57,794: scadaTask init client agvApi
[DEBUG]2021-03-25 14:08:57,796: used 2ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[INFO]2021-03-25 14:08:57,798: task recover: add task *task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waiting]
[DEBUG]2021-03-25 14:09:00,849: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-03-25 14:09:00,886: used 36ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[INFO]2021-03-25 14:09:00,975: task[605c24548f0ddbc349ddb396]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 3, 25, 14, 9, 0, 937532), 'updateTime': datetime.datetime(2021, 3, 25, 14, 9, 0, 937532), 'status': 'running'}
[INFO]2021-03-25 14:09:01,014: task: start *task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waiting]
[INFO]2021-03-25 14:09:01,040: task[605c24548f0ddbc349ddb396] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 3, 25, 14, 9, 1, 34159)}
[DEBUG]2021-03-25 14:09:01,078: *task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waitForAgv] waiting -> waitForAgv
[WARNING]2021-03-25 14:09:02,025: timer_thread[tid:21968] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=21968 count=1 at 0x0000021B8173CC60>> ,hold 17378 ms
[INFO]2021-03-25 14:09:02,077: name=timer_thread, pid=11948, tid=21968
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_work/AKMfloor/common/mytimer.py", line 113, in _loop() 
[03] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[04] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[05] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[06] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-03-25 14:09:02,494: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP13&mapId=AKM4F&taskId=605c24548f0ddbc349ddb396&timeout=10 addr: 127.0.0.1
[INFO]2021-03-25 14:09:03,874: apply AGV03 ,taskId: 605c24548f0ddbc349ddb396 ,loc AKM4F.AP13 ,autoLock False , used 1360 ms
[DEBUG]2021-03-25 14:09:03,914: used 1420ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP13&mapId=AKM4F&taskId=605c24548f0ddbc349ddb396&timeout=10
[WARNING]2021-03-25 14:09:03,916: AGV03 low battery charge,batteryLevel= 0.464 start charge level= 0.500
[INFO]2021-03-25 14:09:04,001: AGV03 battery 0.464 check success
[WARNING]2021-03-25 14:09:04,044: AGV03 Can't find charge point at AKM4F battery: 0.464
[DEBUG]2021-03-25 14:09:04,066: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV03&appName=scadaTask&taskId=605c24548f0ddbc349ddb396 addr: 127.0.0.1
[DEBUG]2021-03-25 14:09:04,106: lock:  AGV03 taskId 605c24548f0ddbc349ddb396 app scadaTask
[WARNING]2021-03-25 14:09:05,133: AGV03 clear task finish, cur= AKM4F.LM9 task_status= 4
[DEBUG]2021-03-25 14:09:05,133: used 1067ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV03&appName=scadaTask&taskId=605c24548f0ddbc349ddb396
[INFO]2021-03-25 14:09:05,167: *task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waitForAgv] apply AGV03
[INFO]2021-03-25 14:09:05,178: task[605c24548f0ddbc349ddb396] update info: {'agvId': 'AGV03', 'failMsg': '成功分配小车AGV03,检测顶升下降', 'updateTime': datetime.datetime(2021, 3, 25, 14, 9, 5, 167596)}
[DEBUG]2021-03-25 14:09:05,189: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-03-25 14:09:05,526: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [initJackdown] _jackDown
[DEBUG]2021-03-25 14:09:05,538: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 14:09:05,594: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-25 14:09:06,921: _jack in jackMgr: AGV03 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 14:09:07,025: AGV03 jack down status:  True
[DEBUG]2021-03-25 14:09:07,027: used 1432ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 14:09:07,028: [return] use 1490 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[INFO]2021-03-25 14:09:07,030: task[605c24548f0ddbc349ddb396] update info: {'failMsg': '前往四楼Test1工位点拉取货架', 'updateTime': datetime.datetime(2021, 3, 25, 14, 9, 7, 29639)}
[DEBUG]2021-03-25 14:09:07,031: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [startMoveJackup] initJackdown -> startMoveJackup
[DEBUG]2021-03-25 14:09:07,347: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV03&agvId=AGV03&appName=scadaTask&direction=None&floorId=AKM4F&isRotate&loc=AKM4F.AP13&location=AP13&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=605c24548f0ddbc349ddb396_2&taskType=scadaTask&timeoutSec=86400&use_pgv=False addr: 127.0.0.1
[INFO]2021-03-25 14:09:07,364: Begin: AGV03 move from AKM4F.LM9 to AKM4F.AP13 by paths: [('AKM4F', ['LM9', 'LM15', 'AP13'], 2.2)] task: 605c24548f0ddbc349ddb396_2 timeout 86400 used 16 ms
[DEBUG]2021-03-25 14:09:07,364: used 17ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV03&agvId=AGV03&appName=scadaTask&direction=None&floorId=AKM4F&isRotate&loc=AKM4F.AP13&location=AP13&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=605c24548f0ddbc349ddb396_2&taskType=scadaTask&timeoutSec=86400&use_pgv=False
[DEBUG]2021-03-25 14:09:07,366: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload] startMoveJackup -> loadPlayload
[DEBUG]2021-03-25 14:09:08,368: agvInfo: AGV03 AKM4F.LM9 move to AKM4F.LM15 ,taskId 605c24548f0ddbc349ddb396_2
[INFO]2021-03-25 14:09:08,370: goTarget {'id': 'LM15'}
[DEBUG]2021-03-25 14:09:09,079: AGV03 choise next pos cur LM9 next AP13 pre LM15 2.200 False
[DEBUG]2021-03-25 14:09:09,079: AGV03 turn to wait check cur LM9 next AP13 2.200 False
[DEBUG]2021-03-25 14:09:09,598: agvInfo: AGV03 AKM4F.LM9 move jackup to AKM4F.AP13 ,taskId 605c24548f0ddbc349ddb396_2
[INFO]2021-03-25 14:09:09,598: +++++++ {'id': 'AP13', 'operation': 'JackLoad', 'recognize': False, 'use_pgv': False}
[ERROR]2021-03-25 14:09:12,765: raise alarm obj=AGV03, typeId=49997, desc=小车置信度小于最低阈值,当前值:0.7271, id=605c290807e2e631304f42fa
[WARNING]2021-03-25 14:09:13,185: AGV03 low battery charge,batteryLevel= 0.464 start charge level= 0.500
[WARNING]2021-03-25 14:09:13,186: AGV03 battery 0.464 check failed: isLocked
[WARNING]2021-03-25 14:09:13,940: clear alarm obj=AGV03, typeId=49997, id=605c290807e2e631304f42fa
[DEBUG]2021-03-25 14:09:18,001: AGV03 set loc AKM4F.LM15 ,old LM9 (-9.89,-3.72)
[WARNING]2021-03-25 14:09:19,344: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 14:09:19,846: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 14:09:20,348: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 14:09:20,851: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 14:09:21,365: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 14:09:21,895: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 14:09:22,401: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[DEBUG]2021-03-25 14:09:22,573: AGV03 set loc AKM4F.AP13 ,old LM15 (-9.89,-2.36)
[WARNING]2021-03-25 14:09:23,218: AGV03 low battery charge,batteryLevel= 0.464 start charge level= 0.500
[WARNING]2021-03-25 14:09:23,219: AGV03 battery 0.464 check failed: isLocked
[SUCC]2021-03-25 14:09:24,922: Finish:  AGV03 arrived AKM4F.AP13 ,task: 605c24548f0ddbc349ddb396_2
[INFO]2021-03-25 14:09:25,427: task: move finish callback *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload]
[INFO]2021-03-25 14:09:25,431: task[605c24548f0ddbc349ddb396] update info: {'failMsg': 'AGV顶升', 'updateTime': datetime.datetime(2021, 3, 25, 14, 9, 25, 428590)}
[DEBUG]2021-03-25 14:09:25,479: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload_jackup] loadPlayload_readqr -> loadPlayload_jackup
[INFO]2021-03-25 14:09:25,789: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload_jackup] _jackUp
[DEBUG]2021-03-25 14:09:25,791: send http_get: http://127.0.0.1:5551/api/agv/jackup?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 14:09:25,796: GET: http://127.0.0.1:5551/api/agv/jackup?agv=AGV03&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-25 14:09:27,521: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': True}, {'id': 21, 'source': 'modbus', 'status': True}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 14:09:28,648: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': True}, {'id': 21, 'source': 'modbus', 'status': True}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 14:09:29,847: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 14:09:30,967: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 14:09:32,134: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': True}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 14:09:32,147: AGV03 jack up status:  True
[DEBUG]2021-03-25 14:09:32,177: used 6381ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackup?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 14:09:32,202: [return] use 6411 ms,http_get: http://127.0.0.1:5551/api/agv/jackup?agv=AGV03&loc=None&timeoutSec=90
[INFO]2021-03-25 14:09:32,238: task[605c24548f0ddbc349ddb396] update info: {'failMsg': '等待四楼Test2工位点锁', 'updateTime': datetime.datetime(2021, 3, 25, 14, 9, 32, 220430)}
[WARNING]2021-03-25 14:09:32,257: scada.605c24548f0ddbc349ddb396[tid:13140] <locked _thread.RLock object owner=13140 count=1 at 0x0000021B8220F420> ,hold 6468 ms
[INFO]2021-03-25 14:09:32,362: name=scada.605c24548f0ddbc349ddb396, pid=11948, tid=13140
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_work/AKMfloor/common/utility.py", line 167, in __call() 
[03] File "D:/python_work/AKMfloor/pharmapackCtrl/runTasks.py", line 725, in _taskFunc() 
[04] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[05] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[06] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[07] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-03-25 14:09:32,373: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [waitDestPreLoc] loadPlayload_jackup -> waitDestPreLoc
[INFO]2021-03-25 14:09:32,722: task: prepoint locked  605c24548f0ddbc349ddb396 AKM4F.AP14
[INFO]2021-03-25 14:09:32,753: task[605c24548f0ddbc349ddb396] update info: {'failMsg': '前往AP14工位点放下货架', 'updateTime': datetime.datetime(2021, 3, 25, 14, 9, 32, 739589)}
[DEBUG]2021-03-25 14:09:32,764: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadMove] waitDestPreLoc -> dropPayloadMove
[CRITICAL]2021-03-25 14:09:33,159: taskFunc2:*task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadMove] cause a error: moveJackdown() got an unexpected keyword argument 'use_pgv'
pid=11948, ppid=9204, tid=13140
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 725, in _taskFunc
    elif not self.handle():
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 677, in handle
    self._moveJackdown()
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 831, in _moveJackdown
    agvApi.moveJackdown(self.agvId, self.param["floorId"]+'.'+self.param["location"], self.onFinish, self.param,use_pgv=False)
TypeError: moveJackdown() got an unexpected keyword argument 'use_pgv'

[WARNING]2021-03-25 14:09:33,207: task[605c24548f0ddbc349ddb396]:  error {'failMsg': "moveJackdown() got an unexpected keyword argument 'use_pgv'", 'endTime': datetime.datetime(2021, 3, 25, 14, 9, 33, 188785), 'status': 'error'}
[INFO]2021-03-25 14:09:33,226: *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadMove] AGV03 release task, release agv False False False
[INFO]2021-03-25 14:09:33,244: task: prepoint released2  605c24548f0ddbc349ddb396 AKM4F.AP14
[INFO]2021-03-25 14:09:33,256: task: stop *task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadMove]
[WARNING]2021-03-25 14:09:33,422: AGV03 low battery charge,batteryLevel= 0.464 start charge level= 0.500
[WARNING]2021-03-25 14:09:33,441: AGV03 battery 0.464 check failed: isLocked
[DEBUG]2021-03-25 14:09:34,446: task: delete task 605c24548f0ddbc349ddb396
[WARNING]2021-03-25 14:09:43,711: AGV03 low battery charge,batteryLevel= 0.464 start charge level= 0.500
[WARNING]2021-03-25 14:09:43,759: AGV03 battery 0.464 check failed: isLocked

[INFO]2021-06-11 16:12:21,031: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-11 16:12:21,035: find module account.main_account
[INFO]2021-06-11 16:12:21,037: find module agvCtrl.main_agv
[INFO]2021-06-11 16:12:21,039: find module agvDevice.main_agvDevice
[INFO]2021-06-11 16:12:21,041: find module akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:12:21,043: find module alarm.main_alarm
[INFO]2021-06-11 16:12:21,045: find module auth.main_auth
[INFO]2021-06-11 16:12:21,048: find module door.main_door
[INFO]2021-06-11 16:12:21,052: find module elevator.main_elevator
[INFO]2021-06-11 16:12:21,055: find module feed.main_feed
[INFO]2021-06-11 16:12:21,057: find module remoteio.main_remoteio
[INFO]2021-06-11 16:12:21,059: import account.main_account
[INFO]2021-06-11 16:12:21,401: import agvCtrl.main_agv
[INFO]2021-06-11 16:12:22,218: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2ADA8DDA0>>
[INFO]2021-06-11 16:12:22,235: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2ADA8DF08>>
[INFO]2021-06-11 16:12:22,354: create lock <lock name:timer.lock_2004372295184,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2ADE04BE8>>
[ERROR]2021-06-11 16:12:22,392: mqtt is disabled
[INFO]2021-06-11 16:12:22,394: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-11 16:12:22,395: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-11 16:12:25,481: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-11 16:12:25,543: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE0C7080>>
[WARNING]2021-06-11 16:12:25,586: use mockAgvCtrl
[INFO]2021-06-11 16:12:25,598: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AC2CEC88>>
[INFO]2021-06-11 16:12:26,279: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE17A030>>
[INFO]2021-06-11 16:12:26,287: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE17AF58>>
[INFO]2021-06-11 16:12:26,349: charge policy 1 , fix time
[INFO]2021-06-11 16:12:26,384: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE1F1080>>
[INFO]2021-06-11 16:12:27,054: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-11 16:12:27,235: elevator thread start
[INFO]2021-06-11 16:12:27,285: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 240 ms
[INFO]2021-06-11 16:12:27,315: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-11 16:12:27,422: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 134 ms
[INFO]2021-06-11 16:12:27,435: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-11 16:12:27,679: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 255 ms
[INFO]2021-06-11 16:12:27,693: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-11 16:12:28,006: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 326 ms
[INFO]2021-06-11 16:12:28,019: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-11 16:12:28,217: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 207 ms
[INFO]2021-06-11 16:12:28,257: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-11 16:12:28,431: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 210 ms
[INFO]2021-06-11 16:12:28,444: import agvDevice.main_agvDevice
[INFO]2021-06-11 16:12:28,447: import akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:12:28,592: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE6785D0>>
[INFO]2021-06-11 16:12:28,640: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE6C79B8>>
[INFO]2021-06-11 16:12:28,694: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE5E6E68>>
[INFO]2021-06-11 16:12:28,701: create lock <lock name:timer.lock_2004420969360,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AE5CC378>>
[INFO]2021-06-11 16:12:28,709: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2ACEC71C0>>
[INFO]2021-06-11 16:12:28,877: import alarm.main_alarm
[INFO]2021-06-11 16:12:28,919: import auth.main_auth
[INFO]2021-06-11 16:12:30,701: import door.main_door
[INFO]2021-06-11 16:12:30,726: import elevator.main_elevator
[INFO]2021-06-11 16:12:30,738: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2ACEC7CB0>>
[INFO]2021-06-11 16:12:30,745: import feed.main_feed
[INFO]2021-06-11 16:12:30,755: IP: 0.0.0.0 port: 10001
[INFO]2021-06-11 16:12:30,766: import remoteio.main_remoteio
[SUCC]2021-06-11 16:12:30,801: utility start, pid=7420, ppid=14248
[INFO]2021-06-11 16:12:30,803: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62525
[DEBUG]2021-06-11 16:12:30,807: start timer
[INFO]2021-06-11 16:12:30,821: **************回复线程启动**************
[INFO]2021-06-11 16:12:30,843: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-11 16:12:30,849: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001D2AF517788>>
[DEBUG]2021-06-11 16:12:30,856: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-11 16:12:30,864: AGV30 start agvList run thread
[INFO]2021-06-11 16:12:30,867: AGV30 start agvList run2 thread
[ERROR]2021-06-11 16:12:30,887: agv check init error False
[DEBUG]2021-06-11 16:12:30,893: start timer
[INFO]2021-06-11 16:12:30,923: add_ignore: taskStatus
[INFO]2021-06-11 16:12:30,971: add_ignore: api/elevator/status
[INFO]2021-06-11 16:12:30,974: add_ignore: scada/getTask
[INFO]2021-06-11 16:12:31,411: AGV30 current map meiwei428
[INFO]2021-06-11 16:12:31,412: AGV30 is online
[DEBUG]2021-06-11 16:12:31,924: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-11 16:12:31,929: MeiWeiTask init client agvApi
[DEBUG]2021-06-11 16:12:31,935: used 11ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[DEBUG]2021-06-11 16:12:35,051: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[DEBUG]2021-06-11 16:12:35,112: used 61ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[WARNING]2021-06-11 16:12:35,284: timer_thread[tid:18500] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=18500 count=1 at 0x000001D2AE6785D0>> ,hold 4380 ms
[INFO]2021-06-11 16:12:37,194: name=timer_thread, pid=7420, tid=18500
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-11 16:12:38,489: 1
[INFO]2021-06-11 16:12:38,694: {'21': {'loc': 1, 'map': 'test'}, '23': {'loc': 3, 'map': 'test'}}
[INFO]2021-06-11 16:12:38,786: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-11 16:12:38,927: 3
[INFO]2021-06-11 16:12:39,020: source 8
[INFO]2021-06-11 16:12:39,099: target 3
[INFO]2021-06-11 16:12:39,208: ---------------------runTask01--------------------addTaskByButton-----
[INFO]2021-06-11 16:12:39,316: ----------------------scadaTask----------------
[INFO]2021-06-11 16:12:39,410: 8 3
[INFO]2021-06-11 16:12:39,580: create task[60c31af7b5b9d3649746ebba]: type= scadaTask , 从8运送货架到3 {'source': '8', 'target': '3', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从8运送货架到3', 'createTime': datetime.datetime(2021, 6, 11, 16, 12, 39, 534708), 'updateTime': datetime.datetime(2021, 6, 11, 16, 12, 39, 534708), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('60c31af7b5b9d3649746ebba')}
[INFO]2021-06-11 16:12:39,719: 0
[CRITICAL]2021-06-11 16:12:40,048: invoke timer func<function lock.<locals>.call.<locals>._call at 0x000001D2ACEB4158> cause a error: 'NoneType' object is not subscriptable
pid=7420, ppid=14248, tid=18500
Traceback (most recent call last):
  File "..\common\mytimer.py", line 113, in _loop
    v.func(*v.args)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 58, in run
    if not g_taskMgr.checkTask(t):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskMgrBean.py", line 67, in checkTask
    ret = task.islocAvailable(task.s_info["floorId"], task.s_info["prepoint"])
TypeError: 'NoneType' object is not subscriptable

[CRITICAL]2021-06-11 16:12:41,238: invoke timer func<function lock.<locals>.call.<locals>._call at 0x000001D2ACEB4158> cause a error: 'NoneType' object is not subscriptable
pid=7420, ppid=14248, tid=18500
Traceback (most recent call last):
  File "..\common\mytimer.py", line 113, in _loop
    v.func(*v.args)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 58, in run
    if not g_taskMgr.checkTask(t):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskMgrBean.py", line 67, in checkTask
    ret = task.islocAvailable(task.s_info["floorId"], task.s_info["prepoint"])
TypeError: 'NoneType' object is not subscriptable

[CRITICAL]2021-06-11 16:12:50,024: 192.168.252.159:10001 <--> 192.168.252.147:62525 time out cause a error: <tcpSocket.client object at 0x000001D2AF445D68>
pid=7420, ppid=14248, tid=9948
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out

[INFO]2021-06-11 16:17:31,882: tcp server [0.0.0.0][10001] ,connectedLen: 2, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62526

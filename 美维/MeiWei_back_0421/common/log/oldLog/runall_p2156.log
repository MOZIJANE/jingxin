[INFO]2021-03-25 14:59:13,875: log files at D:\python_work\AKMfloor\common\log
[INFO]2021-03-25 14:59:13,875: find module account.main_account
[INFO]2021-03-25 14:59:13,875: find module agvCtrl.main_agv
[INFO]2021-03-25 14:59:13,876: find module agvDevice.main_agvDevice
[INFO]2021-03-25 14:59:13,876: find module alarm.main_alarm
[INFO]2021-03-25 14:59:13,876: find module auth.main_auth
[INFO]2021-03-25 14:59:13,876: find module door.main_door
[INFO]2021-03-25 14:59:13,876: find module elevator.main_elevator
[INFO]2021-03-25 14:59:13,876: find module feed.main_feed
[INFO]2021-03-25 14:59:13,876: find module menu.main_menu
[INFO]2021-03-25 14:59:13,877: find module pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-25 14:59:13,877: find module webFront.main_web
[INFO]2021-03-25 14:59:13,877: find module wmqtt.main_wmqtt
[INFO]2021-03-25 14:59:13,878: import account.main_account
[INFO]2021-03-25 14:59:14,103: import agvCtrl.main_agv
[INFO]2021-03-25 14:59:14,621: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047501AE0>>
[INFO]2021-03-25 14:59:14,624: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047511420>>
[INFO]2021-03-25 14:59:14,979: create lock <lock name:timer.lock_2475100839312,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047819ED0>>
[ERROR]2021-03-25 14:59:15,071: mqtt is disabled
[INFO]2021-03-25 14:59:15,072: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-25 14:59:15,072: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-25 14:59:18,220: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-25 14:59:18,287: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047A7A510>>
[INFO]2021-03-25 14:59:18,288: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047A6C8D0>>
[INFO]2021-03-25 14:59:19,031: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047A83480>>
[INFO]2021-03-25 14:59:19,369: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047B222A0>>
[INFO]2021-03-25 14:59:19,372: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047BC4330>>
[INFO]2021-03-25 14:59:19,490: charge policy 1 , fix time
[INFO]2021-03-25 14:59:19,532: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047BC4ED0>>
[INFO]2021-03-25 14:59:20,118: start load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap
[DEBUG]2021-03-25 14:59:20,364: elevator thread start
[INFO]2021-03-25 14:59:20,445: load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap ,used 350 ms
[INFO]2021-03-25 14:59:20,478: start load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap
[INFO]2021-03-25 14:59:20,704: load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap ,used 257 ms
[INFO]2021-03-25 14:59:20,715: import agvDevice.main_agvDevice
[INFO]2021-03-25 14:59:20,716: import alarm.main_alarm
[INFO]2021-03-25 14:59:20,718: import auth.main_auth
[INFO]2021-03-25 14:59:20,759: import door.main_door
[INFO]2021-03-25 14:59:20,769: import elevator.main_elevator
[INFO]2021-03-25 14:59:20,771: import feed.main_feed
[INFO]2021-03-25 14:59:20,817: create lock <lock name:feedTask.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047E834E0>>
[INFO]2021-03-25 14:59:20,828: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024047E97480>>
[INFO]2021-03-25 14:59:22,590: import menu.main_menu
[INFO]2021-03-25 14:59:22,605: import pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-25 14:59:22,946: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024048B512D0>>
[INFO]2021-03-25 14:59:22,946: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024048B51D50>>
[INFO]2021-03-25 14:59:22,963: import webFront.main_web
[INFO]2021-03-25 14:59:22,981: import wmqtt.main_wmqtt
[SUCC]2021-03-25 14:59:23,008: utility start, pid=2156, ppid=9204
[DEBUG]2021-03-25 14:59:23,009: start timer
[INFO]2021-03-25 14:59:23,030: load agv file: D:\python_work\AKMfloor\agvCtrl/projects/AKMfloor/agv.cfg
[INFO]2021-03-25 14:59:23,031: create lock <lock name:agvList.AGV03.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024046812720>>
[DEBUG]2021-03-25 14:59:23,036: create aliveObj AGV03 AGV离线异常 timeout 300
[INFO]2021-03-25 14:59:23,037: AGV03 start agvList run thread
[INFO]2021-03-25 14:59:23,037: create lock <lock name:agv.AGV03.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024046830720>>
[DEBUG]2021-03-25 14:59:23,037: try connect AGV03 192.168.20.183:19204
[INFO]2021-03-25 14:59:23,038: AGV03 start agvList run2 thread
[INFO]2021-03-25 14:59:23,044: AGV03 connected 192.168.20.183 19204
[INFO]2021-03-25 14:59:23,044: create lock <lock name:agv.AGV03.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024046830750>>
[DEBUG]2021-03-25 14:59:23,044: try connect AGV03 192.168.20.183:19205
[INFO]2021-03-25 14:59:23,045: add_ignore: taskStatus
[INFO]2021-03-25 14:59:23,046: add_ignore: api/elevator/status
[INFO]2021-03-25 14:59:23,046: add_ignore: scada/getTask
[INFO]2021-03-25 14:59:23,060: AGV03 connected 192.168.20.183 19205
[INFO]2021-03-25 14:59:23,061: create lock <lock name:agv.AGV03.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024046830780>>
[DEBUG]2021-03-25 14:59:23,063: try connect AGV03 192.168.20.183:19206
[INFO]2021-03-25 14:59:23,079: AGV03 connected 192.168.20.183 19206
[INFO]2021-03-25 14:59:23,080: create lock <lock name:agv.AGV03.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x00000240468307E0>>
[DEBUG]2021-03-25 14:59:23,082: try connect AGV03 192.168.20.183:19207
[INFO]2021-03-25 14:59:23,088: AGV03 connected 192.168.20.183 19207
[INFO]2021-03-25 14:59:23,089: create lock <lock name:agv.AGV03.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024046830810>>
[DEBUG]2021-03-25 14:59:23,092: try connect AGV03 192.168.20.183:19208
[INFO]2021-03-25 14:59:23,109: AGV03 connected 192.168.20.183 19208
[INFO]2021-03-25 14:59:23,110: create lock <lock name:agv.AGV03.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024046845CC0>>
[DEBUG]2021-03-25 14:59:23,112: try connect AGV03 192.168.20.183:19210
[INFO]2021-03-25 14:59:23,120: AGV03 connected 192.168.20.183 19210
[INFO]2021-03-25 14:59:23,155: AGV03 current map AKM4F
[INFO]2021-03-25 14:59:23,196: AGV03 is online
[CRITICAL]2021-03-25 14:59:27,056: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2156, ppid=9204, tid=8412
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 14:59:30,093: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2156, ppid=9204, tid=8412
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 14:59:33,135: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2156, ppid=9204, tid=8412
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 14:59:36,181: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2156, ppid=9204, tid=8412
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 14:59:39,199: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2156, ppid=9204, tid=8412
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[DEBUG]2021-03-25 14:59:40,202: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-03-25 14:59:40,203: scadaTask init client agvApi
[DEBUG]2021-03-25 14:59:40,205: used 3ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[DEBUG]2021-03-25 14:59:43,284: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-03-25 14:59:43,303: used 19ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[WARNING]2021-03-25 14:59:43,354: timer_thread[tid:8412] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=8412 count=1 at 0x0000024048B512D0>> ,hold 18340 ms
[INFO]2021-03-25 14:59:43,427: name=timer_thread, pid=2156, tid=8412
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_work/AKMfloor/common/mytimer.py", line 113, in _loop() 
[03] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[04] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[05] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[06] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-03-25 15:00:18,292: GET: http://192.168.20.48:5551/api/scada/addTask?source=%E5%9B%9B%E6%A5%BCTest1&target=%E5%9B%9B%E6%A5%BCTest2 addr: 192.168.20.60
[INFO]2021-03-25 15:00:18,331: Scada send a task to the server from 四楼Test1 to 四楼Test2 payloadId: None
[INFO]2021-03-25 15:00:18,400: create task[605c3502e4655fbb4cf35342]: type= scadaTask , 从四楼Test1运送货架到四楼Test2 {'source': '四楼Test1', 'target': '四楼Test2', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从四楼Test1运送货架到四楼Test2', 'createTime': datetime.datetime(2021, 3, 25, 15, 0, 18, 338089), 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 18, 338089), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('605c3502e4655fbb4cf35342')}
[INFO]2021-03-25 15:00:18,467: task[605c3502e4655fbb4cf35342][-] AP13(LM15) -> AP14(LM16) [waiting] is inside False
[INFO]2021-03-25 15:00:18,502: task cmd: got a task from scada task[605c3502e4655fbb4cf35342][-] AP13(LM15) -> AP14(LM16) [waiting]
[INFO]2021-03-25 15:00:19,359: task[605c3502e4655fbb4cf35342]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 3, 25, 15, 0, 19, 352902), 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 19, 352902), 'status': 'running'}
[INFO]2021-03-25 15:00:19,401: task: start task[605c3502e4655fbb4cf35342][-] AP13(LM15) -> AP14(LM16) [waiting]
[INFO]2021-03-25 15:00:19,437: task[605c3502e4655fbb4cf35342] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 19, 430440)}
[DEBUG]2021-03-25 15:00:19,474: task[605c3502e4655fbb4cf35342][-] AP13(LM15) -> AP14(LM16) [waitForAgv] waiting -> waitForAgv
[DEBUG]2021-03-25 15:00:20,808: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP13&mapId=AKM4F&taskId=605c3502e4655fbb4cf35342&timeout=10 addr: 127.0.0.1
[INFO]2021-03-25 15:00:22,237: apply AGV03 ,taskId: 605c3502e4655fbb4cf35342 ,loc AKM4F.AP13 ,autoLock False , used 1412 ms
[DEBUG]2021-03-25 15:00:22,353: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV03&appName=scadaTask&taskId=605c3502e4655fbb4cf35342 addr: 127.0.0.1
[DEBUG]2021-03-25 15:00:22,366: lock:  AGV03 taskId 605c3502e4655fbb4cf35342 app scadaTask
[WARNING]2021-03-25 15:00:23,396: AGV03 clear task finish, cur= AKM4F.LM9 task_status= 4
[DEBUG]2021-03-25 15:00:23,425: used 1073ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV03&appName=scadaTask&taskId=605c3502e4655fbb4cf35342
[INFO]2021-03-25 15:00:23,494: task[605c3502e4655fbb4cf35342][-] AP13(LM15) -> AP14(LM16) [waitForAgv] apply AGV03
[INFO]2021-03-25 15:00:23,553: task[605c3502e4655fbb4cf35342] update info: {'agvId': 'AGV03', 'failMsg': '成功分配小车AGV03,检测顶升下降', 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 23, 527190)}
[DEBUG]2021-03-25 15:00:23,574: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-03-25 15:00:23,934: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [initJackdown] _jackDown
[DEBUG]2021-03-25 15:00:23,967: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 15:00:24,165: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-25 15:00:25,624: _jack in jackMgr: AGV03 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:00:25,710: AGV03 jack down status:  True
[DEBUG]2021-03-25 15:00:25,734: used 1569ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 15:00:25,799: [return] use 1832 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[INFO]2021-03-25 15:00:25,833: task[605c3502e4655fbb4cf35342] update info: {'failMsg': '前往四楼Test1工位点拉取货架', 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 25, 821985)}
[DEBUG]2021-03-25 15:00:25,885: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [startMoveJackup] initJackdown -> startMoveJackup
[DEBUG]2021-03-25 15:00:26,283: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV03&agvId=AGV03&appName=scadaTask&direction=None&floorId=AKM4F&isRotate&loc=AKM4F.AP13&location=AP13&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=605c3502e4655fbb4cf35342_2&taskType=scadaTask&timeoutSec=86400&use_pgv=False addr: 127.0.0.1
[INFO]2021-03-25 15:00:26,388: Begin: AGV03 move from AKM4F.LM9 to AKM4F.AP13 by paths: [('AKM4F', ['LM9', 'LM15', 'AP13'], 2.2)] task: 605c3502e4655fbb4cf35342_2 timeout 86400 used 99 ms
[DEBUG]2021-03-25 15:00:26,391: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload] startMoveJackup -> loadPlayload
[DEBUG]2021-03-25 15:00:27,087: agvInfo: AGV03 AKM4F.LM9 move to AKM4F.LM15 ,taskId 605c3502e4655fbb4cf35342_2
[INFO]2021-03-25 15:00:27,088: goTarget {'id': 'LM15'}
[CRITICAL]2021-03-25 15:00:27,330: agvApi step callback cause a error: 'dict' object is not callable
pid=2156, ppid=9204, tid=9584
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 261, in _checkFinish
    t.stepCallback(t.params,t.status)
TypeError: 'dict' object is not callable

[DEBUG]2021-03-25 15:00:27,799: AGV03 choise next pos cur LM9 next AP13 pre LM15 2.200 False
[DEBUG]2021-03-25 15:00:27,800: AGV03 turn to wait check cur LM9 next AP13 2.200 False
[DEBUG]2021-03-25 15:00:28,365: agvInfo: AGV03 AKM4F.LM9 move jackup to AKM4F.AP13 ,taskId 605c3502e4655fbb4cf35342_2
[CRITICAL]2021-03-25 15:00:28,397: agvApi step callback cause a error: 'dict' object is not callable
pid=2156, ppid=9204, tid=9584
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 261, in _checkFinish
    t.stepCallback(t.params,t.status)
TypeError: 'dict' object is not callable

[WARNING]2021-03-25 15:00:29,574: AGV03 waitFinish: loc is diff LM9 AP13 task_status= 2
[WARNING]2021-03-25 15:00:30,076: AGV03 waitFinish: loc is diff LM9 AP13 task_status= 2
[WARNING]2021-03-25 15:00:30,580: AGV03 waitFinish: loc is diff LM9 AP13 task_status= 2
[WARNING]2021-03-25 15:00:31,082: AGV03 waitFinish: loc is diff LM9 AP13 task_status= 2
[WARNING]2021-03-25 15:00:31,584: AGV03 waitFinish: loc is diff LM9 AP13 task_status= 2
[WARNING]2021-03-25 15:00:32,086: AGV03 waitFinish: loc is diff LM9 AP13 task_status= 2
[WARNING]2021-03-25 15:00:32,589: AGV03 waitFinish: loc is diff LM9 AP13 task_status= 2
[DEBUG]2021-03-25 15:00:32,989: AGV03 set loc AKM4F.LM15 ,old LM9 (-9.91,-3.64)
[WARNING]2021-03-25 15:00:33,105: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 15:00:33,607: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 15:00:34,110: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 15:00:34,611: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 15:00:35,113: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 15:00:35,616: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[DEBUG]2021-03-25 15:00:36,065: AGV03 set loc AKM4F.AP13 ,old LM15 (-9.89,-2.33)
[SUCC]2021-03-25 15:00:38,142: Finish:  AGV03 arrived AKM4F.AP13 ,task: 605c3502e4655fbb4cf35342_2
[INFO]2021-03-25 15:00:38,615: task: move finish callback task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload]
[INFO]2021-03-25 15:00:38,618: task[605c3502e4655fbb4cf35342] update info: {'failMsg': 'AGV顶升', 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 38, 615878)}
[DEBUG]2021-03-25 15:00:38,648: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload_jackup] loadPlayload_readqr -> loadPlayload_jackup
[INFO]2021-03-25 15:00:38,952: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload_jackup] _jackUp
[DEBUG]2021-03-25 15:00:38,953: send http_get: http://127.0.0.1:5551/api/agv/jackup?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 15:00:38,958: GET: http://127.0.0.1:5551/api/agv/jackup?agv=AGV03&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-25 15:00:40,544: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': True}, {'id': 21, 'source': 'modbus', 'status': True}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:00:41,638: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': True}, {'id': 21, 'source': 'modbus', 'status': True}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:00:42,764: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': False}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:00:43,985: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': False}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:00:45,135: _jack in jackMgr: AGV03 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': True}, {'id': 32, 'source': 'modbus', 'status': False}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:00:45,153: AGV03 jack up status:  True
[DEBUG]2021-03-25 15:00:45,206: [return] use 6253 ms,http_get: http://127.0.0.1:5551/api/agv/jackup?agv=AGV03&loc=None&timeoutSec=90
[INFO]2021-03-25 15:00:45,258: task[605c3502e4655fbb4cf35342] update info: {'failMsg': '等待四楼Test2工位点锁', 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 45, 242058)}
[WARNING]2021-03-25 15:00:45,281: scada.605c3502e4655fbb4cf35342[tid:16952] <locked _thread.RLock object owner=16952 count=1 at 0x000002404E289750> ,hold 6329 ms
[INFO]2021-03-25 15:00:45,346: name=scada.605c3502e4655fbb4cf35342, pid=2156, tid=16952
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_work/AKMfloor/common/utility.py", line 167, in __call() 
[03] File "D:/python_work/AKMfloor/pharmapackCtrl/runTasks.py", line 725, in _taskFunc() 
[04] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[05] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[06] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[07] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-03-25 15:00:45,369: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [waitDestPreLoc] loadPlayload_jackup -> waitDestPreLoc
[INFO]2021-03-25 15:00:45,742: task: prepoint locked  605c3502e4655fbb4cf35342 AKM4F.AP14
[INFO]2021-03-25 15:00:45,784: task[605c3502e4655fbb4cf35342] update info: {'failMsg': '前往AP14工位点放下货架', 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 45, 766011)}
[DEBUG]2021-03-25 15:00:45,826: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadMove] waitDestPreLoc -> dropPayloadMove
[DEBUG]2021-03-25 15:00:46,222: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV03&agvId=AGV03&appName=scadaTask&direction=None&floorId=AKM4F&isRotate&loc=AKM4F.AP14&location=AP14&p_direction=0.0&pgv_type=1&recognize=False&result=True&resultDesc=None&seer_jackup=JackUnload&taskId=605c3502e4655fbb4cf35342_4&taskType=scadaTask&timeoutSec=86400&use_pgv=False addr: 127.0.0.1
[INFO]2021-03-25 15:00:46,311: Begin: AGV03 move from AKM4F.AP13 to AKM4F.AP14 by paths: [('AKM4F', ['AP13', 'LM15', 'LM9', 'LM10', 'LM16', 'AP14'], 6.244999999999999)] task: 605c3502e4655fbb4cf35342_4 timeout 86400 used 87 ms
[INFO]2021-03-25 15:00:46,316: task[605c3502e4655fbb4cf35342] update info: {'step': 'dropPayload', 'updateTime': datetime.datetime(2021, 3, 25, 15, 0, 46, 314184)}
[DEBUG]2021-03-25 15:00:46,316: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [dropPayload] dropPayloadMove -> dropPayload
[DEBUG]2021-03-25 15:00:47,302: agvInfo: AGV03 AKM4F.AP13 move to AKM4F.LM15 ,taskId 605c3502e4655fbb4cf35342_4
[INFO]2021-03-25 15:00:47,305: goTarget {'id': 'LM15'}
[DEBUG]2021-03-25 15:00:49,609: AGV03 turn to wait check cur AP13 next LM9 0.940 False
[DEBUG]2021-03-25 15:00:50,285: agvInfo: AGV03 AKM4F.AP13 move to AKM4F.LM9 ,taskId 605c3502e4655fbb4cf35342_4
[INFO]2021-03-25 15:00:50,286: goTarget {'id': 'LM9'}
[DEBUG]2021-03-25 15:00:51,729: AGV03 set loc AKM4F.LM15 ,old AP13 (-9.89,-3.47)
[DEBUG]2021-03-25 15:00:52,007: AGV03 turn to wait check cur LM15 next LM10 0.842 False
[DEBUG]2021-03-25 15:00:52,657: agvInfo: AGV03 AKM4F.LM15 move to AKM4F.LM10 ,taskId 605c3502e4655fbb4cf35342_4
[INFO]2021-03-25 15:00:52,658: goTarget {'id': 'LM10'}
[ERROR]2021-03-25 15:00:58,481: raise alarm obj=AGV03, typeId=54231, desc=AGV异常, id=605c352a07e2e631304f48a9
[DEBUG]2021-03-25 15:01:03,047: AGV03 set loc AKM4F.LM9 ,old LM15 (-9.88,-4.35)
[DEBUG]2021-03-25 15:01:09,972: AGV03 turn to wait check cur LM9 next LM16 0.974 False
[DEBUG]2021-03-25 15:01:10,570: agvInfo: AGV03 AKM4F.LM9 move to AKM4F.LM16 ,taskId 605c3502e4655fbb4cf35342_4
[INFO]2021-03-25 15:01:10,571: goTarget {'id': 'LM16'}
[DEBUG]2021-03-25 15:01:11,385: AGV03 set loc AKM4F.LM10 ,old LM9 (-8.20,-4.43)
[DEBUG]2021-03-25 15:01:11,788: AGV03 choise next pos cur LM10 next AP14 pre LM16 2.200 False
[DEBUG]2021-03-25 15:01:11,789: AGV03 turn to wait check cur LM10 next AP14 2.200 False
[DEBUG]2021-03-25 15:01:12,332: agvInfo: AGV03 AKM4F.LM10 move jackdown to AKM4F.AP14 ,taskId 605c3502e4655fbb4cf35342_4
[WARNING]2021-03-25 15:01:13,542: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:14,045: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:14,548: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:15,052: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:15,555: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:16,057: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:16,559: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:17,060: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:17,563: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:18,065: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[WARNING]2021-03-25 15:01:18,568: AGV03 waitFinish: loc is diff LM10 AP14 task_status= 2
[DEBUG]2021-03-25 15:01:18,835: AGV03 set loc AKM4F.LM16 ,old LM10 (-8.03,-3.61)
[WARNING]2021-03-25 15:01:19,084: AGV03 waitFinish: loc is diff LM16 AP14 task_status= 2
[WARNING]2021-03-25 15:01:19,587: AGV03 waitFinish: loc is diff LM16 AP14 task_status= 2
[WARNING]2021-03-25 15:01:20,090: AGV03 waitFinish: loc is diff LM16 AP14 task_status= 2
[WARNING]2021-03-25 15:01:20,592: AGV03 waitFinish: loc is diff LM16 AP14 task_status= 2
[WARNING]2021-03-25 15:01:21,094: AGV03 waitFinish: loc is diff LM16 AP14 task_status= 2
[DEBUG]2021-03-25 15:01:21,101: AGV03 set loc AKM4F.AP14 ,old LM16 (-8.04,-2.39)
[SUCC]2021-03-25 15:01:24,115: Finish:  AGV03 arrived AKM4F.AP14 ,task: 605c3502e4655fbb4cf35342_4
[INFO]2021-03-25 15:01:24,297: task: move finish callback task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [dropPayload]
[INFO]2021-03-25 15:01:24,301: task[605c3502e4655fbb4cf35342] update info: {'failMsg': '放下货架，旋转顶升机构初始化', 'updateTime': datetime.datetime(2021, 3, 25, 15, 1, 24, 298977)}
[INFO]2021-03-25 15:01:24,365: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadJackdown] _jackDown
[DEBUG]2021-03-25 15:01:24,365: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 15:01:24,366: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-25 15:01:26,693: _jack in jackMgr: AGV03 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': True}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': True}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': True}, {'id': 32, 'source': 'modbus', 'status': False}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:01:28,362: _jack in jackMgr: AGV03 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': True}, {'id': 32, 'source': 'modbus', 'status': False}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:01:30,136: _jack in jackMgr: AGV03 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': False}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:01:31,867: _jack in jackMgr: AGV03 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:01:31,937: AGV03 jack down status:  True
[DEBUG]2021-03-25 15:01:31,990: used 7624ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 15:01:32,018: [return] use 7653 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[WARNING]2021-03-25 15:01:32,065: scada.605c3502e4655fbb4cf35342[tid:16952] <locked _thread.RLock object owner=16952 count=1 at 0x000002404E289750> ,hold 7700 ms
[INFO]2021-03-25 15:01:32,127: name=scada.605c3502e4655fbb4cf35342, pid=2156, tid=16952
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_work/AKMfloor/common/utility.py", line 167, in __call() 
[03] File "D:/python_work/AKMfloor/pharmapackCtrl/runTasks.py", line 725, in _taskFunc() 
[04] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[05] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[06] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[07] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-03-25 15:01:32,150: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadReset] dropPayloadJackdown -> dropPayloadReset
[INFO]2021-03-25 15:01:32,494: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [dropPayloadReset] rotationClear
[DEBUG]2021-03-25 15:01:32,522: send http_get: http://127.0.0.1:5551/api/agv/rotationclear?agv=AGV03&timeoutSec=30
[DEBUG]2021-03-25 15:01:32,622: GET: http://127.0.0.1:5551/api/agv/rotationclear?agv=AGV03&timeoutSec=30 addr: 127.0.0.1
[INFO]2021-03-25 15:01:34,948: _rotation in rotationMgr: AGV03 None [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 9, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 15:01:35,067: AGV03 rotation clear status: True
[DEBUG]2021-03-25 15:01:35,089: used 2467ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/rotationclear?agv=AGV03&timeoutSec=30
[DEBUG]2021-03-25 15:01:35,157: [return] use 2634 ms,http_get: http://127.0.0.1:5551/api/agv/rotationclear?agv=AGV03&timeoutSec=30
[INFO]2021-03-25 15:01:35,220: task[605c3502e4655fbb4cf35342]:  successed {'step': 'finish', 'failMsg': '任务成功', 'endTime': datetime.datetime(2021, 3, 25, 15, 1, 35, 192340), 'status': 'success'}
[DEBUG]2021-03-25 15:01:35,248: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [finish] dropPayloadReset -> finish
[INFO]2021-03-25 15:01:35,602: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [finish] AGV03 release task, release agv True True False
[DEBUG]2021-03-25 15:01:35,674: GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV03&appName=scadaTask&taskId=605c3502e4655fbb4cf35342 addr: 127.0.0.1
[DEBUG]2021-03-25 15:01:35,697: used 23ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV03&appName=scadaTask&taskId=605c3502e4655fbb4cf35342
[DEBUG]2021-03-25 15:01:35,793: GET: http://127.0.0.1:5551/api/agv/release?agv=AGV03&appName=scadaTask&force=False&taskId=605c3502e4655fbb4cf35342 addr: 127.0.0.1
[DEBUG]2021-03-25 15:01:35,818: unlock: AGV03 taskId 605c3502e4655fbb4cf35342 app scadaTask force False
[DEBUG]2021-03-25 15:01:35,877: used 83ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/release?agv=AGV03&appName=scadaTask&force=False&taskId=605c3502e4655fbb4cf35342
[INFO]2021-03-25 15:01:35,928: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [finish] let AGV03 gohome
[DEBUG]2021-03-25 15:01:36,040: GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV03&appName=scadaTask&force=False&timeout=10800 addr: 127.0.0.1
[INFO]2021-03-25 15:01:36,096: AGV03 gohome home_1 force False taskId home_1 : AGV03.AP14 -> AKM2F.LM8
[CRITICAL]2021-03-25 15:01:36,197: invoke <function urlGoHome at 0x0000024047E4CDC0> cause a error: AKM4F.AP14->AKM2F.LM8 路径不存在1,agvId=AGV03
pid=2156, ppid=9204, tid=14392
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\main_agv.py", line 99, in urlGoHome
    agvControl.goHome(agvId=agvId,force=force,timeout=timeout)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1307, in goHome
    move(agvId=agvId, target=agv.homeLoc, taskId=taskId, timeout=timeout,finishCallback=goHomeFinish)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1242, in move
    _func()
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1208, in _func
    raise Exception(mapMgr.formatLoc(agv.mapId,agv.curTarget)+"->"+target+" 路径不存在1,agvId="+agv.agvId)
Exception: AKM4F.AP14->AKM2F.LM8 路径不存在1,agvId=AGV03

[DEBUG]2021-03-25 15:01:36,243: used 204ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV03&appName=scadaTask&force=False&timeout=10800
[CRITICAL]2021-03-25 15:01:36,329: task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [finish]task release cause a error: Exception: AKM4F.AP14->AKM2F.LM8 路径不存在1,agvId=AGV03
pid=2156, ppid=9204, tid=16952
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 762, in _release
    agvApi.goHome(self.agvId,force=False,timeout=60*60*3)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 129, in goHome
    _http_get(url + '/api/agv/goHome', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 64, in _http_get
    raise Exception(result["errormsg"])
Exception: Exception: AKM4F.AP14->AKM2F.LM8 路径不存在1,agvId=AGV03

[INFO]2021-03-25 15:01:36,377: task: prepoint released2  605c3502e4655fbb4cf35342 AKM4F.AP14
[INFO]2021-03-25 15:01:36,405: task: stop task[605c3502e4655fbb4cf35342][AGV03] AP13(LM15) -> AP14(LM16) [finish]
[DEBUG]2021-03-25 15:01:36,411: task: delete task 605c3502e4655fbb4cf35342

[INFO]2021-06-11 16:29:00,138: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-11 16:29:00,139: find module account.main_account
[INFO]2021-06-11 16:29:00,139: find module agvCtrl.main_agv
[INFO]2021-06-11 16:29:00,140: find module agvDevice.main_agvDevice
[INFO]2021-06-11 16:29:00,141: find module akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:29:00,141: find module alarm.main_alarm
[INFO]2021-06-11 16:29:00,142: find module auth.main_auth
[INFO]2021-06-11 16:29:00,143: find module door.main_door
[INFO]2021-06-11 16:29:00,143: find module elevator.main_elevator
[INFO]2021-06-11 16:29:00,144: find module feed.main_feed
[INFO]2021-06-11 16:29:00,144: find module remoteio.main_remoteio
[INFO]2021-06-11 16:29:00,145: import account.main_account
[INFO]2021-06-11 16:29:00,269: import agvCtrl.main_agv
[INFO]2021-06-11 16:29:00,873: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2A6EDDA0>>
[INFO]2021-06-11 16:29:00,908: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2A6EDF08>>
[INFO]2021-06-11 16:29:01,052: create lock <lock name:timer.lock_1491069599872,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2AA65B98>>
[ERROR]2021-06-11 16:29:01,066: mqtt is disabled
[INFO]2021-06-11 16:29:01,067: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-11 16:29:01,068: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-11 16:29:04,103: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-11 16:29:04,161: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2AD28030>>
[WARNING]2021-06-11 16:29:04,201: use mockAgvCtrl
[INFO]2021-06-11 16:29:04,213: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B28F2EC88>>
[INFO]2021-06-11 16:29:04,737: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2AD5FF58>>
[INFO]2021-06-11 16:29:04,751: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2ADD9FA8>>
[INFO]2021-06-11 16:29:04,931: charge policy 1 , fix time
[INFO]2021-06-11 16:29:04,970: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2AE51198>>
[INFO]2021-06-11 16:29:05,680: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-11 16:29:05,870: elevator thread start
[INFO]2021-06-11 16:29:05,934: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 263 ms
[INFO]2021-06-11 16:29:05,958: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-11 16:29:06,034: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 96 ms
[INFO]2021-06-11 16:29:06,049: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-11 16:29:06,233: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 197 ms
[INFO]2021-06-11 16:29:06,264: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-11 16:29:06,475: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 239 ms
[INFO]2021-06-11 16:29:06,489: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-11 16:29:06,631: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 153 ms
[INFO]2021-06-11 16:29:06,676: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-11 16:29:06,801: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 162 ms
[INFO]2021-06-11 16:29:06,809: import agvDevice.main_agvDevice
[INFO]2021-06-11 16:29:06,811: import akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:29:06,916: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2B2E5120>>
[INFO]2021-06-11 16:29:06,993: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2B367968>>
[INFO]2021-06-11 16:29:07,057: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2B1E7CB0>>
[INFO]2021-06-11 16:29:07,066: create lock <lock name:timer.lock_1491151877848,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2B1E7E40>>
[INFO]2021-06-11 16:29:07,076: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B29B2B170>>
[INFO]2021-06-11 16:29:07,188: import alarm.main_alarm
[INFO]2021-06-11 16:29:07,205: import auth.main_auth
[INFO]2021-06-11 16:29:08,870: import door.main_door
[INFO]2021-06-11 16:29:08,883: import elevator.main_elevator
[INFO]2021-06-11 16:29:08,900: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B29B2BC60>>
[INFO]2021-06-11 16:29:08,910: import feed.main_feed
[INFO]2021-06-11 16:29:08,924: IP: 0.0.0.0 port: 10001
[INFO]2021-06-11 16:29:08,932: import remoteio.main_remoteio
[SUCC]2021-06-11 16:29:08,991: utility start, pid=11272, ppid=16476
[DEBUG]2021-06-11 16:29:09,004: start timer
[INFO]2021-06-11 16:29:09,034: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-11 16:29:09,042: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000015B2B996670>>
[DEBUG]2021-06-11 16:29:09,057: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-11 16:29:09,069: AGV30 start agvList run thread
[INFO]2021-06-11 16:29:09,071: AGV30 start agvList run2 thread
[ERROR]2021-06-11 16:29:09,094: agv check init error False
[DEBUG]2021-06-11 16:29:09,100: start timer
[INFO]2021-06-11 16:29:09,133: add_ignore: taskStatus
[INFO]2021-06-11 16:29:09,139: add_ignore: api/elevator/status
[INFO]2021-06-11 16:29:09,143: add_ignore: scada/getTask
[INFO]2021-06-11 16:29:09,391: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62656
[INFO]2021-06-11 16:29:09,405: **************回复线程启动**************
[INFO]2021-06-11 16:29:09,605: AGV30 current map meiwei428
[INFO]2021-06-11 16:29:09,607: AGV30 is online
[DEBUG]2021-06-11 16:29:10,137: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-11 16:29:10,143: MeiWeiTask init client agvApi
[DEBUG]2021-06-11 16:29:10,150: used 14ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[DEBUG]2021-06-11 16:29:13,332: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[DEBUG]2021-06-11 16:29:13,423: used 92ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[WARNING]2021-06-11 16:29:13,593: timer_thread[tid:24328] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=24328 count=1 at 0x0000015B2B2E5120>> ,hold 4488 ms
[INFO]2021-06-11 16:29:13,908: name=timer_thread, pid=11272, tid=24328
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-11 16:29:15,345: 1
[INFO]2021-06-11 16:29:15,517: {'21': {'loc': 1, 'map': 'test'}, '23': {'loc': 3, 'map': 'test'}}
[INFO]2021-06-11 16:29:15,596: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-11 16:29:15,673: 3
[INFO]2021-06-11 16:29:15,736: source 8
[INFO]2021-06-11 16:29:15,827: target 3
[INFO]2021-06-11 16:29:15,905: ---------------------runTask01--------------------addTaskByButton-----
[INFO]2021-06-11 16:29:15,997: ----------------------scadaTask----------------
[INFO]2021-06-11 16:29:16,089: 8 3
[INFO]2021-06-11 16:29:16,227: create task[60c31edccca211437224cf53]: type= scadaTask , 从8运送货架到3 {'source': '8', 'target': '3', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从8运送货架到3', 'createTime': datetime.datetime(2021, 6, 11, 16, 29, 16, 181511), 'updateTime': datetime.datetime(2021, 6, 11, 16, 29, 16, 181511), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('60c31edccca211437224cf53')}
[WARNING]2021-06-11 16:29:16,428: task[60c31edccca211437224cf53]: failed, {'failMsg': "can't find source-8 and target-3 info", 'endTime': datetime.datetime(2021, 6, 11, 16, 29, 16, 413122), 'status': 'fail'}
[INFO]2021-06-11 16:29:16,522: None
[INFO]2021-06-11 16:29:16,568: 0
[CRITICAL]2021-06-11 16:29:16,877: invoke timer func<function lock.<locals>.call.<locals>._call at 0x0000015B29B14158> cause a error: 'NoneType' object is not subscriptable
pid=11272, ppid=16476, tid=24328
Traceback (most recent call last):
  File "..\common\mytimer.py", line 113, in _loop
    v.func(*v.args)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 58, in run
    if not g_taskMgr.checkTask(t):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskMgrBean.py", line 68, in checkTask
    log.info(task.s_info["floorId"], task.s_info["prepoint"])
TypeError: 'NoneType' object is not subscriptable

[INFO]2021-06-11 16:29:18,016: None

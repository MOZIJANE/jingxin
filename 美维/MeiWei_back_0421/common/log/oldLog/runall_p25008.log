[INFO]2021-03-18 09:42:35,856: log files at D:\python_work\AKMfloor\common\log
[INFO]2021-03-18 09:42:35,857: find module account.main_account
[INFO]2021-03-18 09:42:35,858: find module agvCtrl.main_agv
[INFO]2021-03-18 09:42:35,858: find module agvDevice.main_agvDevice
[INFO]2021-03-18 09:42:35,859: find module alarm.main_alarm
[INFO]2021-03-18 09:42:35,859: find module auth.main_auth
[INFO]2021-03-18 09:42:35,860: find module door.main_door
[INFO]2021-03-18 09:42:35,861: find module elevator.main_elevator
[INFO]2021-03-18 09:42:35,861: find module feed.main_feed
[INFO]2021-03-18 09:42:35,863: find module menu.main_menu
[INFO]2021-03-18 09:42:35,864: find module pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-18 09:42:35,873: find module webFront.main_web
[INFO]2021-03-18 09:42:35,874: find module wmqtt.main_wmqtt
[INFO]2021-03-18 09:42:35,874: import account.main_account
[INFO]2021-03-18 09:42:35,983: import agvCtrl.main_agv
[INFO]2021-03-18 09:42:36,338: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019541310B70>>
[INFO]2021-03-18 09:42:36,341: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000195413204B0>>
[INFO]2021-03-18 09:42:36,444: create lock <lock name:timer.lock_1740558782272,<unlocked _thread.RLock object owner=0 count=0 at 0x00000195416410C0>>
[ERROR]2021-03-18 09:42:36,462: mqtt is disabled
[INFO]2021-03-18 09:42:36,463: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-18 09:42:36,463: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-18 09:42:39,498: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-18 09:42:39,551: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001954188EB40>>
[WARNING]2021-03-18 09:42:39,569: use mockAgvCtrl
[INFO]2021-03-18 09:42:39,572: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001953FBDE210>>
[INFO]2021-03-18 09:42:40,097: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001954194E9C0>>
[INFO]2021-03-18 09:42:40,102: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000195419F4ED0>>
[INFO]2021-03-18 09:42:40,172: charge policy 1 , fix time
[INFO]2021-03-18 09:42:40,212: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019541A03AB0>>
[INFO]2021-03-18 09:42:41,590: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\20190911_F1.smap
[DEBUG]2021-03-18 09:42:41,862: elevator thread start
[INFO]2021-03-18 09:42:41,882: load map D:\python_work\AKMfloor\agvCtrl\projects\test\20190911_F1.smap ,used 317 ms
[INFO]2021-03-18 09:42:41,903: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\408.smap
[INFO]2021-03-18 09:42:41,980: load map D:\python_work\AKMfloor\agvCtrl\projects\test\408.smap ,used 96 ms
[INFO]2021-03-18 09:42:41,992: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\510.smap
[INFO]2021-03-18 09:42:42,084: load map D:\python_work\AKMfloor\agvCtrl\projects\test\510.smap ,used 102 ms
[INFO]2021-03-18 09:42:42,095: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\8-222.smap
[INFO]2021-03-18 09:42:42,142: load map D:\python_work\AKMfloor\agvCtrl\projects\test\8-222.smap ,used 56 ms
[INFO]2021-03-18 09:42:42,154: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-03-18 09:42:42,208: load map D:\python_work\AKMfloor\agvCtrl\projects\test\akmsmt.smap ,used 64 ms
[INFO]2021-03-18 09:42:42,221: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-03-18 09:42:42,377: load map D:\python_work\AKMfloor\agvCtrl\projects\test\akmsmtMap.smap ,used 167 ms
[INFO]2021-03-18 09:42:42,388: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\bell.smap
[INFO]2021-03-18 09:42:42,428: load map D:\python_work\AKMfloor\agvCtrl\projects\test\bell.smap ,used 49 ms
[INFO]2021-03-18 09:42:42,438: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\big.smap
[INFO]2021-03-18 09:42:43,818: load map D:\python_work\AKMfloor\agvCtrl\projects\test\big.smap ,used 1389 ms
[INFO]2021-03-18 09:42:43,830: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-03-18 09:42:43,973: load map D:\python_work\AKMfloor\agvCtrl\projects\test\desai-all-20191223.smap ,used 153 ms
[INFO]2021-03-18 09:42:43,985: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\famajia.smap
[INFO]2021-03-18 09:42:44,331: load map D:\python_work\AKMfloor\agvCtrl\projects\test\famajia.smap ,used 356 ms
[INFO]2021-03-18 09:42:44,343: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\fp-neiwei.smap
[INFO]2021-03-18 09:42:44,599: load map D:\python_work\AKMfloor\agvCtrl\projects\test\fp-neiwei.smap ,used 266 ms
[INFO]2021-03-18 09:42:44,611: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\fp20190712-1.smap
[INFO]2021-03-18 09:42:45,935: load map D:\python_work\AKMfloor\agvCtrl\projects\test\fp20190712-1.smap ,used 1334 ms
[INFO]2021-03-18 09:42:45,963: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\shuqin.smap
[INFO]2021-03-18 09:42:46,053: load map D:\python_work\AKMfloor\agvCtrl\projects\test\shuqin.smap ,used 116 ms
[INFO]2021-03-18 09:42:46,064: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\test430.smap
[INFO]2021-03-18 09:42:46,195: load map D:\python_work\AKMfloor\agvCtrl\projects\test\test430.smap ,used 140 ms
[INFO]2021-03-18 09:42:46,207: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\testdesay.smap
[INFO]2021-03-18 09:42:46,307: load map D:\python_work\AKMfloor\agvCtrl\projects\test\testdesay.smap ,used 110 ms
[INFO]2021-03-18 09:42:46,322: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\testmap.smap
[INFO]2021-03-18 09:42:46,608: load map D:\python_work\AKMfloor\agvCtrl\projects\test\testmap.smap ,used 299 ms
[INFO]2021-03-18 09:42:46,622: start load map D:\python_work\AKMfloor\agvCtrl\projects\test\testscada.smap
[INFO]2021-03-18 09:42:46,703: load map D:\python_work\AKMfloor\agvCtrl\projects\test\testscada.smap ,used 92 ms
[WARNING]2021-03-18 09:42:46,705: MainThread[tid:14028] <lock name:mapMgr.lock,<locked _thread.RLock object owner=14028 count=1 at 0x000001953FBDE210>> ,hold 6491 ms
[INFO]2021-03-18 09:42:46,706: name=MainThread, pid=25008, tid=14028
[01] File "D:/python_work/AKMfloor/common/run_all.py", line 57, in <module>() 
[02] File "D:/python_work/AKMfloor/common/run_all.py", line 39, in findModule() 
[03] File "<frozen importlib._bootstrap>", line 991, in _find_and_load() 
[04] File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked() 
[05] File "<frozen importlib._bootstrap>", line 671, in _load_unlocked() 
[06] File "<frozen importlib._bootstrap_external>", line 783, in exec_module() 
[07] File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed() 
[08] File "D:/python_work/AKMfloor/agvCtrl/main_agv.py", line 22, in <module>() 
[09] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[10] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[11] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[12] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-03-18 09:42:46,712: import agvDevice.main_agvDevice
[INFO]2021-03-18 09:42:46,715: import alarm.main_alarm
[INFO]2021-03-18 09:42:46,717: import auth.main_auth
[INFO]2021-03-18 09:42:46,727: import door.main_door
[INFO]2021-03-18 09:42:46,731: import elevator.main_elevator
[INFO]2021-03-18 09:42:46,746: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019545FC7870>>
[INFO]2021-03-18 09:42:46,749: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019546016120>>
[INFO]2021-03-18 09:42:46,752: import feed.main_feed
[INFO]2021-03-18 09:42:46,767: create lock <lock name:feedTask.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019545E54570>>
[INFO]2021-03-18 09:42:46,773: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019545E54FC0>>
[INFO]2021-03-18 09:42:47,387: import menu.main_menu
[INFO]2021-03-18 09:42:47,391: import pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-18 09:42:47,463: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019546507330>>
[INFO]2021-03-18 09:42:47,465: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019546507E40>>
[INFO]2021-03-18 09:42:47,473: import webFront.main_web
[INFO]2021-03-18 09:42:47,478: import wmqtt.main_wmqtt
[SUCC]2021-03-18 09:42:47,490: utility start, pid=25008, ppid=12724
[DEBUG]2021-03-18 09:42:47,492: start timer
[INFO]2021-03-18 09:42:47,502: load agv file: D:\python_work\AKMfloor\agvCtrl/projects/test/agv.cfg
[INFO]2021-03-18 09:42:47,504: create lock <lock name:agvList.AGV01.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019549BBC5A0>>
[DEBUG]2021-03-18 09:42:47,509: create aliveObj AGV01 AGV离线异常 timeout 300
[INFO]2021-03-18 09:42:47,511: AGV01 start agvList run thread
[INFO]2021-03-18 09:42:47,512: AGV01 start agvList run2 thread
[INFO]2021-03-18 09:42:47,519: create lock <lock name:agvList.AGV02.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019549BBCD80>>
[ERROR]2021-03-18 09:42:47,520: agv check init error False
[DEBUG]2021-03-18 09:42:47,524: create aliveObj AGV02 AGV离线异常 timeout 300
[INFO]2021-03-18 09:42:47,525: AGV02 start agvList run thread
[INFO]2021-03-18 09:42:47,526: AGV02 start agvList run2 thread
[INFO]2021-03-18 09:42:47,526: create lock <lock name:agvList.AGV03.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019549BDB210>>
[INFO]2021-03-18 09:42:47,529: AGV02 current map famajia
[DEBUG]2021-03-18 09:42:47,531: create aliveObj AGV03 AGV离线异常 timeout 300
[INFO]2021-03-18 09:42:47,532: AGV02 is online
[INFO]2021-03-18 09:42:47,534: AGV03 start agvList run thread
[INFO]2021-03-18 09:42:47,534: AGV03 start agvList run2 thread
[INFO]2021-03-18 09:42:47,545: AGV03 current map famajia
[INFO]2021-03-18 09:42:47,547: AGV03 is online
[INFO]2021-03-18 09:42:47,556: add_ignore: taskStatus
[INFO]2021-03-18 09:42:47,558: add_ignore: api/elevator/status
[INFO]2021-03-18 09:42:47,561: add_ignore: scada/getTask
[INFO]2021-03-18 09:42:48,024: AGV01 current map famajia
[INFO]2021-03-18 09:42:48,025: AGV01 is online
[DEBUG]2021-03-18 09:42:49,518: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-03-18 09:42:49,526: scadaTask init client agvApi
[DEBUG]2021-03-18 09:42:49,531: used 12ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[DEBUG]2021-03-18 09:42:52,602: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-03-18 09:42:52,647: used 45ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[WARNING]2021-03-18 09:42:52,701: timer_thread[tid:8448] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=8448 count=1 at 0x0000019546507330>> ,hold 3200 ms
[INFO]2021-03-18 09:42:52,743: name=timer_thread, pid=25008, tid=8448
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_work/AKMfloor/common/mytimer.py", line 113, in _loop() 
[03] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[04] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[05] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[06] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-03-18 09:43:02,981: GET: http://192.168.252.83:5551/api/manual/seat addr: 192.168.252.94
[DEBUG]2021-03-18 09:43:02,993: GET: http://192.168.252.83:5551/api/manual/tasklist addr: 192.168.252.94
[DEBUG]2021-03-18 09:43:03,005: GET: http://192.168.252.83:5551/api/manual/seat addr: 192.168.252.94
[DEBUG]2021-03-18 09:43:03,053: GET: http://192.168.252.83:5551/api/manual/seat addr: 192.168.252.94
[DEBUG]2021-03-18 09:43:03,105: used 52ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/manual/tasklist
[DEBUG]2021-03-18 09:43:03,275: GET: http://192.168.252.83:5551/api/agv/agvStatusList?mapId=famajia addr: 192.168.252.94
[DEBUG]2021-03-18 09:43:03,327: used 52ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/agv/agvStatusList?mapId=famajia
[DEBUG]2021-03-18 09:43:21,263: GET: http://192.168.252.83:5551/api/scada/addTask?source=%E4%BB%93%E5%BA%932&target=%E6%9C%BA%E5%8A%A0%E9%92%B3%E5%B7%A5 addr: 192.168.252.94
[INFO]2021-03-18 09:43:21,287: Scada send a task to the server from 仓库2 to 机加钳工 payloadId: None
[INFO]2021-03-18 09:43:21,340: create task[6052b039e73748e754a6f0ad]: type= scadaTask , 从仓库2运送货架到机加钳工 {'source': '仓库2', 'target': '机加钳工', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从仓库2运送货架到机加钳工', 'createTime': datetime.datetime(2021, 3, 18, 9, 43, 21, 328523), 'updateTime': datetime.datetime(2021, 3, 18, 9, 43, 21, 328523), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('6052b039e73748e754a6f0ad')}
[INFO]2021-03-18 09:43:21,416: task[6052b039e73748e754a6f0ad][-] AP140(LM137) -> AP61(LM14) [waiting] is inside False
[INFO]2021-03-18 09:43:21,435: task cmd: got a task from scada task[6052b039e73748e754a6f0ad][-] AP140(LM137) -> AP61(LM14) [waiting]
[DEBUG]2021-03-18 09:43:21,465: used 202ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/addTask?source=%E4%BB%93%E5%BA%932&target=%E6%9C%BA%E5%8A%A0%E9%92%B3%E5%B7%A5
[INFO]2021-03-18 09:43:22,253: task[6052b039e73748e754a6f0ad]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 3, 18, 9, 43, 22, 235681), 'updateTime': datetime.datetime(2021, 3, 18, 9, 43, 22, 235681), 'status': 'running'}
[INFO]2021-03-18 09:43:22,262: task: start task[6052b039e73748e754a6f0ad][-] AP140(LM137) -> AP61(LM14) [waiting]
[INFO]2021-03-18 09:43:22,302: task[6052b039e73748e754a6f0ad] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 3, 18, 9, 43, 22, 282080)}
[DEBUG]2021-03-18 09:43:22,343: task[6052b039e73748e754a6f0ad][-] AP140(LM137) -> AP61(LM14) [waitForAgv] waiting -> waitForAgv
[DEBUG]2021-03-18 09:43:23,652: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP140&mapId=famajia&taskId=6052b039e73748e754a6f0ad&timeout=10 addr: 127.0.0.1
[INFO]2021-03-18 09:43:25,229: apply AGV01 ,taskId: 6052b039e73748e754a6f0ad ,loc famajia.AP140 ,autoLock False , used 1541 ms
[DEBUG]2021-03-18 09:43:25,330: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV01&appName=scadaTask&taskId=6052b039e73748e754a6f0ad addr: 127.0.0.1
[DEBUG]2021-03-18 09:43:25,359: lock:  AGV01 taskId 6052b039e73748e754a6f0ad app scadaTask
[WARNING]2021-03-18 09:43:26,386: AGV01 clear task finish, cur= famajia.AP34 task_status= 0
[DEBUG]2021-03-18 09:43:26,426: used 1096ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV01&appName=scadaTask&taskId=6052b039e73748e754a6f0ad
[INFO]2021-03-18 09:43:26,472: task[6052b039e73748e754a6f0ad][-] AP140(LM137) -> AP61(LM14) [waitForAgv] apply AGV01
[INFO]2021-03-18 09:43:26,518: task[6052b039e73748e754a6f0ad] update info: {'agvId': 'AGV01', 'failMsg': '成功分配小车AGV01,检测顶升下降', 'updateTime': datetime.datetime(2021, 3, 18, 9, 43, 26, 506758)}
[DEBUG]2021-03-18 09:43:26,564: task[6052b039e73748e754a6f0ad][AGV01] AP140(LM137) -> AP61(LM14) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-03-18 09:43:26,904: task[6052b039e73748e754a6f0ad][AGV01] AP140(LM137) -> AP61(LM14) [initJackdown] _jackDown
[DEBUG]2021-03-18 09:43:26,961: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:43:27,061: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-18 09:43:27,095: _jack in jackMgr: AGV01 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-18 09:43:27,156: AGV01 jack down status:  1
[DEBUG]2021-03-18 09:43:27,187: used 127ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:43:27,240: [return] use 279 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[INFO]2021-03-18 09:43:27,273: task[6052b039e73748e754a6f0ad] update info: {'failMsg': '前往仓库2工位点拉取货架', 'updateTime': datetime.datetime(2021, 3, 18, 9, 43, 27, 268968)}
[DEBUG]2021-03-18 09:43:27,297: task[6052b039e73748e754a6f0ad][AGV01] AP140(LM137) -> AP61(LM14) [startMoveJackup] initJackdown -> startMoveJackup
[DEBUG]2021-03-18 09:43:27,652: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP140&location=AP140&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=6052b039e73748e754a6f0ad_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True addr: 127.0.0.1
[CRITICAL]2021-03-18 09:43:27,664: invoke <function urlMove at 0x0000019545C71A60> cause a error: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01
pid=25008, ppid=12724, tid=22960
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\main_agv.py", line 123, in urlMove
    agvControl.move(target=target, agvId=agvId, taskId=taskId, timeout=timeout,paramObj=paramObj)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1241, in move
    _func()
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1207, in _func
    raise Exception(mapMgr.formatLoc(agv.mapId,agv.curTarget)+"->"+target+" 路径不存在1,agvId="+agv.agvId)
Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01

[DEBUG]2021-03-18 09:43:27,667: used 15ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP140&location=AP140&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=6052b039e73748e754a6f0ad_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True
[CRITICAL]2021-03-18 09:43:27,677: taskFunc2:task[6052b039e73748e754a6f0ad][AGV01] AP140(LM137) -> AP61(LM14) [startMoveJackup] cause a error: Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01
pid=25008, ppid=12724, tid=9120
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 725, in _taskFunc
    elif not self.handle():
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 601, in handle
    self._moveJackup()
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 825, in _moveJackup
    agvApi.moveJackup(self.agvId, self.param["floorId"]+'.'+self.param["location"], self.onFinish, self.param, use_pgv=True,pgv_type=1)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 182, in moveJackup
    return move(agvId,loc,finishCallback,paramObj,stepCallback)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 170, in move
    _http_get(url + '/api/agv/move', paramObj)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 64, in _http_get
    raise Exception(result["errormsg"])
Exception: Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01

[WARNING]2021-03-18 09:43:27,680: task[6052b039e73748e754a6f0ad]:  error {'failMsg': 'Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01', 'endTime': datetime.datetime(2021, 3, 18, 9, 43, 27, 679591), 'status': 'error'}
[INFO]2021-03-18 09:43:27,684: task[6052b039e73748e754a6f0ad][AGV01] AP140(LM137) -> AP61(LM14) [startMoveJackup] AGV01 release task, release agv True True False
[DEBUG]2021-03-18 09:43:27,693: GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b039e73748e754a6f0ad addr: 127.0.0.1
[DEBUG]2021-03-18 09:43:27,696: used 3ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b039e73748e754a6f0ad
[DEBUG]2021-03-18 09:43:27,703: GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b039e73748e754a6f0ad addr: 127.0.0.1
[DEBUG]2021-03-18 09:43:27,708: unlock: AGV01 taskId 6052b039e73748e754a6f0ad app scadaTask force False
[DEBUG]2021-03-18 09:43:27,710: used 7ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b039e73748e754a6f0ad
[INFO]2021-03-18 09:43:27,718: task[6052b039e73748e754a6f0ad][AGV01] AP140(LM137) -> AP61(LM14) [startMoveJackup] let AGV01 gohome
[DEBUG]2021-03-18 09:43:27,732: GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800 addr: 127.0.0.1
[INFO]2021-03-18 09:43:27,737: AGV01 is in home loc famajia.AP34
[DEBUG]2021-03-18 09:43:27,742: used 10ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800
[INFO]2021-03-18 09:43:27,744: task: stop task[6052b039e73748e754a6f0ad][-] AP140(LM137) -> AP61(LM14) [startMoveJackup]
[DEBUG]2021-03-18 09:43:28,352: task: delete task 6052b039e73748e754a6f0ad
[DEBUG]2021-03-18 09:45:00,465: GET: http://192.168.252.83:5551/api/scada/addTask?source=%E4%BB%93%E5%BA%932&target=%E4%BB%93%E5%BA%931 addr: 192.168.252.94
[INFO]2021-03-18 09:45:00,501: Scada send a task to the server from 仓库2 to 仓库1 payloadId: None
[INFO]2021-03-18 09:45:00,545: create task[6052b09ce73748e754a6f0ae]: type= scadaTask , 从仓库2运送货架到仓库1 {'source': '仓库2', 'target': '仓库1', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从仓库2运送货架到仓库1', 'createTime': datetime.datetime(2021, 3, 18, 9, 45, 0, 540151), 'updateTime': datetime.datetime(2021, 3, 18, 9, 45, 0, 540151), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('6052b09ce73748e754a6f0ae')}
[INFO]2021-03-18 09:45:00,583: task[6052b09ce73748e754a6f0ae][-] AP140(LM137) -> AP139(LM133) [waiting] is inside False
[INFO]2021-03-18 09:45:00,594: task cmd: got a task from scada task[6052b09ce73748e754a6f0ae][-] AP140(LM137) -> AP139(LM133) [waiting]
[DEBUG]2021-03-18 09:45:00,605: used 140ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/addTask?source=%E4%BB%93%E5%BA%932&target=%E4%BB%93%E5%BA%931
[INFO]2021-03-18 09:45:02,031: task[6052b09ce73748e754a6f0ae]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 3, 18, 9, 45, 2, 19232), 'updateTime': datetime.datetime(2021, 3, 18, 9, 45, 2, 19232), 'status': 'running'}
[INFO]2021-03-18 09:45:02,083: task: start task[6052b09ce73748e754a6f0ae][-] AP140(LM137) -> AP139(LM133) [waiting]
[INFO]2021-03-18 09:45:02,120: task[6052b09ce73748e754a6f0ae] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 3, 18, 9, 45, 2, 106231)}
[DEBUG]2021-03-18 09:45:02,161: task[6052b09ce73748e754a6f0ae][-] AP140(LM137) -> AP139(LM133) [waitForAgv] waiting -> waitForAgv
[DEBUG]2021-03-18 09:45:03,495: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP140&mapId=famajia&taskId=6052b09ce73748e754a6f0ae&timeout=10 addr: 127.0.0.1
[INFO]2021-03-18 09:45:04,120: apply AGV01 ,taskId: 6052b09ce73748e754a6f0ae ,loc famajia.AP140 ,autoLock False , used 601 ms
[DEBUG]2021-03-18 09:45:04,143: used 648ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP140&mapId=famajia&taskId=6052b09ce73748e754a6f0ae&timeout=10
[DEBUG]2021-03-18 09:45:04,207: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV01&appName=scadaTask&taskId=6052b09ce73748e754a6f0ae addr: 127.0.0.1
[DEBUG]2021-03-18 09:45:04,244: lock:  AGV01 taskId 6052b09ce73748e754a6f0ae app scadaTask
[WARNING]2021-03-18 09:45:05,294: AGV01 clear task finish, cur= famajia.AP34 task_status= 0
[INFO]2021-03-18 09:45:05,354: task[6052b09ce73748e754a6f0ae][-] AP140(LM137) -> AP139(LM133) [waitForAgv] apply AGV01
[INFO]2021-03-18 09:45:05,400: task[6052b09ce73748e754a6f0ae] update info: {'agvId': 'AGV01', 'failMsg': '成功分配小车AGV01,检测顶升下降', 'updateTime': datetime.datetime(2021, 3, 18, 9, 45, 5, 395038)}
[DEBUG]2021-03-18 09:45:05,440: task[6052b09ce73748e754a6f0ae][AGV01] AP140(LM137) -> AP139(LM133) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-03-18 09:45:05,806: task[6052b09ce73748e754a6f0ae][AGV01] AP140(LM137) -> AP139(LM133) [initJackdown] _jackDown
[DEBUG]2021-03-18 09:45:05,835: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:45:05,890: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-18 09:45:05,920: _jack in jackMgr: AGV01 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-18 09:45:05,949: AGV01 jack down status:  1
[DEBUG]2021-03-18 09:45:05,985: used 96ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:45:06,032: [return] use 197 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[INFO]2021-03-18 09:45:06,110: task[6052b09ce73748e754a6f0ae] update info: {'failMsg': '前往仓库2工位点拉取货架', 'updateTime': datetime.datetime(2021, 3, 18, 9, 45, 6, 98178)}
[DEBUG]2021-03-18 09:45:06,151: task[6052b09ce73748e754a6f0ae][AGV01] AP140(LM137) -> AP139(LM133) [startMoveJackup] initJackdown -> startMoveJackup
[DEBUG]2021-03-18 09:45:06,530: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP140&location=AP140&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=6052b09ce73748e754a6f0ae_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True addr: 127.0.0.1
[CRITICAL]2021-03-18 09:45:06,547: invoke <function urlMove at 0x0000019545C71A60> cause a error: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01
pid=25008, ppid=12724, tid=17456
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\main_agv.py", line 123, in urlMove
    agvControl.move(target=target, agvId=agvId, taskId=taskId, timeout=timeout,paramObj=paramObj)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1241, in move
    _func()
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1207, in _func
    raise Exception(mapMgr.formatLoc(agv.mapId,agv.curTarget)+"->"+target+" 路径不存在1,agvId="+agv.agvId)
Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01

[CRITICAL]2021-03-18 09:45:06,568: taskFunc2:task[6052b09ce73748e754a6f0ae][AGV01] AP140(LM137) -> AP139(LM133) [startMoveJackup] cause a error: Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01
pid=25008, ppid=12724, tid=668
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 725, in _taskFunc
    elif not self.handle():
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 601, in handle
    self._moveJackup()
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 825, in _moveJackup
    agvApi.moveJackup(self.agvId, self.param["floorId"]+'.'+self.param["location"], self.onFinish, self.param, use_pgv=True,pgv_type=1)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 182, in moveJackup
    return move(agvId,loc,finishCallback,paramObj,stepCallback)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 170, in move
    _http_get(url + '/api/agv/move', paramObj)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 64, in _http_get
    raise Exception(result["errormsg"])
Exception: Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01

[WARNING]2021-03-18 09:45:06,586: task[6052b09ce73748e754a6f0ae]:  error {'failMsg': 'Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01', 'endTime': datetime.datetime(2021, 3, 18, 9, 45, 6, 578514), 'status': 'error'}
[INFO]2021-03-18 09:45:06,593: task[6052b09ce73748e754a6f0ae][AGV01] AP140(LM137) -> AP139(LM133) [startMoveJackup] AGV01 release task, release agv True True False
[DEBUG]2021-03-18 09:45:06,603: GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b09ce73748e754a6f0ae addr: 127.0.0.1
[DEBUG]2021-03-18 09:45:06,610: used 7ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b09ce73748e754a6f0ae
[DEBUG]2021-03-18 09:45:06,625: GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b09ce73748e754a6f0ae addr: 127.0.0.1
[DEBUG]2021-03-18 09:45:06,627: unlock: AGV01 taskId 6052b09ce73748e754a6f0ae app scadaTask force False
[DEBUG]2021-03-18 09:45:06,633: used 8ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b09ce73748e754a6f0ae
[INFO]2021-03-18 09:45:06,637: task[6052b09ce73748e754a6f0ae][AGV01] AP140(LM137) -> AP139(LM133) [startMoveJackup] let AGV01 gohome
[DEBUG]2021-03-18 09:45:06,641: GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800 addr: 127.0.0.1
[INFO]2021-03-18 09:45:06,643: AGV01 is in home loc famajia.AP34
[DEBUG]2021-03-18 09:45:06,644: used 2ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800
[INFO]2021-03-18 09:45:06,647: task: stop task[6052b09ce73748e754a6f0ae][-] AP140(LM137) -> AP139(LM133) [startMoveJackup]
[DEBUG]2021-03-18 09:45:08,165: task: delete task 6052b09ce73748e754a6f0ae
[DEBUG]2021-03-18 09:49:07,950: GET: http://192.168.252.83:5551/api/scada/addTask?source=%E4%BB%93%E5%BA%932&target=%E8%A3%85%E9%85%8D%E4%B8%80%E5%8C%BA addr: 192.168.252.94
[INFO]2021-03-18 09:49:30,369: Scada send a task to the server from 仓库2 to 装配一区 payloadId: None
[INFO]2021-03-18 09:49:30,429: create task[6052b1aae73748e754a6f0af]: type= scadaTask , 从仓库2运送货架到装配一区 {'source': '仓库2', 'target': '装配一区', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从仓库2运送货架到装配一区', 'createTime': datetime.datetime(2021, 3, 18, 9, 49, 30, 400263), 'updateTime': datetime.datetime(2021, 3, 18, 9, 49, 30, 400263), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('6052b1aae73748e754a6f0af')}
[INFO]2021-03-18 09:49:30,516: task[6052b1aae73748e754a6f0af][-] AP140(LM137) -> AP50(LM5) [waiting] is inside False
[INFO]2021-03-18 09:49:30,543: task cmd: got a task from scada task[6052b1aae73748e754a6f0af][-] AP140(LM137) -> AP50(LM5) [waiting]
[INFO]2021-03-18 09:49:30,942: task[6052b1aae73748e754a6f0af]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 3, 18, 9, 49, 30, 936840), 'updateTime': datetime.datetime(2021, 3, 18, 9, 49, 30, 936840), 'status': 'running'}
[INFO]2021-03-18 09:49:30,982: task: start task[6052b1aae73748e754a6f0af][-] AP140(LM137) -> AP50(LM5) [waiting]
[INFO]2021-03-18 09:49:31,022: task[6052b1aae73748e754a6f0af] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 3, 18, 9, 49, 31, 16638)}
[DEBUG]2021-03-18 09:49:31,052: task[6052b1aae73748e754a6f0af][-] AP140(LM137) -> AP50(LM5) [waitForAgv] waiting -> waitForAgv
[DEBUG]2021-03-18 09:49:32,424: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP140&mapId=famajia&taskId=6052b1aae73748e754a6f0af&timeout=10 addr: 127.0.0.1
[INFO]2021-03-18 09:49:33,040: apply AGV01 ,taskId: 6052b1aae73748e754a6f0af ,loc famajia.AP140 ,autoLock False , used 594 ms
[DEBUG]2021-03-18 09:49:33,076: used 652ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP140&mapId=famajia&taskId=6052b1aae73748e754a6f0af&timeout=10
[DEBUG]2021-03-18 09:49:33,182: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV01&appName=scadaTask&taskId=6052b1aae73748e754a6f0af addr: 127.0.0.1
[DEBUG]2021-03-18 09:49:33,200: lock:  AGV01 taskId 6052b1aae73748e754a6f0af app scadaTask
[WARNING]2021-03-18 09:49:34,220: AGV01 clear task finish, cur= famajia.AP34 task_status= 0
[DEBUG]2021-03-18 09:49:34,239: used 1057ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV01&appName=scadaTask&taskId=6052b1aae73748e754a6f0af
[INFO]2021-03-18 09:49:34,303: task[6052b1aae73748e754a6f0af][-] AP140(LM137) -> AP50(LM5) [waitForAgv] apply AGV01
[INFO]2021-03-18 09:49:34,352: task[6052b1aae73748e754a6f0af] update info: {'agvId': 'AGV01', 'failMsg': '成功分配小车AGV01,检测顶升下降', 'updateTime': datetime.datetime(2021, 3, 18, 9, 49, 34, 339428)}
[DEBUG]2021-03-18 09:49:34,387: task[6052b1aae73748e754a6f0af][AGV01] AP140(LM137) -> AP50(LM5) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-03-18 09:49:34,761: task[6052b1aae73748e754a6f0af][AGV01] AP140(LM137) -> AP50(LM5) [initJackdown] _jackDown
[DEBUG]2021-03-18 09:49:34,779: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:49:34,893: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-18 09:49:34,928: _jack in jackMgr: AGV01 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-18 09:49:34,956: AGV01 jack down status:  1
[DEBUG]2021-03-18 09:49:35,003: used 110ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:49:35,051: [return] use 272 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[INFO]2021-03-18 09:49:35,094: task[6052b1aae73748e754a6f0af] update info: {'failMsg': '前往仓库2工位点拉取货架', 'updateTime': datetime.datetime(2021, 3, 18, 9, 49, 35, 70958)}
[DEBUG]2021-03-18 09:49:35,130: task[6052b1aae73748e754a6f0af][AGV01] AP140(LM137) -> AP50(LM5) [startMoveJackup] initJackdown -> startMoveJackup
[DEBUG]2021-03-18 09:49:35,486: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP140&location=AP140&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=6052b1aae73748e754a6f0af_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True addr: 127.0.0.1
[CRITICAL]2021-03-18 09:49:35,498: invoke <function urlMove at 0x0000019545C71A60> cause a error: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01
pid=25008, ppid=12724, tid=7348
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\main_agv.py", line 123, in urlMove
    agvControl.move(target=target, agvId=agvId, taskId=taskId, timeout=timeout,paramObj=paramObj)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1241, in move
    _func()
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\agvCtrl\agvControl.py", line 1207, in _func
    raise Exception(mapMgr.formatLoc(agv.mapId,agv.curTarget)+"->"+target+" 路径不存在1,agvId="+agv.agvId)
Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01

[DEBUG]2021-03-18 09:49:35,504: used 18ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP140&location=AP140&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=6052b1aae73748e754a6f0af_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True
[CRITICAL]2021-03-18 09:49:35,513: taskFunc2:task[6052b1aae73748e754a6f0af][AGV01] AP140(LM137) -> AP50(LM5) [startMoveJackup] cause a error: Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01
pid=25008, ppid=12724, tid=17008
Traceback (most recent call last):
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 725, in _taskFunc
    elif not self.handle():
  File "D:\python_work\AKMfloor\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 601, in handle
    self._moveJackup()
  File "D:\python_work\AKMfloor\pharmapackCtrl\runTasks.py", line 825, in _moveJackup
    agvApi.moveJackup(self.agvId, self.param["floorId"]+'.'+self.param["location"], self.onFinish, self.param, use_pgv=True,pgv_type=1)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 182, in moveJackup
    return move(agvId,loc,finishCallback,paramObj,stepCallback)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 170, in move
    _http_get(url + '/api/agv/move', paramObj)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 64, in _http_get
    raise Exception(result["errormsg"])
Exception: Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01

[WARNING]2021-03-18 09:49:35,526: task[6052b1aae73748e754a6f0af]:  error {'failMsg': 'Exception: famajia.AP34->famajia.AP140 路径不存在1,agvId=AGV01', 'endTime': datetime.datetime(2021, 3, 18, 9, 49, 35, 525251), 'status': 'error'}
[INFO]2021-03-18 09:49:35,527: task[6052b1aae73748e754a6f0af][AGV01] AP140(LM137) -> AP50(LM5) [startMoveJackup] AGV01 release task, release agv True True False
[DEBUG]2021-03-18 09:49:35,541: GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b1aae73748e754a6f0af addr: 127.0.0.1
[DEBUG]2021-03-18 09:49:35,543: used 2ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b1aae73748e754a6f0af
[DEBUG]2021-03-18 09:49:35,558: GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b1aae73748e754a6f0af addr: 127.0.0.1
[DEBUG]2021-03-18 09:49:35,561: unlock: AGV01 taskId 6052b1aae73748e754a6f0af app scadaTask force False
[DEBUG]2021-03-18 09:49:35,566: used 8ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b1aae73748e754a6f0af
[INFO]2021-03-18 09:49:35,570: task[6052b1aae73748e754a6f0af][AGV01] AP140(LM137) -> AP50(LM5) [startMoveJackup] let AGV01 gohome
[DEBUG]2021-03-18 09:49:35,575: GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800 addr: 127.0.0.1
[INFO]2021-03-18 09:49:35,579: AGV01 is in home loc famajia.AP34
[DEBUG]2021-03-18 09:49:35,587: used 12ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800
[INFO]2021-03-18 09:49:35,594: task: stop task[6052b1aae73748e754a6f0af][-] AP140(LM137) -> AP50(LM5) [startMoveJackup]
[DEBUG]2021-03-18 09:49:37,093: task: delete task 6052b1aae73748e754a6f0af
[DEBUG]2021-03-18 09:50:27,894: GET: http://192.168.252.83:5551/api/scada/addTask?source=%E8%B4%A8%E6%A3%80%E5%8C%BA&target=%E8%A3%85%E9%85%8D%E4%B8%80%E5%8C%BA addr: 192.168.252.94
[INFO]2021-03-18 09:50:27,928: Scada send a task to the server from 质检区 to 装配一区 payloadId: None
[INFO]2021-03-18 09:50:27,968: create task[6052b1e3e73748e754a6f0b0]: type= scadaTask , 从质检区运送货架到装配一区 {'source': '质检区', 'target': '装配一区', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从质检区运送货架到装配一区', 'createTime': datetime.datetime(2021, 3, 18, 9, 50, 27, 963275), 'updateTime': datetime.datetime(2021, 3, 18, 9, 50, 27, 963275), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('6052b1e3e73748e754a6f0b0')}
[INFO]2021-03-18 09:50:28,031: task[6052b1e3e73748e754a6f0b0][-] AP90(LM89) -> AP50(LM5) [waiting] is inside False
[INFO]2021-03-18 09:50:28,047: task cmd: got a task from scada task[6052b1e3e73748e754a6f0b0][-] AP90(LM89) -> AP50(LM5) [waiting]
[INFO]2021-03-18 09:50:29,899: task[6052b1e3e73748e754a6f0b0]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 3, 18, 9, 50, 29, 887693), 'updateTime': datetime.datetime(2021, 3, 18, 9, 50, 29, 887693), 'status': 'running'}
[INFO]2021-03-18 09:50:29,972: task: start task[6052b1e3e73748e754a6f0b0][-] AP90(LM89) -> AP50(LM5) [waiting]
[INFO]2021-03-18 09:50:29,998: task[6052b1e3e73748e754a6f0b0] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 3, 18, 9, 50, 29, 992510)}
[DEBUG]2021-03-18 09:50:30,032: task[6052b1e3e73748e754a6f0b0][-] AP90(LM89) -> AP50(LM5) [waitForAgv] waiting -> waitForAgv
[DEBUG]2021-03-18 09:50:31,368: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP90&mapId=famajia&taskId=6052b1e3e73748e754a6f0b0&timeout=10 addr: 127.0.0.1
[INFO]2021-03-18 09:50:31,936: apply AGV01 ,taskId: 6052b1e3e73748e754a6f0b0 ,loc famajia.AP90 ,autoLock False , used 546 ms
[DEBUG]2021-03-18 09:50:31,964: used 596ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP90&mapId=famajia&taskId=6052b1e3e73748e754a6f0b0&timeout=10
[DEBUG]2021-03-18 09:50:32,067: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV01&appName=scadaTask&taskId=6052b1e3e73748e754a6f0b0 addr: 127.0.0.1
[DEBUG]2021-03-18 09:50:32,095: lock:  AGV01 taskId 6052b1e3e73748e754a6f0b0 app scadaTask
[WARNING]2021-03-18 09:50:33,124: AGV01 clear task finish, cur= famajia.AP34 task_status= 0
[DEBUG]2021-03-18 09:50:33,151: used 1084ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV01&appName=scadaTask&taskId=6052b1e3e73748e754a6f0b0
[INFO]2021-03-18 09:50:33,201: task[6052b1e3e73748e754a6f0b0][-] AP90(LM89) -> AP50(LM5) [waitForAgv] apply AGV01
[INFO]2021-03-18 09:50:33,220: task[6052b1e3e73748e754a6f0b0] update info: {'agvId': 'AGV01', 'failMsg': '成功分配小车AGV01,检测顶升下降', 'updateTime': datetime.datetime(2021, 3, 18, 9, 50, 33, 219931)}
[DEBUG]2021-03-18 09:50:33,246: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-03-18 09:50:33,625: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [initJackdown] _jackDown
[DEBUG]2021-03-18 09:50:33,649: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:50:33,688: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-18 09:50:33,712: _jack in jackMgr: AGV01 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-18 09:50:33,737: AGV01 jack down status:  1
[DEBUG]2021-03-18 09:50:33,767: used 79ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:50:33,809: [return] use 160 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[INFO]2021-03-18 09:50:33,849: task[6052b1e3e73748e754a6f0b0] update info: {'failMsg': '前往质检区工位点拉取货架', 'updateTime': datetime.datetime(2021, 3, 18, 9, 50, 33, 844918)}
[DEBUG]2021-03-18 09:50:33,872: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [startMoveJackup] initJackdown -> startMoveJackup
[DEBUG]2021-03-18 09:50:34,242: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP90&location=AP90&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=6052b1e3e73748e754a6f0b0_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True addr: 127.0.0.1
[INFO]2021-03-18 09:50:34,253: Begin: AGV01 move from famajia.AP34 to famajia.AP90 by paths: [('famajia', ['AP34', 'LM39', 'LM38', 'LM37', 'LM120', 'LM87', 'LM30', 'LM91', 'LM94', 'LM89', 'AP90'], 34.94599999999999)] task: 6052b1e3e73748e754a6f0b0_2 timeout 86400 used 9 ms
[DEBUG]2021-03-18 09:50:34,255: used 13ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP90&location=AP90&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=6052b1e3e73748e754a6f0b0_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True
[DEBUG]2021-03-18 09:50:34,257: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [loadPlayload] startMoveJackup -> loadPlayload
[DEBUG]2021-03-18 09:50:35,259: agvInfo: AGV01 famajia.AP34 move to famajia.LM39 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:50:38,285: AGV01 turn to wait check cur AP34 next LM38 0.724 False
[DEBUG]2021-03-18 09:50:38,816: agvInfo: AGV01 famajia.AP34 move to famajia.LM38 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:50:38,855: AGV01 set loc famajia.LM39 ,old AP34 (17.89,1.70)
[DEBUG]2021-03-18 09:50:39,333: AGV01 choise next pos cur LM39 next LM37 pre LM38 2.800 True
[DEBUG]2021-03-18 09:50:39,342: AGV01 choise next pos cur LM39 next LM120 pre LM37 4.899 True
[DEBUG]2021-03-18 09:50:39,346: AGV01 choise next pos cur LM39 next LM87 pre LM120 16.728 True
[DEBUG]2021-03-18 09:50:39,351: AGV01 turn to wait check cur LM39 next LM87 16.728 True
[DEBUG]2021-03-18 09:50:39,886: agvInfo: AGV01 famajia.LM39 move to famajia.LM87 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:50:41,368: AGV01 set loc famajia.LM38 ,old LM39 (16.49,1.70)
[DEBUG]2021-03-18 09:50:42,895: AGV01 set loc famajia.LM37 ,old LM38 (14.99,1.70)
[DEBUG]2021-03-18 09:50:44,910: AGV01 set loc famajia.LM120 ,old LM37 (12.94,1.70)
[DEBUG]2021-03-18 09:50:46,933: AGV01 choise next pos cur LM120 next LM30 pre LM87 11.747 True
[DEBUG]2021-03-18 09:50:46,940: AGV01 turn to wait check cur LM120 next LM30 11.747 True
[DEBUG]2021-03-18 09:50:47,531: agvInfo: AGV01 famajia.LM120 move to famajia.LM30 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:50:49,051: AGV01 choise next pos cur LM120 next LM91 pre LM30 11.689 True
[DEBUG]2021-03-18 09:50:49,057: AGV01 turn to wait check cur LM120 next LM91 11.689 True
[DEBUG]2021-03-18 09:50:49,642: agvInfo: AGV01 famajia.LM120 move to famajia.LM91 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:50:51,162: AGV01 choise next pos cur LM120 next LM94 pre LM91 16.937 True
[DEBUG]2021-03-18 09:50:51,170: AGV01 turn to wait check cur LM120 next LM94 16.937 True
[DEBUG]2021-03-18 09:50:51,748: agvInfo: AGV01 famajia.LM120 move to famajia.LM94 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:50:56,971: AGV01 set loc famajia.LM87 ,old LM120 (1.17,1.70)
[DEBUG]2021-03-18 09:50:58,800: AGV01 choise next pos cur LM87 next LM89 pre LM94 12.377 False
[DEBUG]2021-03-18 09:50:58,803: AGV01 turn to wait check cur LM87 next LM89 12.377 False
[DEBUG]2021-03-18 09:50:58,988: AGV01 set loc famajia.LM30 ,old LM87 (-0.91,1.70)
[DEBUG]2021-03-18 09:50:59,376: agvInfo: AGV01 famajia.LM30 move to famajia.LM89 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:51:08,035: AGV01 set loc famajia.LM94 ,old LM30 (-9.81,1.70)
[DEBUG]2021-03-18 09:51:10,452: AGV01 turn to wait check cur LM94 next AP90 0.971 False
[DEBUG]2021-03-18 09:51:11,006: agvInfo: AGV01 famajia.LM94 move jackup to famajia.AP90 ,taskId 6052b1e3e73748e754a6f0b0_2
[DEBUG]2021-03-18 09:51:11,052: AGV01 set loc famajia.LM89 ,old LM94 (-12.77,1.70)
[WARNING]2021-03-18 09:51:13,528: AGV01 waitFinish: loc is diff LM89 AP90 task_status= 2
[WARNING]2021-03-18 09:51:14,032: AGV01 waitFinish: loc is diff LM89 AP90 task_status= 2
[WARNING]2021-03-18 09:51:14,537: AGV01 waitFinish: loc is diff LM89 AP90 task_status= 2
[DEBUG]2021-03-18 09:51:14,574: AGV01 set loc famajia.AP90 ,old LM89 (-12.77,3.71)
[SUCC]2021-03-18 09:51:16,061: Finish:  AGV01 arrived famajia.AP90 ,task: 6052b1e3e73748e754a6f0b0_2
[INFO]2021-03-18 09:51:16,291: task: move finish callback task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [loadPlayload]
[INFO]2021-03-18 09:51:16,305: task[6052b1e3e73748e754a6f0b0] update info: {'failMsg': 'AGV顶升', 'updateTime': datetime.datetime(2021, 3, 18, 9, 51, 16, 302120)}
[DEBUG]2021-03-18 09:51:16,528: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [loadPlayload_jackup] loadPlayload_readqr -> loadPlayload_jackup
[INFO]2021-03-18 09:51:16,843: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [loadPlayload_jackup] _jackUp
[DEBUG]2021-03-18 09:51:16,867: send http_get: http://127.0.0.1:5551/api/agv/jackup?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:51:16,949: GET: http://127.0.0.1:5551/api/agv/jackup?agv=AGV01&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-18 09:51:16,972: _jack in jackMgr: AGV01 up [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-18 09:51:17,002: AGV01 jack up status:  1
[DEBUG]2021-03-18 09:51:17,032: used 83ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackup?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:51:17,074: [return] use 207 ms,http_get: http://127.0.0.1:5551/api/agv/jackup?agv=AGV01&loc=None&timeoutSec=90
[INFO]2021-03-18 09:51:17,110: task[6052b1e3e73748e754a6f0b0] update info: {'failMsg': '等待装配一区工位点锁', 'updateTime': datetime.datetime(2021, 3, 18, 9, 51, 17, 104644)}
[DEBUG]2021-03-18 09:51:17,137: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [waitDestPreLoc] loadPlayload_jackup -> waitDestPreLoc
[INFO]2021-03-18 09:51:17,504: task: prepoint locked  6052b1e3e73748e754a6f0b0 famajia.AP50
[INFO]2021-03-18 09:51:17,520: task[6052b1e3e73748e754a6f0b0] update info: {'failMsg': '前往AP50工位点放下货架', 'updateTime': datetime.datetime(2021, 3, 18, 9, 51, 17, 515032)}
[DEBUG]2021-03-18 09:51:17,550: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [dropPayloadMove] waitDestPreLoc -> dropPayloadMove
[DEBUG]2021-03-18 09:51:17,911: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV01&agvId=AGV01&appName=scadaTask&direction=None&floorId=famajia&isRotate&loc=famajia.AP50&location=AP50&p_direction=0.0&pgv_type=1&recognize=False&result=True&resultDesc=None&seer_jackup=JackUnload&taskId=6052b1e3e73748e754a6f0b0_4&taskType=scadaTask&timeoutSec=86400&use_pgv=True addr: 127.0.0.1
[INFO]2021-03-18 09:51:17,932: Begin: AGV01 move from famajia.AP90 to famajia.AP50 by paths: [('famajia', ['AP90', 'LM89', 'LM94', 'LM91', 'LM30', 'LM87', 'LM120', 'LM37', 'LM38', 'LM39', 'LM40', 'LM41', 'LM47', 'LM83', 'LM122', 'LM84', 'LM85', 'LM4', 'LM107', 'LM5', 'AP50'], 83.44699999999999)] task: 6052b1e3e73748e754a6f0b0_4 timeout 86400 used 10 ms
[INFO]2021-03-18 09:51:17,935: task[6052b1e3e73748e754a6f0b0] update info: {'step': 'dropPayload', 'updateTime': datetime.datetime(2021, 3, 18, 9, 51, 17, 934040)}
[DEBUG]2021-03-18 09:51:17,936: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [dropPayload] dropPayloadMove -> dropPayload
[DEBUG]2021-03-18 09:51:18,623: agvInfo: AGV01 famajia.AP90 move to famajia.LM89 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:20,647: AGV01 turn to wait check cur AP90 next LM94 0.903 False
[DEBUG]2021-03-18 09:51:21,207: agvInfo: AGV01 famajia.AP90 move to famajia.LM94 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:21,624: AGV01 set loc famajia.LM89 ,old AP90 (-12.77,1.70)
[DEBUG]2021-03-18 09:51:21,723: AGV01 choise next pos cur LM89 next LM91 pre LM94 10.065 True
[DEBUG]2021-03-18 09:51:21,739: AGV01 turn to wait check cur LM89 next LM91 10.065 True
[DEBUG]2021-03-18 09:51:22,310: agvInfo: AGV01 famajia.LM89 move to famajia.LM91 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:23,316: AGV01 choise next pos cur LM89 next LM30 pre LM91 11.758 True
[DEBUG]2021-03-18 09:51:23,321: AGV01 turn to wait check cur LM89 next LM30 11.758 True
[DEBUG]2021-03-18 09:51:23,873: agvInfo: AGV01 famajia.LM89 move to famajia.LM30 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:25,387: AGV01 choise next pos cur LM89 next LM87 pre LM30 11.737 True
[DEBUG]2021-03-18 09:51:25,400: AGV01 turn to wait check cur LM89 next LM87 11.737 True
[DEBUG]2021-03-18 09:51:25,656: AGV01 set loc famajia.LM94 ,old LM89 (-10.06,1.70)
[DEBUG]2021-03-18 09:51:25,951: agvInfo: AGV01 famajia.LM94 move to famajia.LM87 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:27,462: AGV01 choise next pos cur LM94 next LM120 pre LM87 21.551 True
[DEBUG]2021-03-18 09:51:27,465: AGV01 turn to wait check cur LM94 next LM120 21.551 True
[DEBUG]2021-03-18 09:51:28,018: agvInfo: AGV01 famajia.LM94 move to famajia.LM120 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:33,237: AGV01 set loc famajia.LM91 ,old LM94 (-2.65,1.70)
[DEBUG]2021-03-18 09:51:39,601: AGV01 choise next pos cur LM91 next LM37 pre LM120 11.723 True
[DEBUG]2021-03-18 09:51:39,604: AGV01 turn to wait check cur LM91 next LM37 11.723 True
[DEBUG]2021-03-18 09:51:40,173: agvInfo: AGV01 famajia.LM91 move to famajia.LM37 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:41,689: AGV01 choise next pos cur LM91 next LM38 pre LM37 11.168 True
[DEBUG]2021-03-18 09:51:41,701: AGV01 turn to wait check cur LM91 next LM38 11.168 True
[DEBUG]2021-03-18 09:51:42,303: agvInfo: AGV01 famajia.LM91 move to famajia.LM38 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:42,807: AGV01 choise next pos cur LM91 next LM39 pre LM38 11.064 True
[DEBUG]2021-03-18 09:51:42,809: AGV01 turn to wait check cur LM91 next LM39 11.064 True
[DEBUG]2021-03-18 09:51:43,371: agvInfo: AGV01 famajia.LM91 move to famajia.LM39 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:44,383: AGV01 choise next pos cur LM91 next LM40 pre LM39 10.960 True
[DEBUG]2021-03-18 09:51:44,390: AGV01 turn to wait check cur LM91 next LM40 10.960 True
[DEBUG]2021-03-18 09:51:44,972: agvInfo: AGV01 famajia.LM91 move to famajia.LM40 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:45,987: AGV01 choise next pos cur LM91 next LM41 pre LM40 10.907 True
[DEBUG]2021-03-18 09:51:45,998: AGV01 turn to wait check cur LM91 next LM41 10.907 True
[DEBUG]2021-03-18 09:51:46,581: agvInfo: AGV01 famajia.LM91 move to famajia.LM41 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:47,091: AGV01 choise next pos cur LM91 next LM47 pre LM41 12.688 False
[DEBUG]2021-03-18 09:51:47,100: AGV01 turn to wait check cur LM91 next LM47 12.688 False
[DEBUG]2021-03-18 09:51:47,694: agvInfo: AGV01 famajia.LM91 move to famajia.LM47 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:51:51,340: AGV01 set loc famajia.LM37 ,old LM91 (15.24,1.70)
[DEBUG]2021-03-18 09:51:53,866: AGV01 set loc famajia.LM39 ,old LM37 (17.84,1.70)
[DEBUG]2021-03-18 09:51:55,383: AGV01 set loc famajia.LM40 ,old LM39 (19.29,1.70)
[DEBUG]2021-03-18 09:51:56,897: AGV01 set loc famajia.LM41 ,old LM40 (20.85,1.70)
[DEBUG]2021-03-18 09:51:59,285: AGV01 turn to wait check cur LM41 next LM83 0.567 False
[DEBUG]2021-03-18 09:51:59,420: AGV01 set loc famajia.LM47 ,old LM41 (23.43,1.70)
[DEBUG]2021-03-18 09:51:59,835: agvInfo: AGV01 famajia.LM47 move to famajia.LM83 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:52:02,348: AGV01 turn to wait check cur LM47 next LM122 0.725 False
[DEBUG]2021-03-18 09:52:02,899: agvInfo: AGV01 famajia.LM47 move to famajia.LM122 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:52:02,942: AGV01 set loc famajia.LM83 ,old LM47 (23.48,3.46)
[DEBUG]2021-03-18 09:52:03,406: AGV01 choise next pos cur LM83 next LM84 pre LM122 8.772 True
[DEBUG]2021-03-18 09:52:03,414: AGV01 choise next pos cur LM83 next LM85 pre LM84 10.595 False
[DEBUG]2021-03-18 09:52:03,415: AGV01 turn to wait check cur LM83 next LM85 10.595 False
[DEBUG]2021-03-18 09:52:03,975: agvInfo: AGV01 famajia.LM83 move to famajia.LM85 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:52:14,008: AGV01 set loc famajia.LM84 ,old LM83 (32.25,3.46)
[DEBUG]2021-03-18 09:52:15,051: AGV01 turn to wait check cur LM84 next LM4 0.810 False
[DEBUG]2021-03-18 09:52:15,614: agvInfo: AGV01 famajia.LM84 move to famajia.LM4 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:52:16,028: AGV01 set loc famajia.LM85 ,old LM84 (34.07,3.46)
[DEBUG]2021-03-18 09:52:21,659: AGV01 turn to wait check cur LM85 next LM107 0.762 False
[DEBUG]2021-03-18 09:52:22,214: agvInfo: AGV01 famajia.LM85 move to famajia.LM107 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:52:22,563: AGV01 set loc famajia.LM4 ,old LM85 (34.07,9.46)
[DEBUG]2021-03-18 09:52:35,344: AGV01 choise next pos cur LM4 next LM5 pre LM107 12.622 False
[DEBUG]2021-03-18 09:52:35,350: AGV01 turn to wait check cur LM4 next LM5 12.622 False
[DEBUG]2021-03-18 09:52:35,927: agvInfo: AGV01 famajia.LM4 move to famajia.LM5 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:52:45,211: AGV01 set loc famajia.LM107 ,old LM4 (55.09,9.45)
[DEBUG]2021-03-18 09:52:47,548: AGV01 turn to wait check cur LM107 next AP50 0.812 False
[DEBUG]2021-03-18 09:52:48,124: agvInfo: AGV01 famajia.LM107 move jackdown to famajia.AP50 ,taskId 6052b1e3e73748e754a6f0b0_4
[DEBUG]2021-03-18 09:52:48,230: AGV01 set loc famajia.LM5 ,old LM107 (57.88,9.46)
[WARNING]2021-03-18 09:52:50,649: AGV01 waitFinish: loc is diff LM5 AP50 task_status= 2
[WARNING]2021-03-18 09:52:51,154: AGV01 waitFinish: loc is diff LM5 AP50 task_status= 2
[WARNING]2021-03-18 09:52:51,663: AGV01 waitFinish: loc is diff LM5 AP50 task_status= 2
[WARNING]2021-03-18 09:52:52,171: AGV01 waitFinish: loc is diff LM5 AP50 task_status= 2
[WARNING]2021-03-18 09:52:52,678: AGV01 waitFinish: loc is diff LM5 AP50 task_status= 2
[DEBUG]2021-03-18 09:52:52,759: AGV01 set loc famajia.AP50 ,old LM5 (57.88,6.42)
[SUCC]2021-03-18 09:52:54,193: Finish:  AGV01 arrived famajia.AP50 ,task: 6052b1e3e73748e754a6f0b0_4
[INFO]2021-03-18 09:52:54,495: task: move finish callback task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [dropPayload]
[INFO]2021-03-18 09:52:54,508: task[6052b1e3e73748e754a6f0b0] update info: {'failMsg': '放下货架，旋转顶升机构初始化', 'updateTime': datetime.datetime(2021, 3, 18, 9, 52, 54, 503663)}
[INFO]2021-03-18 09:52:54,754: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [dropPayloadJackdown] _jackDown
[DEBUG]2021-03-18 09:52:54,757: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:52:54,771: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-18 09:52:54,773: _jack in jackMgr: AGV01 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-18 09:52:54,774: AGV01 jack down status:  1
[DEBUG]2021-03-18 09:52:54,775: used 3ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:52:54,777: [return] use 20 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV01&loc=None&timeoutSec=90
[DEBUG]2021-03-18 09:52:54,778: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [dropPayloadReset] dropPayloadJackdown -> dropPayloadReset
[INFO]2021-03-18 09:52:55,088: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [dropPayloadReset] rotationClear
[DEBUG]2021-03-18 09:52:55,123: send http_get: http://127.0.0.1:5551/api/agv/rotationclear?agv=AGV01&timeoutSec=30
[DEBUG]2021-03-18 09:52:55,207: GET: http://127.0.0.1:5551/api/agv/rotationclear?agv=AGV01&timeoutSec=30 addr: 127.0.0.1
[INFO]2021-03-18 09:52:56,244: _rotation in rotationMgr: AGV01 None [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-18 09:52:56,324: AGV01 rotation clear status: 1
[DEBUG]2021-03-18 09:52:56,353: [return] use 1230 ms,http_get: http://127.0.0.1:5551/api/agv/rotationclear?agv=AGV01&timeoutSec=30
[INFO]2021-03-18 09:52:56,401: task[6052b1e3e73748e754a6f0b0]:  successed {'step': 'finish', 'failMsg': '任务成功', 'endTime': datetime.datetime(2021, 3, 18, 9, 52, 56, 382778), 'status': 'success'}
[DEBUG]2021-03-18 09:52:56,430: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [finish] dropPayloadReset -> finish
[INFO]2021-03-18 09:52:56,824: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [finish] AGV01 release task, release agv True True False
[DEBUG]2021-03-18 09:52:56,912: GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b1e3e73748e754a6f0b0 addr: 127.0.0.1
[DEBUG]2021-03-18 09:52:56,953: used 29ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV01&appName=scadaTask&taskId=6052b1e3e73748e754a6f0b0
[DEBUG]2021-03-18 09:52:57,104: GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b1e3e73748e754a6f0b0 addr: 127.0.0.1
[DEBUG]2021-03-18 09:52:57,142: unlock: AGV01 taskId 6052b1e3e73748e754a6f0b0 app scadaTask force False
[DEBUG]2021-03-18 09:52:57,166: used 62ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/release?agv=AGV01&appName=scadaTask&force=False&taskId=6052b1e3e73748e754a6f0b0
[INFO]2021-03-18 09:52:57,226: task[6052b1e3e73748e754a6f0b0][AGV01] AP90(LM89) -> AP50(LM5) [finish] let AGV01 gohome
[DEBUG]2021-03-18 09:52:57,326: GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800 addr: 127.0.0.1
[INFO]2021-03-18 09:52:57,378: AGV01 gohome home_1 force False taskId home_1 : AGV01.AP50 -> famajia.AP34
[INFO]2021-03-18 09:52:58,038: Begin: AGV01 move from famajia.AP50 to famajia.AP34 by paths: [('famajia', ['AP50', 'LM5', 'LM107', 'LM4', 'LM85', 'LM84', 'LM122', 'LM123', 'LM47', 'LM41', 'LM40', 'LM39', 'AP34'], 53.05299999999998)] task: home_1 timeout 10800 used 637 ms
[DEBUG]2021-03-18 09:52:58,064: used 738ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV01&appName=scadaTask&force=False&timeout=10800
[INFO]2021-03-18 09:52:58,121: task: prepoint released2  6052b1e3e73748e754a6f0b0 famajia.AP50
[INFO]2021-03-18 09:52:58,134: task: stop task[6052b1e3e73748e754a6f0b0][-] AP90(LM89) -> AP50(LM5) [finish]
[DEBUG]2021-03-18 09:52:58,758: task: delete task 6052b1e3e73748e754a6f0b0
[DEBUG]2021-03-18 09:52:59,597: agvInfo: AGV01 famajia.AP50 move to famajia.LM5 ,taskId home_1
[DEBUG]2021-03-18 09:53:03,671: AGV01 turn to wait check cur AP50 next LM107 0.506 False
[DEBUG]2021-03-18 09:53:03,855: AGV01 set loc famajia.LM5 ,old AP50 (57.88,9.40)
[DEBUG]2021-03-18 09:53:05,038: agvInfo: AGV01 famajia.LM5 move to famajia.LM107 ,taskId home_1
[DEBUG]2021-03-18 09:53:05,574: AGV01 choise next pos cur LM5 next LM4 pre LM107 23.809 False
[DEBUG]2021-03-18 09:53:05,599: AGV01 turn to wait check cur LM5 next LM4 23.809 False
[DEBUG]2021-03-18 09:53:06,888: agvInfo: AGV01 famajia.LM5 move to famajia.LM4 ,taskId home_1
[DEBUG]2021-03-18 09:53:09,428: AGV01 set loc famajia.LM107 ,old LM5 (55.19,9.46)
[DEBUG]2021-03-18 09:53:32,146: AGV01 turn to wait check cur LM107 next LM85 0.502 False
[DEBUG]2021-03-18 09:53:32,210: AGV01 set loc famajia.LM4 ,old LM107 (34.12,9.45)
[DEBUG]2021-03-18 09:53:33,350: agvInfo: AGV01 famajia.LM4 move to famajia.LM85 ,taskId home_1
[DEBUG]2021-03-18 09:53:40,464: AGV01 turn to wait check cur LM4 next LM84 0.813 False
[DEBUG]2021-03-18 09:53:41,306: AGV01 set loc famajia.LM85 ,old LM4 (34.07,3.46)
[DEBUG]2021-03-18 09:53:41,990: agvInfo: AGV01 famajia.LM85 move to famajia.LM84 ,taskId home_1
[DEBUG]2021-03-18 09:53:42,559: AGV01 choise next pos cur LM85 next LM122 pre LM84 4.047 False
[DEBUG]2021-03-18 09:53:42,595: AGV01 turn to wait check cur LM85 next LM122 4.047 False
[DEBUG]2021-03-18 09:53:43,980: agvInfo: AGV01 famajia.LM85 move to famajia.LM122 ,taskId home_1
[DEBUG]2021-03-18 09:53:44,877: AGV01 set loc famajia.LM84 ,old LM85 (32.10,3.46)
[DEBUG]2021-03-18 09:53:45,309: GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b1aae73748e754a6f0af addr: 192.168.252.94
[WARNING]2021-03-18 09:53:45,327: task cmd: switch to pda mode 6052b1aae73748e754a6f0af
[DEBUG]2021-03-18 09:53:45,409: used 100ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b1aae73748e754a6f0af
[DEBUG]2021-03-18 09:53:46,543: AGV01 turn to wait check cur LM84 next LM123 0.657 False
[DEBUG]2021-03-18 09:53:46,926: AGV01 set loc famajia.LM122 ,old LM84 (30.18,3.46)
[DEBUG]2021-03-18 09:53:47,961: agvInfo: AGV01 famajia.LM122 move to famajia.LM123 ,taskId home_1
[DEBUG]2021-03-18 09:53:49,209: GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b1aae73748e754a6f0af addr: 192.168.252.94
[WARNING]2021-03-18 09:53:49,280: task cmd: switch to pda mode 6052b1aae73748e754a6f0af
[DEBUG]2021-03-18 09:53:49,308: used 99ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b1aae73748e754a6f0af
[DEBUG]2021-03-18 09:53:49,510: AGV01 turn to wait check cur LM122 next LM47 0.984 False
[DEBUG]2021-03-18 09:53:50,500: AGV01 set loc famajia.LM123 ,old LM122 (30.03,1.70)
[DEBUG]2021-03-18 09:53:50,927: agvInfo: AGV01 famajia.LM123 move to famajia.LM47 ,taskId home_1
[DEBUG]2021-03-18 09:53:51,287: GET: http://192.168.252.83:5551/api/scada/fail?taskId=6052b1aae73748e754a6f0af&agvId=AGV01&appName=FP-PAD-670d3 addr: 192.168.252.94
[WARNING]2021-03-18 09:53:51,306: task cmd: fail task 6052b1aae73748e754a6f0af
[WARNING]2021-03-18 09:53:51,342: task[6052b1aae73748e754a6f0af]: failed, {'failMsg': 'task fail by PDA', 'endTime': datetime.datetime(2021, 3, 18, 9, 53, 51, 332304), 'status': 'fail'}
[DEBUG]2021-03-18 09:53:51,364: used 1ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/fail?taskId=6052b1aae73748e754a6f0af&agvId=AGV01&appName=FP-PAD-670d3
[DEBUG]2021-03-18 09:53:51,463: AGV01 choise next pos cur LM123 next LM41 pre LM47 9.332 True
[DEBUG]2021-03-18 09:53:51,492: AGV01 choise next pos cur LM123 next LM40 pre LM41 10.732 True
[DEBUG]2021-03-18 09:53:51,512: AGV01 turn to wait check cur LM123 next LM40 10.732 True
[DEBUG]2021-03-18 09:53:52,945: agvInfo: AGV01 famajia.LM123 move to famajia.LM40 ,taskId home_1
[DEBUG]2021-03-18 09:53:53,476: AGV01 choise next pos cur LM123 next LM39 pre LM40 11.225 False
[DEBUG]2021-03-18 09:53:53,518: AGV01 turn to wait check cur LM123 next LM39 11.225 False
[DEBUG]2021-03-18 09:53:54,953: agvInfo: AGV01 famajia.LM123 move to famajia.LM39 ,taskId home_1
[DEBUG]2021-03-18 09:53:55,691: GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b09ce73748e754a6f0ae addr: 192.168.252.94
[WARNING]2021-03-18 09:53:55,721: task cmd: switch to pda mode 6052b09ce73748e754a6f0ae
[DEBUG]2021-03-18 09:53:55,750: used 59ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b09ce73748e754a6f0ae
[DEBUG]2021-03-18 09:53:59,107: AGV01 set loc famajia.LM47 ,old LM123 (23.58,1.70)
[DEBUG]2021-03-18 09:53:59,235: GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b039e73748e754a6f0ad addr: 192.168.252.94
[WARNING]2021-03-18 09:53:59,265: task cmd: switch to pda mode 6052b039e73748e754a6f0ad
[DEBUG]2021-03-18 09:53:59,309: used 74ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/cancelTask?agv=AGV01&appName=FP-PAD-670d3&taskId=6052b039e73748e754a6f0ad
[DEBUG]2021-03-18 09:53:59,962: GET: http://192.168.252.83:5551/api/scada/fail?taskId=6052b039e73748e754a6f0ad&agvId=AGV01&appName=FP-PAD-670d3 addr: 192.168.252.94
[WARNING]2021-03-18 09:53:59,995: task cmd: fail task 6052b039e73748e754a6f0ad
[WARNING]2021-03-18 09:54:00,044: task[6052b039e73748e754a6f0ad]: failed, {'failMsg': 'task fail by PDA', 'endTime': datetime.datetime(2021, 3, 18, 9, 54, 0, 32236), 'status': 'fail'}
[DEBUG]2021-03-18 09:54:00,079: used 117ms 200 OK application/json;charset=utf-8, GET: http://192.168.252.83:5551/api/scada/fail?taskId=6052b039e73748e754a6f0ad&agvId=AGV01&appName=FP-PAD-670d3
[DEBUG]2021-03-18 09:54:02,154: AGV01 set loc famajia.LM41 ,old LM47 (20.75,1.70)
[DEBUG]2021-03-18 09:54:03,682: AGV01 set loc famajia.LM40 ,old LM41 (19.24,1.70)
[DEBUG]2021-03-18 09:54:04,587: AGV01 turn to wait check cur LM40 next AP34 0.850 False
[DEBUG]2021-03-18 09:54:05,235: AGV01 set loc famajia.LM39 ,old LM40 (17.89,1.70)
[DEBUG]2021-03-18 09:54:05,936: agvInfo: AGV01 famajia.LM39 move to famajia.AP34 ,taskId home_1
[WARNING]2021-03-18 09:54:07,503: AGV01 waitFinish: loc is diff LM39 AP34 task_status= 2
[WARNING]2021-03-18 09:54:08,026: AGV01 waitFinish: loc is diff LM39 AP34 task_status= 2
[WARNING]2021-03-18 09:54:08,576: AGV01 waitFinish: loc is diff LM39 AP34 task_status= 2
[WARNING]2021-03-18 09:54:09,103: AGV01 waitFinish: loc is diff LM39 AP34 task_status= 2
[DEBUG]2021-03-18 09:54:09,315: AGV01 set loc famajia.AP34 ,old LM39 (17.89,3.98)
[SUCC]2021-03-18 09:54:10,710: Finish:  AGV01 arrived famajia.AP34 ,task: home_1
[DEBUG]2021-03-18 09:54:10,741: unlock: AGV01 taskId None app None force False

[INFO]2021-04-21 15:44:12,271: log files at E:\projects_by_myself\MeiWei\common\log
[INFO]2021-04-21 15:44:12,273: find module account.main_account
[INFO]2021-04-21 15:44:12,274: find module agvCtrl.main_agv
[INFO]2021-04-21 15:44:12,275: find module agvDevice.main_agvDevice
[INFO]2021-04-21 15:44:12,276: find module akmCtrl.main_akmCtrl
[INFO]2021-04-21 15:44:12,278: find module alarm.main_alarm
[INFO]2021-04-21 15:44:12,279: find module auth.main_auth
[INFO]2021-04-21 15:44:12,280: find module door.main_door
[INFO]2021-04-21 15:44:12,281: find module elevator.main_elevator
[INFO]2021-04-21 15:44:12,282: find module feed.main_feed
[INFO]2021-04-21 15:44:12,287: find module remoteio.main_remoteio
[INFO]2021-04-21 15:44:12,288: import account.main_account
[INFO]2021-04-21 15:44:12,382: import agvCtrl.main_agv
[INFO]2021-04-21 15:44:13,246: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002407036BEA0>>
[INFO]2021-04-21 15:44:14,128: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002407038C420>>
[INFO]2021-04-21 15:44:14,243: create lock <lock name:timer.lock_2475790664224,<unlocked _thread.RLock object owner=0 count=0 at 0x00000240709F8390>>
[ERROR]2021-04-21 15:44:14,255: mqtt is disabled
[INFO]2021-04-21 15:44:14,256: mqtt: subscribe [alarm/raise/+]
[INFO]2021-04-21 15:44:14,257: mqtt: subscribe [alarm/clear/+]
[INFO]2021-04-21 15:44:17,290: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-04-21 15:44:17,319: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024071BD6D80>>
[WARNING]2021-04-21 15:44:17,339: use mockAgvCtrl
[INFO]2021-04-21 15:44:17,344: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002406EC63360>>
[INFO]2021-04-21 15:44:17,705: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024071C73690>>
[INFO]2021-04-21 15:44:17,709: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024071D144E0>>
[INFO]2021-04-21 15:44:17,783: charge policy 1 , fix time
[INFO]2021-04-21 15:44:17,819: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024071D200C0>>
[INFO]2021-04-21 15:44:18,156: start load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-04-21 15:44:18,277: elevator thread start
[INFO]2021-04-21 15:44:18,299: load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\AKM2F.smap ,used 152 ms
[INFO]2021-04-21 15:44:18,309: start load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-04-21 15:44:18,370: load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\akmsmt.smap ,used 69 ms
[INFO]2021-04-21 15:44:18,383: start load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-04-21 15:44:18,516: load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\akmsmtMap.smap ,used 145 ms
[INFO]2021-04-21 15:44:18,527: start load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-04-21 15:44:18,673: load map E:\projects_by_myself\MeiWei\agvCtrl\projects\test\desai-all-20191223.smap ,used 156 ms
[INFO]2021-04-21 15:44:18,678: import agvDevice.main_agvDevice
[INFO]2021-04-21 15:44:18,680: import akmCtrl.main_akmCtrl
[INFO]2021-04-21 15:44:18,707: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002406F714510>>
[INFO]2021-04-21 15:44:18,722: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000240724CB240>>
[INFO]2021-04-21 15:44:18,732: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000240720C91E0>>
[INFO]2021-04-21 15:44:18,733: create lock <lock name:timer.lock_2475814589344,<unlocked _thread.RLock object owner=0 count=0 at 0x00000240720C9150>>
[INFO]2021-04-21 15:44:18,735: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002406F766E10>>
[INFO]2021-04-21 15:44:18,811: import alarm.main_alarm
[INFO]2021-04-21 15:44:18,825: import auth.main_auth
[INFO]2021-04-21 15:44:19,270: import door.main_door
[INFO]2021-04-21 15:44:19,289: import elevator.main_elevator
[INFO]2021-04-21 15:44:19,295: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024072C0C360>>
[INFO]2021-04-21 15:44:19,297: import feed.main_feed
[INFO]2021-04-21 15:44:19,310: create lock <lock name:feedTask.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024072C088A0>>
[INFO]2021-04-21 15:44:19,371: import remoteio.main_remoteio
[SUCC]2021-04-21 15:44:19,383: utility start, pid=5852, ppid=5704
[DEBUG]2021-04-21 15:44:19,384: start timer
[INFO]2021-04-21 15:44:19,390: load agv file: E:\projects_by_myself\MeiWei\agvCtrl/projects/test/agv.cfg
[INFO]2021-04-21 15:44:19,391: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024075359BA0>>
[DEBUG]2021-04-21 15:44:19,394: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-04-21 15:44:19,395: AGV30 start agvList run thread
[INFO]2021-04-21 15:44:19,396: AGV30 start agvList run2 thread
[ERROR]2021-04-21 15:44:19,403: agv check init error False
[DEBUG]2021-04-21 15:44:19,405: start timer
[INFO]2021-04-21 15:44:19,411: add_ignore: taskStatus
[INFO]2021-04-21 15:44:19,413: add_ignore: api/elevator/status
[INFO]2021-04-21 15:44:19,414: add_ignore: scada/getTask
[INFO]2021-04-21 15:44:19,919: AGV30 current map AKM2F
[INFO]2021-04-21 15:44:19,987: AGV30 is online
[DEBUG]2021-04-21 15:44:20,424: GET: http://127.0.0.1:5551/api/agv/init?appName=akmTask addr: 127.0.0.1
[INFO]2021-04-21 15:44:20,442: akmTask init client agvApi
[DEBUG]2021-04-21 15:44:20,444: used 20ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=akmTask
[DEBUG]2021-04-21 15:44:23,566: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=akmTask addr: 127.0.0.1
[DEBUG]2021-04-21 15:44:23,681: used 115ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=akmTask
[WARNING]2021-04-21 15:44:23,846: timer_thread[tid:13224] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=13224 count=1 at 0x000002406F714510>> ,hold 3426 ms
[INFO]2021-04-21 15:44:24,111: name=timer_thread, pid=5852, tid=13224
[01] File "E:/Users/Administrator/AppData/Local/Programs/Python/Python38/lib/threading.py", line 870, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "E:/projects_by_myself/MeiWei/common/enhance.py", line 258, in getTrace() 
[06] File "E:/projects_by_myself/MeiWei/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-04-21 15:44:26,494: GET: http://127.0.0.1:5551/api/scada/addTaskByPad?source=%E4%BA%8C%E6%A5%BC%E5%B7%A5%E4%BD%8D_02&target=%E4%BA%8C%E6%A5%BC%E6%B5%8B%E8%AF%95%E7%82%B9 addr: 127.0.0.1
[INFO]2021-04-21 15:44:26,731: create task[607fd7da2898060cd87a8c02]: type= scadaTask , 从二楼工位_02运送货架到二楼测试点 {'source': '二楼工位_02', 'target': '二楼测试点', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从二楼工位_02运送货架到二楼测试点', 'createTime': datetime.datetime(2021, 4, 21, 15, 44, 26, 588160), 'updateTime': datetime.datetime(2021, 4, 21, 15, 44, 26, 588160), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('607fd7da2898060cd87a8c02')}
[DEBUG]2021-04-21 15:44:27,049: used 556ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/scada/addTaskByPad?source=%E4%BA%8C%E6%A5%BC%E5%B7%A5%E4%BD%8D_02&target=%E4%BA%8C%E6%A5%BC%E6%B5%8B%E8%AF%95%E7%82%B9
[INFO]2021-04-21 15:44:27,348: task[607fd7da2898060cd87a8c02]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 4, 21, 15, 44, 27, 300255), 'updateTime': datetime.datetime(2021, 4, 21, 15, 44, 27, 300255), 'status': 'running'}
[INFO]2021-04-21 15:44:27,441: task: start task[607fd7da2898060cd87a8c02][-] LM16(LM17) -> LM9(LM12) [waiting]
[INFO]2021-04-21 15:44:27,550: task[607fd7da2898060cd87a8c02] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 4, 21, 15, 44, 27, 517674)}
[DEBUG]2021-04-21 15:44:27,629: task[607fd7da2898060cd87a8c02][-] LM16(LM17) -> LM9(LM12) [waitForAgv] waiting -> waitForAgv
[DEBUG]2021-04-21 15:44:29,103: GET: http://127.0.0.1:5551/api/agv/apply?appName=akmTask&autoLock=False&exclude&loc=LM17&mapId=AKM2F&taskId=607fd7da2898060cd87a8c02&timeout=10 addr: 127.0.0.1
[INFO]2021-04-21 15:44:29,432: apply AGV30 ,taskId: 607fd7da2898060cd87a8c02 ,loc AKM2F.LM17 ,autoLock False , used 251 ms
[DEBUG]2021-04-21 15:44:29,525: used 422ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/apply?appName=akmTask&autoLock=False&exclude&loc=LM17&mapId=AKM2F&taskId=607fd7da2898060cd87a8c02&timeout=10
[DEBUG]2021-04-21 15:44:29,761: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV30&appName=akmTask&taskId=607fd7da2898060cd87a8c02 addr: 127.0.0.1
[DEBUG]2021-04-21 15:44:29,839: lock:  AGV30 taskId 607fd7da2898060cd87a8c02 app akmTask
[WARNING]2021-04-21 15:44:30,913: AGV30 clear task finish, cur= AKM2F.AP29 task_status= 0
[DEBUG]2021-04-21 15:44:31,057: used 1296ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV30&appName=akmTask&taskId=607fd7da2898060cd87a8c02
[INFO]2021-04-21 15:44:31,216: task[607fd7da2898060cd87a8c02][-] LM16(LM17) -> LM9(LM12) [waitForAgv] apply AGV30
[INFO]2021-04-21 15:44:31,360: task[607fd7da2898060cd87a8c02] update info: {'agvId': 'AGV30', 'failMsg': '成功分配小车AGV30,检测顶升下降', 'updateTime': datetime.datetime(2021, 4, 21, 15, 44, 31, 312528)}
[DEBUG]2021-04-21 15:44:31,392: task[607fd7da2898060cd87a8c02][AGV30] LM16(LM17) -> LM9(LM12) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-04-21 15:44:31,897: task[607fd7da2898060cd87a8c02][AGV30] LM16(LM17) -> LM9(LM12) [initJackdown] _jackDown
[DEBUG]2021-04-21 15:44:32,025: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV30&loc=None&timeoutSec=90
[DEBUG]2021-04-21 15:44:32,325: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV30&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-04-21 15:44:32,424: _jack in jackMgr: AGV30 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-04-21 15:44:32,642: AGV30 jack down status:  1
[DEBUG]2021-04-21 15:44:32,769: used 444ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV30&loc=None&timeoutSec=90
[DEBUG]2021-04-21 15:44:32,864: [return] use 839 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV30&loc=None&timeoutSec=90
[INFO]2021-04-21 15:44:32,975: task[607fd7da2898060cd87a8c02] update info: {'failMsg': '前往二楼工位_02工位点拉取货架', 'updateTime': datetime.datetime(2021, 4, 21, 15, 44, 32, 943990)}
[DEBUG]2021-04-21 15:44:33,055: task[607fd7da2898060cd87a8c02][AGV30] LM16(LM17) -> LM9(LM12) [startMoveJackup] initJackdown -> startMoveJackup
[CRITICAL]2021-04-21 15:44:33,672: taskFunc2:task[607fd7da2898060cd87a8c02][AGV30] LM16(LM17) -> LM9(LM12) [startMoveJackup] cause a error: _moveJackup() takes 1 positional argument but 2 were given
pid=5852, ppid=5704, tid=1964
Traceback (most recent call last):
  File "E:\projects_by_myself\MeiWei\akmCtrl\beans\scadaTaskBean.py", line 567, in _taskFunc
    elif not self.handle():
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "E:\projects_by_myself\MeiWei\akmCtrl\beans\scadaTaskBean.py", line 440, in handle
    self._moveJackup(self.stepCallback)
TypeError: _moveJackup() takes 1 positional argument but 2 were given

[WARNING]2021-04-21 15:44:33,877: task[607fd7da2898060cd87a8c02]:  error {'failMsg': '_moveJackup() takes 1 positional argument but 2 were given', 'endTime': datetime.datetime(2021, 4, 21, 15, 44, 33, 813707), 'status': 'error'}
[INFO]2021-04-21 15:44:33,973: task[607fd7da2898060cd87a8c02][AGV30] LM16(LM17) -> LM9(LM12) [startMoveJackup] AGV30 release task, release agv True True False
[DEBUG]2021-04-21 15:44:34,211: GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV30&appName=akmTask&taskId=607fd7da2898060cd87a8c02 addr: 127.0.0.1
[DEBUG]2021-04-21 15:44:34,290: used 79ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV30&appName=akmTask&taskId=607fd7da2898060cd87a8c02
[DEBUG]2021-04-21 15:44:34,685: GET: http://127.0.0.1:5551/api/agv/release?agv=AGV30&appName=akmTask&force=False&taskId=607fd7da2898060cd87a8c02 addr: 127.0.0.1
[DEBUG]2021-04-21 15:44:34,765: unlock: AGV30 taskId 607fd7da2898060cd87a8c02 app akmTask force False
[DEBUG]2021-04-21 15:44:34,844: used 159ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/release?agv=AGV30&appName=akmTask&force=False&taskId=607fd7da2898060cd87a8c02
[INFO]2021-04-21 15:44:34,971: task[607fd7da2898060cd87a8c02][AGV30] LM16(LM17) -> LM9(LM12) [startMoveJackup] let AGV30 gohome
[DEBUG]2021-04-21 15:44:35,131: GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV30&appName=akmTask&force=False&timeout=10800 addr: 127.0.0.1
[INFO]2021-04-21 15:44:35,239: AGV30 is in home loc AKM2F.AP29
[DEBUG]2021-04-21 15:44:35,317: used 186ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV30&appName=akmTask&force=False&timeout=10800
[INFO]2021-04-21 15:44:35,426: task: stop task[607fd7da2898060cd87a8c02][-] LM16(LM17) -> LM9(LM12) [startMoveJackup]
[DEBUG]2021-04-21 15:44:36,431: task: delete task 607fd7da2898060cd87a8c02
[ERROR]2021-04-21 15:44:55,171: process exited, living 0:00:42.962241 seconds

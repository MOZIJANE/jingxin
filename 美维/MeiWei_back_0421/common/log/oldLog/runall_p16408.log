[INFO]2021-06-15 09:48:56,942: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-15 09:48:56,942: find module account.main_account
[INFO]2021-06-15 09:48:56,943: find module agvCtrl.main_agv
[INFO]2021-06-15 09:48:56,944: find module agvDevice.main_agvDevice
[INFO]2021-06-15 09:48:56,944: find module akmCtrl.main_akmCtrl
[INFO]2021-06-15 09:48:56,944: find module alarm.main_alarm
[INFO]2021-06-15 09:48:56,945: find module auth.main_auth
[INFO]2021-06-15 09:48:56,945: find module door.main_door
[INFO]2021-06-15 09:48:56,946: find module elevator.main_elevator
[INFO]2021-06-15 09:48:56,948: find module feed.main_feed
[INFO]2021-06-15 09:48:56,949: find module remoteio.main_remoteio
[INFO]2021-06-15 09:48:56,949: import account.main_account
[INFO]2021-06-15 09:48:57,029: import agvCtrl.main_agv
[INFO]2021-06-15 09:48:57,312: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9B2EEDA0>>
[INFO]2021-06-15 09:48:57,328: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9B2EEF08>>
[INFO]2021-06-15 09:48:57,416: create lock <lock name:timer.lock_1772134093488,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9B657C10>>
[ERROR]2021-06-15 09:48:57,430: mqtt is disabled
[INFO]2021-06-15 09:48:57,431: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-15 09:48:57,431: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-15 09:49:00,467: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-15 09:49:00,497: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9B9270D0>>
[WARNING]2021-06-15 09:49:00,510: use mockAgvCtrl
[INFO]2021-06-15 09:49:00,513: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C99B2CC88>>
[INFO]2021-06-15 09:49:00,801: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9B9D8030>>
[INFO]2021-06-15 09:49:00,806: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9B9D8C88>>
[INFO]2021-06-15 09:49:00,871: charge policy 1 , fix time
[INFO]2021-06-15 09:49:00,906: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9BA510D0>>
[INFO]2021-06-15 09:49:01,532: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-15 09:49:01,635: elevator thread start
[INFO]2021-06-15 09:49:01,654: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 131 ms
[INFO]2021-06-15 09:49:01,664: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-15 09:49:01,715: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 61 ms
[INFO]2021-06-15 09:49:01,727: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-15 09:49:01,853: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 136 ms
[INFO]2021-06-15 09:49:01,867: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-15 09:49:01,993: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 135 ms
[INFO]2021-06-15 09:49:02,006: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-15 09:49:02,071: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 76 ms
[INFO]2021-06-15 09:49:02,083: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-15 09:49:02,130: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 57 ms
[INFO]2021-06-15 09:49:02,135: import agvDevice.main_agvDevice
[INFO]2021-06-15 09:49:02,136: import akmCtrl.main_akmCtrl
[INFO]2021-06-15 09:49:02,164: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9BEDA878>>
[INFO]2021-06-15 09:49:02,178: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9BF6F968>>
[INFO]2021-06-15 09:49:02,205: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9BEBEC88>>
[INFO]2021-06-15 09:49:02,208: create lock <lock name:timer.lock_1772178501472,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9BE2F580>>
[INFO]2021-06-15 09:49:02,210: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9A727238>>
[INFO]2021-06-15 09:49:02,257: import alarm.main_alarm
[INFO]2021-06-15 09:49:02,258: import auth.main_auth
[INFO]2021-06-15 09:49:02,661: import door.main_door
[INFO]2021-06-15 09:49:02,664: import elevator.main_elevator
[INFO]2021-06-15 09:49:02,669: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9A727D28>>
[INFO]2021-06-15 09:49:02,672: import feed.main_feed
[INFO]2021-06-15 09:49:02,678: IP: 0.0.0.0 port: 10001
[INFO]2021-06-15 09:49:02,681: import remoteio.main_remoteio
[SUCC]2021-06-15 09:49:02,694: utility start, pid=16408, ppid=2108
[DEBUG]2021-06-15 09:49:02,695: start timer
[INFO]2021-06-15 09:49:02,702: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-15 09:49:02,708: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000019C9C595710>>
[DEBUG]2021-06-15 09:49:02,712: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-15 09:49:02,713: AGV30 start agvList run thread
[INFO]2021-06-15 09:49:02,714: AGV30 start agvList run2 thread
[ERROR]2021-06-15 09:49:02,720: agv check init error False
[DEBUG]2021-06-15 09:49:02,721: start timer
[WARNING]2021-06-15 09:49:02,732: Local server start! version 3.7.3, path C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common, pid 16408
[INFO]2021-06-15 09:49:02,734: add_ignore: taskStatus
[INFO]2021-06-15 09:49:02,737: add_ignore: api/elevator/status
[INFO]2021-06-15 09:49:02,738: add_ignore: scada/getTask
[INFO]2021-06-15 09:49:03,230: AGV30 current map meiwei428
[INFO]2021-06-15 09:49:03,235: AGV30 is online
[INFO]2021-06-15 09:49:03,511: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61935
[DEBUG]2021-06-15 09:49:03,737: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-15 09:49:03,741: MeiWeiTask init client agvApi
[DEBUG]2021-06-15 09:49:03,743: used 6ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[DEBUG]2021-06-15 09:49:06,859: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[DEBUG]2021-06-15 09:49:06,967: used 109ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[WARNING]2021-06-15 09:49:07,203: timer_thread[tid:16896] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=16896 count=1 at 0x0000019C9BEDA878>> ,hold 3469 ms
[INFO]2021-06-15 09:49:07,296: name=timer_thread, pid=16408, tid=16896
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-15 09:49:13,524: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61935
[WARNING]2021-06-15 09:49:13,616: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61935
[INFO]2021-06-15 09:49:13,802: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61936
[INFO]2021-06-15 09:49:15,851: {'21': {'loc': 'Locl', 'map': 'meiwei428'}, '23': {'loc': 'Loc2', 'map': 'meiwei428'}}
[INFO]2021-06-15 09:49:15,928: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-15 09:49:15,990: 21 0
[INFO]2021-06-15 09:49:16,084: ----------
[INFO]2021-06-15 09:49:16,146: <function g_allowNext at 0x0000019C9BF8FF28>
[INFO]2021-06-15 09:49:16,221: 21
[INFO]2021-06-15 09:49:16,326: ----------------------------------addTaskByButton-----
[INFO]2021-06-15 09:49:16,387: source Loc8
[INFO]2021-06-15 09:49:16,463: target Locl
[INFO]2021-06-15 09:49:16,555: payloadId 1
[INFO]2021-06-15 09:49:16,602: devID 21
[INFO]2021-06-15 09:49:16,662: ----------------------scadaTask----------------
[INFO]2021-06-15 09:49:16,724: Loc8 Locl 1
[INFO]2021-06-15 09:49:16,800: unload
[INFO]2021-06-15 09:49:16,925: create task[60c8071c6a7d4a7f347e33a2]: type= scadaTask , 从Loc8运送货架到Locl {'source': 'Loc8', 'target': 'Locl', 'payloadId': '21', 'priority': 1, 'type': 'scadaTask', 'taskName': '从Loc8运送货架到Locl', 'createTime': datetime.datetime(2021, 6, 15, 9, 49, 16, 909235), 'updateTime': datetime.datetime(2021, 6, 15, 9, 49, 16, 909235), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('60c8071c6a7d4a7f347e33a2')}
[INFO]2021-06-15 09:49:16,987: 60c8071c6a7d4a7f347e33a2
[WARNING]2021-06-15 09:49:17,184: task[60c8071c6a7d4a7f347e33a2]: failed, {'failMsg': "can't find target-Locl info", 'endTime': datetime.datetime(2021, 6, 15, 9, 49, 17, 154578), 'status': 'fail'}
[INFO]2021-06-15 09:49:17,260: {'prepoint': '10', 'location': '8', 'floorId': 'meiwei428', 'direction': None, 'payloadId': None, 'p_direction': 0.0, 'WorkPlace': 'true'}
[INFO]2021-06-15 09:49:17,397: task[60c8071c6a7d4a7f347e33a2]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 6, 15, 9, 49, 17, 321124), 'updateTime': datetime.datetime(2021, 6, 15, 9, 49, 17, 321124), 'status': 'running'}
[INFO]2021-06-15 09:49:17,518: ===========================> waiting
[INFO]2021-06-15 09:49:17,623: task[60c8071c6a7d4a7f347e33a2] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 6, 15, 9, 49, 17, 608921)}
[INFO]2021-06-15 09:49:27,275: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61936

[INFO]2021-06-15 09:50:32,514: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-15 09:50:32,514: find module account.main_account
[INFO]2021-06-15 09:50:32,515: find module agvCtrl.main_agv
[INFO]2021-06-15 09:50:32,515: find module agvDevice.main_agvDevice
[INFO]2021-06-15 09:50:32,515: find module akmCtrl.main_akmCtrl
[INFO]2021-06-15 09:50:32,516: find module alarm.main_alarm
[INFO]2021-06-15 09:50:32,516: find module auth.main_auth
[INFO]2021-06-15 09:50:32,516: find module door.main_door
[INFO]2021-06-15 09:50:32,517: find module elevator.main_elevator
[INFO]2021-06-15 09:50:32,517: find module feed.main_feed
[INFO]2021-06-15 09:50:32,518: find module remoteio.main_remoteio
[INFO]2021-06-15 09:50:32,518: import account.main_account
[INFO]2021-06-15 09:50:32,597: import agvCtrl.main_agv
[INFO]2021-06-15 09:50:32,878: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ECAADDA0>>
[INFO]2021-06-15 09:50:32,895: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ECAADF08>>
[INFO]2021-06-15 09:50:32,982: create lock <lock name:timer.lock_1876580377040,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ECE24BC0>>
[ERROR]2021-06-15 09:50:32,995: mqtt is disabled
[INFO]2021-06-15 09:50:33,000: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-15 09:50:33,003: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-15 09:50:36,040: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-15 09:50:36,068: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED0E7080>>
[WARNING]2021-06-15 09:50:36,083: use mockAgvCtrl
[INFO]2021-06-15 09:50:36,086: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4EB2ECC88>>
[INFO]2021-06-15 09:50:36,379: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED19A030>>
[INFO]2021-06-15 09:50:36,384: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED19AF58>>
[INFO]2021-06-15 09:50:36,445: charge policy 1 , fix time
[INFO]2021-06-15 09:50:36,479: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED212080>>
[INFO]2021-06-15 09:50:37,102: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-15 09:50:37,207: elevator thread start
[INFO]2021-06-15 09:50:37,226: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 133 ms
[INFO]2021-06-15 09:50:37,236: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-15 09:50:37,282: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 55 ms
[INFO]2021-06-15 09:50:37,292: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-15 09:50:37,436: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 152 ms
[INFO]2021-06-15 09:50:37,448: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-15 09:50:37,569: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 131 ms
[INFO]2021-06-15 09:50:37,581: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-15 09:50:37,647: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 76 ms
[INFO]2021-06-15 09:50:37,658: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-15 09:50:37,711: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 62 ms
[INFO]2021-06-15 09:50:37,715: import agvDevice.main_agvDevice
[INFO]2021-06-15 09:50:37,716: import akmCtrl.main_akmCtrl
[INFO]2021-06-15 09:50:37,742: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED6A43C8>>
[INFO]2021-06-15 09:50:37,756: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED7469E0>>
[INFO]2021-06-15 09:50:37,783: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED609E40>>
[INFO]2021-06-15 09:50:37,784: create lock <lock name:timer.lock_1876624682568,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4ED5EF2B0>>
[INFO]2021-06-15 09:50:37,788: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4EBEE81E8>>
[INFO]2021-06-15 09:50:38,172: import alarm.main_alarm
[INFO]2021-06-15 09:50:38,207: import auth.main_auth
[INFO]2021-06-15 09:50:38,232: import door.main_door
[INFO]2021-06-15 09:50:38,234: import elevator.main_elevator
[INFO]2021-06-15 09:50:38,237: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4EBEE8CD8>>
[INFO]2021-06-15 09:50:38,239: import feed.main_feed
[INFO]2021-06-15 09:50:38,243: IP: 0.0.0.0 port: 10001
[INFO]2021-06-15 09:50:38,247: import remoteio.main_remoteio
[SUCC]2021-06-15 09:50:38,258: utility start, pid=14796, ppid=12376
[DEBUG]2021-06-15 09:50:38,263: start timer
[INFO]2021-06-15 09:50:38,273: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-15 09:50:38,275: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001B4EF553468>>
[DEBUG]2021-06-15 09:50:38,284: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-15 09:50:38,287: AGV30 start agvList run thread
[INFO]2021-06-15 09:50:38,287: AGV30 start agvList run2 thread
[DEBUG]2021-06-15 09:50:38,291: start timer
[ERROR]2021-06-15 09:50:38,299: agv check init error False
[WARNING]2021-06-15 09:50:38,303: Local server start! version 3.7.3, path C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common, pid 14796
[INFO]2021-06-15 09:50:38,304: add_ignore: taskStatus
[INFO]2021-06-15 09:50:38,306: add_ignore: api/elevator/status
[INFO]2021-06-15 09:50:38,307: add_ignore: scada/getTask
[INFO]2021-06-15 09:50:38,801: AGV30 current map meiwei428
[INFO]2021-06-15 09:50:38,805: AGV30 is online
[DEBUG]2021-06-15 09:50:39,316: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-15 09:50:39,318: MeiWeiTask init client agvApi
[DEBUG]2021-06-15 09:50:39,320: used 4ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[INFO]2021-06-15 09:50:39,640: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61947
[DEBUG]2021-06-15 09:50:42,533: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[DEBUG]2021-06-15 09:50:42,627: used 94ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[WARNING]2021-06-15 09:50:42,769: timer_thread[tid:10892] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=10892 count=1 at 0x000001B4ED6A43C8>> ,hold 3470 ms
[INFO]2021-06-15 09:50:42,954: name=timer_thread, pid=14796, tid=10892
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-15 09:50:49,769: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61947
[WARNING]2021-06-15 09:50:49,908: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61947
[INFO]2021-06-15 09:50:50,093: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61948
[INFO]2021-06-15 09:50:57,000: {'21': {'loc': 'Locl', 'map': 'meiwei428'}, '23': {'loc': 'Loc2', 'map': 'meiwei428'}}
[INFO]2021-06-15 09:50:57,061: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-15 09:50:57,215: 21 0
[INFO]2021-06-15 09:50:57,325: ----------
[INFO]2021-06-15 09:50:57,432: <function g_allowNext at 0x000001B4ED744158>
[INFO]2021-06-15 09:50:57,494: 21
[INFO]2021-06-15 09:50:57,605: ----------------------------------addTaskByButton-----
[INFO]2021-06-15 09:50:57,635: source Loc8
[INFO]2021-06-15 09:50:57,695: target Locl
[INFO]2021-06-15 09:50:57,774: payloadId 1
[INFO]2021-06-15 09:50:57,836: devID 21
[INFO]2021-06-15 09:50:57,914: ----------------------scadaTask----------------
[INFO]2021-06-15 09:50:57,991: Loc8 Locl 21
[INFO]2021-06-15 09:50:58,100: unload
[CRITICAL]2021-06-15 09:50:58,726: 192.168.252.159:10001 <--> 192.168.252.148:61948 error:  cause a error: 'int' object has no attribute 'strip'
pid=14796, ppid=12376, tid=16868
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 179, in _handle
    addTaskByButton(devID=devID, target=target)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 223, in addTaskByButton
    taskId = runTasks01.addTaskByButton(source, target, payloadId, priority, btTag, taskKind, devID=devID)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 92, in addTaskByButton
    task = scadaTaskBean.scadaTask(source, target, devID, payloadId, int(priority),btTag,taskKind=taskKind)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskBean.py", line 62, in __init__
    self.payloadId = payloadId.strip()
AttributeError: 'int' object has no attribute 'strip'

[INFO]2021-06-15 09:50:58,850: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.148:61948
[WARNING]2021-06-15 09:50:59,036: disconnect 192.168.252.159:10001 <--> 192.168.252.148:61948
[INFO]2021-06-15 09:50:59,174: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.148:61949

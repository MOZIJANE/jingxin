[INFO]2021-06-11 15:52:05,954: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-11 15:52:05,956: find module account.main_account
[INFO]2021-06-11 15:52:05,958: find module agvCtrl.main_agv
[INFO]2021-06-11 15:52:05,960: find module agvDevice.main_agvDevice
[INFO]2021-06-11 15:52:05,962: find module akmCtrl.main_akmCtrl
[INFO]2021-06-11 15:52:05,964: find module alarm.main_alarm
[INFO]2021-06-11 15:52:05,970: find module auth.main_auth
[INFO]2021-06-11 15:52:05,972: find module door.main_door
[INFO]2021-06-11 15:52:05,974: find module elevator.main_elevator
[INFO]2021-06-11 15:52:05,976: find module feed.main_feed
[INFO]2021-06-11 15:52:05,978: find module remoteio.main_remoteio
[INFO]2021-06-11 15:52:05,980: import account.main_account
[INFO]2021-06-11 15:52:06,385: import agvCtrl.main_agv
[INFO]2021-06-11 15:52:07,412: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC1F9EDA0>>
[INFO]2021-06-11 15:52:07,475: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC1F9EF08>>
[INFO]2021-06-11 15:52:07,873: create lock <lock name:timer.lock_1708360400680,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC2307C10>>
[ERROR]2021-06-11 15:52:07,927: mqtt is disabled
[INFO]2021-06-11 15:52:07,929: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-11 15:52:07,931: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-11 15:52:11,065: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-11 15:52:11,126: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC25D70A8>>
[WARNING]2021-06-11 15:52:11,168: use mockAgvCtrl
[INFO]2021-06-11 15:52:11,180: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC0FCDC88>>
[INFO]2021-06-11 15:52:11,819: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC2688058>>
[INFO]2021-06-11 15:52:11,824: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC2688BE8>>
[INFO]2021-06-11 15:52:11,913: charge policy 1 , fix time
[INFO]2021-06-11 15:52:11,951: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC27000A8>>
[INFO]2021-06-11 15:52:13,139: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-11 15:52:13,253: elevator thread start
[INFO]2021-06-11 15:52:13,275: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 144 ms
[INFO]2021-06-11 15:52:13,286: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-11 15:52:13,335: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 58 ms
[INFO]2021-06-11 15:52:13,350: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-11 15:52:13,487: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 150 ms
[INFO]2021-06-11 15:52:13,499: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-11 15:52:13,630: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 141 ms
[INFO]2021-06-11 15:52:13,642: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-11 15:52:13,727: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 95 ms
[INFO]2021-06-11 15:52:13,741: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-11 15:52:13,816: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 87 ms
[INFO]2021-06-11 15:52:13,822: import agvDevice.main_agvDevice
[INFO]2021-06-11 15:52:13,822: import akmCtrl.main_akmCtrl
[INFO]2021-06-11 15:52:13,867: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC2B94878>>
[INFO]2021-06-11 15:52:13,883: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC2BCD918>>
[INFO]2021-06-11 15:52:13,896: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC2B94198>>
[INFO]2021-06-11 15:52:13,898: create lock <lock name:timer.lock_1708404650448,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC2AD93C8>>
[INFO]2021-06-11 15:52:13,901: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC13C31E8>>
[INFO]2021-06-11 15:52:13,964: import alarm.main_alarm
[INFO]2021-06-11 15:52:15,610: import auth.main_auth
[INFO]2021-06-11 15:52:15,890: import door.main_door
[INFO]2021-06-11 15:52:15,897: import elevator.main_elevator
[INFO]2021-06-11 15:52:15,910: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC13C3CD8>>
[INFO]2021-06-11 15:52:15,916: import feed.main_feed
[INFO]2021-06-11 15:52:15,935: IP: 0.0.0.0 port: 10001
[INFO]2021-06-11 15:52:15,941: import remoteio.main_remoteio
[SUCC]2021-06-11 15:52:15,985: utility start, pid=10196, ppid=21516
[DEBUG]2021-06-11 15:52:16,062: start timer
[INFO]2021-06-11 15:52:16,089: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-11 15:52:16,126: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000018DC3275490>>
[DEBUG]2021-06-11 15:52:16,136: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-11 15:52:16,139: AGV30 start agvList run thread
[INFO]2021-06-11 15:52:16,143: AGV30 start agvList run2 thread
[ERROR]2021-06-11 15:52:16,161: agv check init error False
[DEBUG]2021-06-11 15:52:16,163: start timer
[INFO]2021-06-11 15:52:16,193: add_ignore: taskStatus
[INFO]2021-06-11 15:52:16,207: add_ignore: api/elevator/status
[INFO]2021-06-11 15:52:16,212: add_ignore: scada/getTask
[INFO]2021-06-11 15:52:16,525: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62446
[INFO]2021-06-11 15:52:16,591: **************回复线程启动**************
[INFO]2021-06-11 15:52:16,679: AGV30 current map meiwei428
[INFO]2021-06-11 15:52:16,680: AGV30 is online
[DEBUG]2021-06-11 15:52:17,189: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-11 15:52:17,193: MeiWeiTask init client agvApi
[DEBUG]2021-06-11 15:52:17,195: used 6ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[INFO]2021-06-11 15:52:20,127: 1
[INFO]2021-06-11 15:52:20,345: {'21': {'loc': 1, 'map': 'test'}, '23': {'loc': 3, 'map': 'test'}}
[DEBUG]2021-06-11 15:52:20,375: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-11 15:52:20,422: 测试添加任务，起点和目的地，固化在下面的方法中
[DEBUG]2021-06-11 15:52:20,501: used 126ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[INFO]2021-06-11 15:52:20,594: 3
[WARNING]2021-06-11 15:52:20,830: timer_thread[tid:20932] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=20932 count=1 at 0x0000018DC2B94878>> ,hold 4655 ms
[INFO]2021-06-11 15:52:21,323: name=timer_thread, pid=10196, tid=20932
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-11 15:52:21,418: ---------------------runTask01--------------------addTaskByButton-----
[CRITICAL]2021-06-11 15:52:21,901: 192.168.252.159:10001 <--> 192.168.252.147:62446 error:  cause a error: 'int' object has no attribute 'strip'
pid=10196, ppid=21516, tid=12576
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 179, in _handle
    addTaskByButton(target=target)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 218, in addTaskByButton
    taskId = runTasks01.addTaskByButton(source, target, payloadId, priority, btTag, taskKind)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 87, in addTaskByButton
    task = scadaTaskBean.scadaTask(source, target, payloadId, int(priority),btTag,taskKind)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskBean.py", line 56, in __init__
    self.target = target.strip()
AttributeError: 'int' object has no attribute 'strip'

[INFO]2021-06-11 15:52:22,045: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.147:62446
[WARNING]2021-06-11 15:52:22,075: disconnect 192.168.252.159:10001 <--> 192.168.252.147:62446
[INFO]2021-06-11 15:52:22,209: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62447
[INFO]2021-06-11 15:52:22,303: **************回复线程启动**************
[CRITICAL]2021-06-11 15:52:32,429: 192.168.252.159:10001 <--> 192.168.252.147:62447 time out cause a error: <tcpSocket.client object at 0x0000018DC2C6DD30>
pid=10196, ppid=21516, tid=19600
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out

[INFO]2021-06-11 15:52:32,522: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.147:62447
[WARNING]2021-06-11 15:52:32,569: disconnect 192.168.252.159:10001 <--> 192.168.252.147:62447
[INFO]2021-06-11 15:52:32,707: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62448
[INFO]2021-06-11 15:52:32,816: **************回复线程启动**************
[CRITICAL]2021-06-11 15:52:42,894: 192.168.252.159:10001 <--> 192.168.252.147:62448 time out cause a error: <tcpSocket.client object at 0x0000018DC2C6DCF8>
pid=10196, ppid=21516, tid=12860
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out

[INFO]2021-06-11 15:53:34,186: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.147:62448
[WARNING]2021-06-11 15:53:34,248: disconnect 192.168.252.159:10001 <--> 192.168.252.147:62448

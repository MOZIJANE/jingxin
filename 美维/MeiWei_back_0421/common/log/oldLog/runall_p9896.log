[INFO]2021-06-11 16:08:19,403: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-11 16:08:19,404: find module account.main_account
[INFO]2021-06-11 16:08:19,405: find module agvCtrl.main_agv
[INFO]2021-06-11 16:08:19,406: find module agvDevice.main_agvDevice
[INFO]2021-06-11 16:08:19,407: find module akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:08:19,408: find module alarm.main_alarm
[INFO]2021-06-11 16:08:19,409: find module auth.main_auth
[INFO]2021-06-11 16:08:19,410: find module door.main_door
[INFO]2021-06-11 16:08:19,413: find module elevator.main_elevator
[INFO]2021-06-11 16:08:19,414: find module feed.main_feed
[INFO]2021-06-11 16:08:19,415: find module remoteio.main_remoteio
[INFO]2021-06-11 16:08:19,415: import account.main_account
[INFO]2021-06-11 16:08:19,586: import agvCtrl.main_agv
[INFO]2021-06-11 16:08:20,155: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69A7EDDA0>>
[INFO]2021-06-11 16:08:20,218: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69A7EDF08>>
[INFO]2021-06-11 16:08:20,610: create lock <lock name:timer.lock_1952511164200,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69AB64BC0>>
[ERROR]2021-06-11 16:08:20,667: mqtt is disabled
[INFO]2021-06-11 16:08:20,669: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-11 16:08:20,671: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-11 16:08:23,806: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-11 16:08:23,867: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69AE28058>>
[WARNING]2021-06-11 16:08:23,907: use mockAgvCtrl
[INFO]2021-06-11 16:08:23,919: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69901DC88>>
[INFO]2021-06-11 16:08:24,430: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69AEDA0A8>>
[INFO]2021-06-11 16:08:24,436: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69AEDAF08>>
[INFO]2021-06-11 16:08:24,506: charge policy 1 , fix time
[INFO]2021-06-11 16:08:24,547: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69AF51080>>
[INFO]2021-06-11 16:08:25,212: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-11 16:08:25,631: elevator thread start
[INFO]2021-06-11 16:08:25,696: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 494 ms
[INFO]2021-06-11 16:08:25,712: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-11 16:08:25,829: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 131 ms
[INFO]2021-06-11 16:08:25,880: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-11 16:08:26,194: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 359 ms
[INFO]2021-06-11 16:08:26,208: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-11 16:08:26,485: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 288 ms
[INFO]2021-06-11 16:08:26,500: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-11 16:08:26,682: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 194 ms
[INFO]2021-06-11 16:08:26,728: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-11 16:08:26,937: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 250 ms
[INFO]2021-06-11 16:08:26,948: import agvDevice.main_agvDevice
[INFO]2021-06-11 16:08:26,949: import akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:08:27,016: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69B3E73C8>>
[INFO]2021-06-11 16:08:27,056: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69B4998A0>>
[INFO]2021-06-11 16:08:27,100: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69B34AE18>>
[INFO]2021-06-11 16:08:27,107: create lock <lock name:timer.lock_1952538854344,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69B32C378>>
[INFO]2021-06-11 16:08:27,115: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C699C18198>>
[INFO]2021-06-11 16:08:27,282: import alarm.main_alarm
[INFO]2021-06-11 16:08:29,029: import auth.main_auth
[INFO]2021-06-11 16:08:29,343: import door.main_door
[INFO]2021-06-11 16:08:29,363: import elevator.main_elevator
[INFO]2021-06-11 16:08:29,380: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C699C18C88>>
[INFO]2021-06-11 16:08:29,391: import feed.main_feed
[INFO]2021-06-11 16:08:29,415: IP: 0.0.0.0 port: 10001
[INFO]2021-06-11 16:08:29,422: import remoteio.main_remoteio
[SUCC]2021-06-11 16:08:29,474: utility start, pid=9896, ppid=21396
[DEBUG]2021-06-11 16:08:29,480: start timer
[INFO]2021-06-11 16:08:29,509: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-11 16:08:29,513: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001C69C294418>>
[DEBUG]2021-06-11 16:08:29,522: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-11 16:08:29,530: AGV30 start agvList run thread
[INFO]2021-06-11 16:08:29,533: AGV30 start agvList run2 thread
[ERROR]2021-06-11 16:08:29,552: agv check init error False
[DEBUG]2021-06-11 16:08:29,557: start timer
[INFO]2021-06-11 16:08:29,585: add_ignore: taskStatus
[INFO]2021-06-11 16:08:29,590: add_ignore: api/elevator/status
[INFO]2021-06-11 16:08:29,593: add_ignore: scada/getTask
[INFO]2021-06-11 16:08:30,069: AGV30 current map meiwei428
[INFO]2021-06-11 16:08:30,074: AGV30 is online
[INFO]2021-06-11 16:08:30,146: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62506
[INFO]2021-06-11 16:08:30,154: **************回复线程启动**************
[DEBUG]2021-06-11 16:08:30,583: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-11 16:08:30,589: MeiWeiTask init client agvApi
[DEBUG]2021-06-11 16:08:30,594: used 11ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[INFO]2021-06-11 16:08:32,418: 1
[INFO]2021-06-11 16:08:32,575: {'21': {'loc': 1, 'map': 'test'}, '23': {'loc': 3, 'map': 'test'}}
[INFO]2021-06-11 16:08:32,670: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-11 16:08:32,733: 3
[DEBUG]2021-06-11 16:08:33,754: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[DEBUG]2021-06-11 16:08:33,829: used 75ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[WARNING]2021-06-11 16:08:33,998: timer_thread[tid:10092] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=10092 count=1 at 0x000001C69B3E73C8>> ,hold 4437 ms
[INFO]2021-06-11 16:08:34,340: name=timer_thread, pid=9896, tid=10092
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-11 16:08:34,487: source 8
[INFO]2021-06-11 16:08:34,573: source 3
[INFO]2021-06-11 16:08:34,650: ---------------------runTask01--------------------addTaskByButton-----
[INFO]2021-06-11 16:08:34,789: ----------------------scadaTask----------------
[CRITICAL]2021-06-11 16:08:35,177: 192.168.252.159:10001 <--> 192.168.252.147:62506 error:  cause a error: 'scadaTask' object has no attribute 'source'
pid=9896, ppid=21396, tid=2848
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 179, in _handle
    addTaskByButton(target=target)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 219, in addTaskByButton
    taskId = runTasks01.addTaskByButton(source, target, payloadId, priority, btTag, taskKind)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 89, in addTaskByButton
    task = scadaTaskBean.scadaTask(source, target, payloadId, int(priority),btTag,taskKind)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskBean.py", line 46, in __init__
    log.info(self.source,self.target)
AttributeError: 'scadaTask' object has no attribute 'source'

[INFO]2021-06-11 16:08:35,301: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.147:62506
[WARNING]2021-06-11 16:08:35,393: disconnect 192.168.252.159:10001 <--> 192.168.252.147:62506
[INFO]2021-06-11 16:08:35,566: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:62507
[INFO]2021-06-11 16:08:35,658: **************回复线程启动**************
[CRITICAL]2021-06-11 16:08:45,757: 192.168.252.159:10001 <--> 192.168.252.147:62507 time out cause a error: <tcpSocket.client object at 0x000001C69C1943C8>
pid=9896, ppid=21396, tid=21608
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out


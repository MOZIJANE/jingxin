[INFO]2021-06-11 16:55:31,990: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-11 16:55:31,992: find module account.main_account
[INFO]2021-06-11 16:55:31,993: find module agvCtrl.main_agv
[INFO]2021-06-11 16:55:31,994: find module agvDevice.main_agvDevice
[INFO]2021-06-11 16:55:31,995: find module akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:55:31,996: find module alarm.main_alarm
[INFO]2021-06-11 16:55:31,997: find module auth.main_auth
[INFO]2021-06-11 16:55:31,998: find module door.main_door
[INFO]2021-06-11 16:55:31,999: find module elevator.main_elevator
[INFO]2021-06-11 16:55:32,000: find module feed.main_feed
[INFO]2021-06-11 16:55:32,001: find module remoteio.main_remoteio
[INFO]2021-06-11 16:55:32,002: import account.main_account
[INFO]2021-06-11 16:55:32,134: import agvCtrl.main_agv
[INFO]2021-06-11 16:55:33,172: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61DE5EDA0>>
[INFO]2021-06-11 16:55:33,193: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61DE5EF08>>
[INFO]2021-06-11 16:55:33,388: create lock <lock name:timer.lock_2156579192560,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61E1C7C10>>
[ERROR]2021-06-11 16:55:33,435: mqtt is disabled
[INFO]2021-06-11 16:55:33,437: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-11 16:55:33,438: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-11 16:55:36,573: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-11 16:55:36,636: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61E4970A8>>
[WARNING]2021-06-11 16:55:36,677: use mockAgvCtrl
[INFO]2021-06-11 16:55:36,689: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61C69EC88>>
[INFO]2021-06-11 16:55:37,345: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61E548058>>
[INFO]2021-06-11 16:55:37,355: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61E548BE8>>
[INFO]2021-06-11 16:55:37,550: charge policy 1 , fix time
[INFO]2021-06-11 16:55:37,625: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61E5C00A8>>
[INFO]2021-06-11 16:55:38,510: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-11 16:55:38,769: elevator thread start
[INFO]2021-06-11 16:55:38,809: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 307 ms
[INFO]2021-06-11 16:55:38,849: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-11 16:55:38,988: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 174 ms
[INFO]2021-06-11 16:55:39,011: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-11 16:55:39,326: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 335 ms
[INFO]2021-06-11 16:55:39,361: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-11 16:55:39,543: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 215 ms
[INFO]2021-06-11 16:55:39,558: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-11 16:55:39,697: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 151 ms
[INFO]2021-06-11 16:55:39,710: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-11 16:55:39,893: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 194 ms
[INFO]2021-06-11 16:55:39,906: import agvDevice.main_agvDevice
[INFO]2021-06-11 16:55:39,909: import akmCtrl.main_akmCtrl
[INFO]2021-06-11 16:55:40,002: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61EA550D0>>
[INFO]2021-06-11 16:55:40,040: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61EA84558>>
[INFO]2021-06-11 16:55:40,109: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61E9B6B70>>
[INFO]2021-06-11 16:55:40,121: create lock <lock name:timer.lock_2156627740936,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61E9993A0>>
[INFO]2021-06-11 16:55:40,130: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61D2971E8>>
[INFO]2021-06-11 16:55:40,296: import alarm.main_alarm
[INFO]2021-06-11 16:55:40,302: import auth.main_auth
[INFO]2021-06-11 16:55:42,328: import door.main_door
[INFO]2021-06-11 16:55:42,344: import elevator.main_elevator
[INFO]2021-06-11 16:55:42,371: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61D297CD8>>
[INFO]2021-06-11 16:55:42,381: import feed.main_feed
[INFO]2021-06-11 16:55:42,396: IP: 0.0.0.0 port: 10001
[INFO]2021-06-11 16:55:42,405: import remoteio.main_remoteio
[SUCC]2021-06-11 16:55:42,460: utility start, pid=10012, ppid=11176
[DEBUG]2021-06-11 16:55:42,468: start timer
[INFO]2021-06-11 16:55:42,493: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-11 16:55:42,497: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001F61F8E6238>>
[DEBUG]2021-06-11 16:55:42,509: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-11 16:55:42,513: AGV30 start agvList run thread
[INFO]2021-06-11 16:55:42,514: AGV30 start agvList run2 thread
[ERROR]2021-06-11 16:55:42,536: agv check init error False
[DEBUG]2021-06-11 16:55:42,540: start timer
[INFO]2021-06-11 16:55:42,570: add_ignore: taskStatus
[INFO]2021-06-11 16:55:42,576: add_ignore: api/elevator/status
[INFO]2021-06-11 16:55:42,583: add_ignore: scada/getTask
[INFO]2021-06-11 16:55:42,735: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:64044
[INFO]2021-06-11 16:55:42,738: **************回复线程启动**************
[INFO]2021-06-11 16:55:43,043: AGV30 current map meiwei428
[INFO]2021-06-11 16:55:43,044: AGV30 is online
[DEBUG]2021-06-11 16:55:43,570: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-11 16:55:43,574: MeiWeiTask init client agvApi
[DEBUG]2021-06-11 16:55:43,577: used 7ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[DEBUG]2021-06-11 16:55:46,719: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-11 16:55:46,734: 1
[DEBUG]2021-06-11 16:55:46,827: used 109ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[INFO]2021-06-11 16:55:47,043: {'21': {'loc': 1, 'map': 'test'}, '23': {'loc': 3, 'map': 'test'}}
[WARNING]2021-06-11 16:55:47,059: timer_thread[tid:3260] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=3260 count=1 at 0x000001F61EA550D0>> ,hold 4514 ms
[INFO]2021-06-11 16:55:47,136: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-11 16:55:47,294: 3
[INFO]2021-06-11 16:55:47,480: name=timer_thread, pid=10012, tid=3260
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-11 16:55:47,542: source 8
[INFO]2021-06-11 16:55:47,603: target 3
[INFO]2021-06-11 16:55:47,728: ---------------------runTask01--------------------addTaskByButton-----
[INFO]2021-06-11 16:55:47,791: ----------------------scadaTask----------------
[INFO]2021-06-11 16:55:47,866: 8 3
[INFO]2021-06-11 16:55:48,007: create task[60c32513e736ac8482d454ee]: type= scadaTask , 从8运送货架到3 {'source': '8', 'target': '3', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从8运送货架到3', 'createTime': datetime.datetime(2021, 6, 11, 16, 55, 47, 944069), 'updateTime': datetime.datetime(2021, 6, 11, 16, 55, 47, 944069), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('60c32513e736ac8482d454ee')}
[INFO]2021-06-11 16:55:48,099: 60c32513e736ac8482d454ee
[WARNING]2021-06-11 16:55:48,443: task[60c32513e736ac8482d454ee]: failed, {'failMsg': "can't find source-8 and target-3 info", 'endTime': datetime.datetime(2021, 6, 11, 16, 55, 48, 428391), 'status': 'fail'}
[INFO]2021-06-11 16:55:48,552: None
[INFO]2021-06-11 16:55:48,568: 0
[CRITICAL]2021-06-11 16:55:48,877: invoke timer func<function lock.<locals>.call.<locals>._call at 0x000001F61D27DEA0> cause a error: 'NoneType' object is not subscriptable
pid=10012, ppid=11176, tid=3260
Traceback (most recent call last):
  File "..\common\mytimer.py", line 113, in _loop
    v.func(*v.args)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 58, in run
    if not g_taskMgr.checkTask(t):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskMgrBean.py", line 68, in checkTask
    ret = task.islocAvailable(task.s_info["floorId"], task.s_info["prepoint"])
TypeError: 'NoneType' object is not subscriptable

[INFO]2021-06-11 16:55:49,979: None
[CRITICAL]2021-06-11 16:55:58,975: 192.168.252.159:10001 <--> 192.168.252.147:64044 time out cause a error: <tcpSocket.client object at 0x000001F61EB75710>
pid=10012, ppid=11176, tid=20968
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out

[WARNING]2021-06-11 16:56:30,545: timer_thread[tid:3260] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=3260 count=1 at 0x000001F61EA550D0>> ,hold 40566 ms
[INFO]2021-06-11 16:56:30,654: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.252.159:10001 <--> 192.168.252.147:64044
[WARNING]2021-06-11 16:56:30,825: disconnect 192.168.252.159:10001 <--> 192.168.252.147:64044
[INFO]2021-06-11 16:56:30,825: name=timer_thread, pid=10012, tid=3260
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-11 16:56:31,010: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:64045
[CRITICAL]2021-06-11 16:56:31,176: invoke timer func<function lock.<locals>.call.<locals>._call at 0x000001F61D27DEA0> cause a error: 'NoneType' object is not subscriptable
pid=10012, ppid=11176, tid=3260
Traceback (most recent call last):
  File "..\common\mytimer.py", line 113, in _loop
    v.func(*v.args)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 58, in run
    if not g_taskMgr.checkTask(t):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskMgrBean.py", line 68, in checkTask
    ret = task.islocAvailable(task.s_info["floorId"], task.s_info["prepoint"])
TypeError: 'NoneType' object is not subscriptable

[INFO]2021-06-11 16:56:31,215: **************回复线程启动**************
[INFO]2021-06-11 16:56:32,287: None
[CRITICAL]2021-06-11 16:56:32,415: invoke timer func<function lock.<locals>.call.<locals>._call at 0x000001F61D27DEA0> cause a error: 'NoneType' object is not subscriptable
pid=10012, ppid=11176, tid=3260
Traceback (most recent call last):
  File "..\common\mytimer.py", line 113, in _loop
    v.func(*v.args)
  File "..\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\runTasks01.py", line 58, in run
    if not g_taskMgr.checkTask(t):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskMgrBean.py", line 68, in checkTask
    ret = task.islocAvailable(task.s_info["floorId"], task.s_info["prepoint"])
TypeError: 'NoneType' object is not subscriptable

[INFO]2021-06-11 16:56:33,493: None
[CRITICAL]2021-06-11 16:56:41,254: 192.168.252.159:10001 <--> 192.168.252.147:64045 time out cause a error: <tcpSocket.client object at 0x000001F61EB755F8>
pid=10012, ppid=11176, tid=19304
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out

[INFO]2021-06-11 16:58:37,568: tcp server [0.0.0.0][10001] ,connectedLen: 2, tcp connected 192.168.252.159:10001 <--> 192.168.252.147:51710

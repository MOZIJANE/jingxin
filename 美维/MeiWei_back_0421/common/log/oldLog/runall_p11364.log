[INFO]2021-04-01 11:03:12,509: log files at E:\安捷利电梯项目\AKMfloor\common\log
[INFO]2021-04-01 11:03:12,510: find module account.main_account
[INFO]2021-04-01 11:03:12,513: find module agvCtrl.main_agv
[INFO]2021-04-01 11:03:12,515: find module agvDevice.main_agvDevice
[INFO]2021-04-01 11:03:12,516: find module alarm.main_alarm
[INFO]2021-04-01 11:03:12,519: find module auth.main_auth
[INFO]2021-04-01 11:03:12,520: find module door.main_door
[INFO]2021-04-01 11:03:12,523: find module elevator.main_elevator
[INFO]2021-04-01 11:03:12,523: find module feed.main_feed
[INFO]2021-04-01 11:03:12,525: find module menu.main_menu
[INFO]2021-04-01 11:03:12,531: find module pharmapackCtrl.main_scadaCtrl
[INFO]2021-04-01 11:03:12,532: find module webFront.main_web
[INFO]2021-04-01 11:03:12,535: find module wmqtt.main_wmqtt
[INFO]2021-04-01 11:03:12,538: import account.main_account
[INFO]2021-04-01 11:03:12,625: import agvCtrl.main_agv
[INFO]2021-04-01 11:03:12,994: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BAD17F60>>
[INFO]2021-04-01 11:03:13,929: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BAD2B4E0>>
[INFO]2021-04-01 11:03:14,038: create lock <lock name:timer.lock_2515696722704,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BB35A480>>
[ERROR]2021-04-01 11:03:14,052: mqtt is disabled
[INFO]2021-04-01 11:03:14,054: mqtt: subscribe [alarm/raise/+]
[INFO]2021-04-01 11:03:14,055: mqtt: subscribe [alarm/clear/+]
[INFO]2021-04-01 11:03:17,099: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-04-01 11:03:17,136: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BB578B40>>
[INFO]2021-04-01 11:03:17,141: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BB56EEA0>>
[INFO]2021-04-01 11:03:17,353: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BB582AE0>>
[INFO]2021-04-01 11:03:17,639: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BC67C420>>
[INFO]2021-04-01 11:03:17,644: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BC6AD480>>
[INFO]2021-04-01 11:03:17,720: charge policy 1 , fix time
[INFO]2021-04-01 11:03:17,762: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BC6B7060>>
[INFO]2021-04-01 11:03:18,097: start load map E:\安捷利电梯项目\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap
[DEBUG]2021-04-01 11:03:18,209: create aliveObj ELEVATOR01 电梯离线异常 timeout 30
[DEBUG]2021-04-01 11:03:18,212: elevator thread start
[INFO]2021-04-01 11:03:18,238: load map E:\安捷利电梯项目\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap ,used 150 ms
[INFO]2021-04-01 11:03:18,251: start load map E:\安捷利电梯项目\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap
[INFO]2021-04-01 11:03:18,321: load map E:\安捷利电梯项目\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap ,used 81 ms
[INFO]2021-04-01 11:03:18,333: start load map E:\安捷利电梯项目\AKMfloor\agvCtrl\projects\AKMfloor\akmsmtMap.smap
[INFO]2021-04-01 11:03:18,586: load map E:\安捷利电梯项目\AKMfloor\agvCtrl\projects\AKMfloor\akmsmtMap.smap ,used 263 ms
[INFO]2021-04-01 11:03:18,592: import agvDevice.main_agvDevice
[INFO]2021-04-01 11:03:18,593: import alarm.main_alarm
[INFO]2021-04-01 11:03:18,596: import auth.main_auth
[INFO]2021-04-01 11:03:18,606: import door.main_door
[INFO]2021-04-01 11:03:18,612: import elevator.main_elevator
[INFO]2021-04-01 11:03:18,613: import feed.main_feed
[INFO]2021-04-01 11:03:18,626: create lock <lock name:feedTask.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BC9F6810>>
[INFO]2021-04-01 11:03:18,636: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BCA11330>>
[INFO]2021-04-01 11:03:19,355: import menu.main_menu
[INFO]2021-04-01 11:03:19,389: import pharmapackCtrl.main_scadaCtrl
[INFO]2021-04-01 11:03:19,483: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BD513A20>>
[INFO]2021-04-01 11:03:19,486: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDA7B6F0>>
[INFO]2021-04-01 11:03:19,493: import webFront.main_web
[INFO]2021-04-01 11:03:19,500: import wmqtt.main_wmqtt
[SUCC]2021-04-01 11:03:19,510: utility start, pid=11364, ppid=14404
[DEBUG]2021-04-01 11:03:19,519: start timer
[INFO]2021-04-01 11:03:19,531: load agv file: E:\安捷利电梯项目\AKMfloor\agvCtrl/projects/AKMfloor/agv.cfg
[INFO]2021-04-01 11:03:19,532: create lock <lock name:agvList.AGV02.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDA92570>>
[DEBUG]2021-04-01 11:03:19,537: create aliveObj AGV02 AGV离线异常 timeout 300
[INFO]2021-04-01 11:03:19,539: AGV02 start agvList run thread
[INFO]2021-04-01 11:03:19,540: AGV02 start agvList run2 thread
[INFO]2021-04-01 11:03:19,541: create lock <lock name:agv.AGV02.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAA510>>
[INFO]2021-04-01 11:03:19,544: create lock <lock name:agvList.AGV03.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAA450>>
[DEBUG]2021-04-01 11:03:19,545: try connect AGV02 192.168.20.182:19204
[DEBUG]2021-04-01 11:03:19,548: create aliveObj AGV03 AGV离线异常 timeout 300
[INFO]2021-04-01 11:03:19,550: AGV03 start agvList run thread
[INFO]2021-04-01 11:03:19,550: AGV03 start agvList run2 thread
[INFO]2021-04-01 11:03:19,550: add_ignore: taskStatus
[INFO]2021-04-01 11:03:19,551: create lock <lock name:agv.AGV03.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAABA0>>
[INFO]2021-04-01 11:03:19,554: add_ignore: api/elevator/status
[DEBUG]2021-04-01 11:03:19,555: try connect AGV03 192.168.20.183:19204
[INFO]2021-04-01 11:03:19,558: add_ignore: scada/getTask
[INFO]2021-04-01 11:03:19,672: AGV03 connected 192.168.20.183 19204
[INFO]2021-04-01 11:03:19,672: AGV02 connected 192.168.20.182 19204
[INFO]2021-04-01 11:03:19,674: create lock <lock name:agv.AGV03.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAABD0>>
[INFO]2021-04-01 11:03:19,677: create lock <lock name:agv.AGV02.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAA4E0>>
[DEBUG]2021-04-01 11:03:19,678: try connect AGV03 192.168.20.183:19205
[DEBUG]2021-04-01 11:03:19,679: try connect AGV02 192.168.20.182:19205
[INFO]2021-04-01 11:03:19,684: AGV03 connected 192.168.20.183 19205
[INFO]2021-04-01 11:03:19,685: create lock <lock name:agv.AGV03.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAAC90>>
[INFO]2021-04-01 11:03:19,686: AGV02 connected 192.168.20.182 19205
[DEBUG]2021-04-01 11:03:19,687: try connect AGV03 192.168.20.183:19206
[INFO]2021-04-01 11:03:19,688: create lock <lock name:agv.AGV02.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAA3F0>>
[DEBUG]2021-04-01 11:03:19,690: try connect AGV02 192.168.20.182:19206
[INFO]2021-04-01 11:03:19,692: AGV03 connected 192.168.20.183 19206
[INFO]2021-04-01 11:03:19,694: create lock <lock name:agv.AGV03.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAAC60>>
[DEBUG]2021-04-01 11:03:19,697: try connect AGV03 192.168.20.183:19207
[INFO]2021-04-01 11:03:19,710: AGV02 connected 192.168.20.182 19206
[INFO]2021-04-01 11:03:19,711: create lock <lock name:agv.AGV02.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAAA600>>
[INFO]2021-04-01 11:03:19,713: AGV03 connected 192.168.20.183 19207
[DEBUG]2021-04-01 11:03:19,716: try connect AGV02 192.168.20.182:19207
[INFO]2021-04-01 11:03:19,718: create lock <lock name:agv.AGV03.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAC77B0>>
[DEBUG]2021-04-01 11:03:19,720: try connect AGV03 192.168.20.183:19208
[INFO]2021-04-01 11:03:19,723: AGV02 connected 192.168.20.182 19207
[INFO]2021-04-01 11:03:19,725: create lock <lock name:agv.AGV02.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAC7840>>
[INFO]2021-04-01 11:03:19,725: AGV03 connected 192.168.20.183 19208
[DEBUG]2021-04-01 11:03:19,727: try connect AGV02 192.168.20.182:19208
[INFO]2021-04-01 11:03:19,730: create lock <lock name:agv.AGV03.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAC76F0>>
[DEBUG]2021-04-01 11:03:19,733: try connect AGV03 192.168.20.183:19210
[INFO]2021-04-01 11:03:19,738: AGV02 connected 192.168.20.182 19208
[INFO]2021-04-01 11:03:19,739: AGV03 connected 192.168.20.183 19210
[INFO]2021-04-01 11:03:19,740: create lock <lock name:agv.AGV02.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x00000249BDAC7930>>
[DEBUG]2021-04-01 11:03:19,742: try connect AGV02 192.168.20.182:19210
[INFO]2021-04-01 11:03:19,750: AGV02 connected 192.168.20.182 19210
[INFO]2021-04-01 11:03:19,763: AGV03 current map AKM2F
[INFO]2021-04-01 11:03:19,782: AGV02 current map AKM2F
[INFO]2021-04-01 11:03:19,797: AGV03 is online
[INFO]2021-04-01 11:03:20,009: AGV02 is online
[ERROR]2021-04-01 11:03:20,031: raise alarm obj=AGV02, typeId=49997, desc=小车置信度小于最低阈值,当前值:0.7203
[DEBUG]2021-04-01 11:03:21,555: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-04-01 11:03:21,560: scadaTask init client agvApi
[DEBUG]2021-04-01 11:03:21,565: used 11ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[DEBUG]2021-04-01 11:03:24,683: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-04-01 11:03:24,793: used 110ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[WARNING]2021-04-01 11:03:24,919: timer_thread[tid:6076] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=6076 count=1 at 0x00000249BD513A20>> ,hold 3369 ms
[INFO]2021-04-01 11:03:25,107: name=timer_thread, pid=11364, tid=6076
[01] File "E:/Users/Administrator/AppData/Local/Programs/Python/Python38/lib/threading.py", line 870, in run() 
[02] File "E:/安捷利电梯项目/AKMfloor/common/mytimer.py", line 113, in _loop() 
[03] File "E:/安捷利电梯项目/AKMfloor/common/lock.py", line 122, in _call() 
[04] File "E:/安捷利电梯项目/AKMfloor/common/lock.py", line 100, in release() 
[05] File "E:/安捷利电梯项目/AKMfloor/common/enhance.py", line 258, in getTrace() 
[06] File "E:/安捷利电梯项目/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[WARNING]2021-04-01 11:03:25,309: elevator: error timed out
[CRITICAL]2021-04-01 11:03:25,694: invoke <function urlElevatorstatus at 0x00000249BB584F70> cause a error: timed out
pid=11364, ppid=14404, tid=5448
Traceback (most recent call last):
  File "E:\安捷利电梯项目\AKMfloor\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "E:\安捷利电梯项目\AKMfloor\elevator\main_elevator.py", line 25, in urlElevatorstatus
    ret= elevatorInfo.status()
  File "..\elevator\elevatorMgr.py", line 114, in status
    return elevatorControl.getStatus(self.ip,self.port,id=0)
  File "..\elevator\elevatorControlFuzhou.py", line 180, in getStatus
    res = sendData(ip, port, buf)
  File "..\elevator\elevatorControlFuzhou.py", line 168, in sendData
    result = sendViaTcp(ip, port, buf, recvLen)
  File "..\elevator\elevatorControlFuzhou.py", line 45, in sendViaTcp
    raise e
  File "..\elevator\elevatorControlFuzhou.py", line 41, in sendViaTcp
    recData = client.recv(recvLen)
  File "E:\安捷利电梯项目\AKMfloor\common\tcpSocketAdvanced.py", line 39, in recv
    part_body = self._socket.recv(recvLen)
socket.timeout: timed out

[ERROR]2021-04-01 11:03:25,847: elevatorApi failed: timeout: timed out

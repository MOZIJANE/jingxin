[INFO]2021-03-25 13:47:39,931: log files at D:\python_work\AKMfloor\common\log
[INFO]2021-03-25 13:47:39,933: find module account.main_account
[INFO]2021-03-25 13:47:39,934: find module agvCtrl.main_agv
[INFO]2021-03-25 13:47:39,936: find module agvDevice.main_agvDevice
[INFO]2021-03-25 13:47:39,937: find module alarm.main_alarm
[INFO]2021-03-25 13:47:39,939: find module auth.main_auth
[INFO]2021-03-25 13:47:39,939: find module door.main_door
[INFO]2021-03-25 13:47:39,941: find module elevator.main_elevator
[INFO]2021-03-25 13:47:39,943: find module feed.main_feed
[INFO]2021-03-25 13:47:39,944: find module menu.main_menu
[INFO]2021-03-25 13:47:39,945: find module pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-25 13:47:39,947: find module webFront.main_web
[INFO]2021-03-25 13:47:39,949: find module wmqtt.main_wmqtt
[INFO]2021-03-25 13:47:39,950: import account.main_account
[INFO]2021-03-25 13:47:40,291: import agvCtrl.main_agv
[INFO]2021-03-25 13:47:41,424: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540001AE0>>
[INFO]2021-03-25 13:47:41,432: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540011420>>
[INFO]2021-03-25 13:47:41,855: create lock <lock name:timer.lock_2084136201520,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E54032AE70>>
[ERROR]2021-03-25 13:47:41,907: mqtt is disabled
[INFO]2021-03-25 13:47:41,907: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-25 13:47:41,908: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-25 13:47:44,954: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-25 13:47:45,018: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5405894B0>>
[INFO]2021-03-25 13:47:45,020: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E54057D870>>
[INFO]2021-03-25 13:47:45,934: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540593420>>
[INFO]2021-03-25 13:47:46,469: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540672450>>
[INFO]2021-03-25 13:47:46,476: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540714270>>
[INFO]2021-03-25 13:47:46,584: charge policy 1 , fix time
[INFO]2021-03-25 13:47:46,620: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540714E10>>
[INFO]2021-03-25 13:47:46,872: start load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap
[DEBUG]2021-03-25 13:47:47,260: elevator thread start
[INFO]2021-03-25 13:47:47,332: load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM2F.smap ,used 470 ms
[INFO]2021-03-25 13:47:47,353: start load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap
[INFO]2021-03-25 13:47:52,590: load map D:\python_work\AKMfloor\agvCtrl\projects\AKMfloor\AKM4F.smap ,used 5258 ms
[WARNING]2021-03-25 13:47:52,590: MainThread[tid:8472] <lock name:mapMgr.lock,<locked _thread.RLock object owner=8472 count=1 at 0x000001E540593420>> ,hold 5970 ms
[INFO]2021-03-25 13:47:52,591: name=MainThread, pid=2800, tid=8472
[01] File "D:/python_work/AKMfloor/common/run_all.py", line 57, in <module>() 
[02] File "D:/python_work/AKMfloor/common/run_all.py", line 39, in findModule() 
[03] File "<frozen importlib._bootstrap>", line 991, in _find_and_load() 
[04] File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked() 
[05] File "<frozen importlib._bootstrap>", line 671, in _load_unlocked() 
[06] File "<frozen importlib._bootstrap_external>", line 783, in exec_module() 
[07] File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed() 
[08] File "D:/python_work/AKMfloor/agvCtrl/main_agv.py", line 22, in <module>() 
[09] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[10] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[11] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[12] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-03-25 13:47:52,595: import agvDevice.main_agvDevice
[INFO]2021-03-25 13:47:52,595: import alarm.main_alarm
[INFO]2021-03-25 13:47:52,595: import auth.main_auth
[INFO]2021-03-25 13:47:52,610: import door.main_door
[INFO]2021-03-25 13:47:52,614: import elevator.main_elevator
[INFO]2021-03-25 13:47:52,615: import feed.main_feed
[INFO]2021-03-25 13:47:52,636: create lock <lock name:feedTask.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540A257B0>>
[INFO]2021-03-25 13:47:52,645: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E540A2E3C0>>
[INFO]2021-03-25 13:47:54,727: import menu.main_menu
[INFO]2021-03-25 13:47:54,732: import pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-25 13:47:54,862: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5411E1F00>>
[INFO]2021-03-25 13:47:54,862: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5411F7930>>
[INFO]2021-03-25 13:47:54,874: recover can release agv *task[605b0b130ec4da80b657ee3b][AGV01] AP27(LM19) -> AP2(LM3) [finish]
[INFO]2021-03-25 13:47:54,875: import webFront.main_web
[INFO]2021-03-25 13:47:54,881: import wmqtt.main_wmqtt
[SUCC]2021-03-25 13:47:54,896: utility start, pid=2800, ppid=9204
[DEBUG]2021-03-25 13:47:54,896: start timer
[INFO]2021-03-25 13:47:54,910: load agv file: D:\python_work\AKMfloor\agvCtrl/projects/AKMfloor/agv.cfg
[INFO]2021-03-25 13:47:54,911: create lock <lock name:agvList.AGV03.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E541280810>>
[DEBUG]2021-03-25 13:47:54,914: create aliveObj AGV03 AGV离线异常 timeout 300
[INFO]2021-03-25 13:47:54,914: AGV03 start agvList run thread
[INFO]2021-03-25 13:47:54,914: create lock <lock name:agv.AGV03.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5412E60F0>>
[DEBUG]2021-03-25 13:47:54,915: try connect AGV03 192.168.20.182:19204
[INFO]2021-03-25 13:47:54,915: AGV03 start agvList run2 thread
[INFO]2021-03-25 13:47:54,920: add_ignore: taskStatus
[INFO]2021-03-25 13:47:54,920: add_ignore: api/elevator/status
[INFO]2021-03-25 13:47:54,920: add_ignore: scada/getTask
[INFO]2021-03-25 13:47:54,921: AGV03 connected 192.168.20.182 19204
[INFO]2021-03-25 13:47:54,921: create lock <lock name:agv.AGV03.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5412E6120>>
[DEBUG]2021-03-25 13:47:54,921: try connect AGV03 192.168.20.182:19205
[INFO]2021-03-25 13:47:54,936: AGV03 connected 192.168.20.182 19205
[INFO]2021-03-25 13:47:54,936: create lock <lock name:agv.AGV03.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5412E6150>>
[DEBUG]2021-03-25 13:47:54,937: try connect AGV03 192.168.20.182:19206
[INFO]2021-03-25 13:47:55,035: AGV03 connected 192.168.20.182 19206
[INFO]2021-03-25 13:47:55,036: create lock <lock name:agv.AGV03.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5412E61E0>>
[DEBUG]2021-03-25 13:47:55,037: try connect AGV03 192.168.20.182:19207
[INFO]2021-03-25 13:47:55,053: AGV03 connected 192.168.20.182 19207
[INFO]2021-03-25 13:47:55,054: create lock <lock name:agv.AGV03.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5412E63C0>>
[DEBUG]2021-03-25 13:47:55,054: try connect AGV03 192.168.20.182:19208
[INFO]2021-03-25 13:47:55,058: AGV03 connected 192.168.20.182 19208
[INFO]2021-03-25 13:47:55,058: create lock <lock name:agv.AGV03.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x000001E5412805A0>>
[DEBUG]2021-03-25 13:47:55,059: try connect AGV03 192.168.20.182:19210
[INFO]2021-03-25 13:47:55,137: AGV03 connected 192.168.20.182 19210
[INFO]2021-03-25 13:47:55,240: AGV03 current map AKM4F
[INFO]2021-03-25 13:47:55,263: AGV03 is online
[INFO]2021-03-25 13:47:56,905: startCharge is false
[CRITICAL]2021-03-25 13:47:58,950: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2800, ppid=9204, tid=7276
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 13:48:01,995: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2800, ppid=9204, tid=7276
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 13:48:05,043: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2800, ppid=9204, tid=7276
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-03-25 13:48:08,078: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=2800, ppid=9204, tid=7276
Traceback (most recent call last):
  File "C:\Python38\lib\urllib\request.py", line 1317, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "C:\Python38\lib\http\client.py", line 1230, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1276, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1225, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python38\lib\http\client.py", line 1004, in _send_output
    self.send(msg)
  File "C:\Python38\lib\http\client.py", line 944, in send
    self.connect()
  File "C:\Python38\lib\http\client.py", line 915, in connect
    self.sock = self._create_connection(
  File "C:\Python38\lib\socket.py", line 807, in create_connection
    raise err
  File "C:\Python38\lib\socket.py", line 796, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python38\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python38\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python38\lib\urllib\request.py", line 542, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "C:\Python38\lib\urllib\request.py", line 502, in _call_chain
    result = func(*args)
  File "C:\Python38\lib\urllib\request.py", line 1346, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python38\lib\urllib\request.py", line 1320, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "D:\python_work\AKMfloor\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "D:\python_work\AKMfloor\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[DEBUG]2021-03-25 13:48:09,095: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-03-25 13:48:09,096: scadaTask init client agvApi
[DEBUG]2021-03-25 13:48:09,099: used 4ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[DEBUG]2021-03-25 13:48:12,159: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-03-25 13:48:12,178: used 19ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[WARNING]2021-03-25 13:48:12,202: timer_thread[tid:7276] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=7276 count=1 at 0x000001E5411E1F00>> ,hold 15296 ms
[INFO]2021-03-25 13:48:12,252: name=timer_thread, pid=2800, tid=7276
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_work/AKMfloor/common/mytimer.py", line 113, in _loop() 
[03] File "D:/python_work/AKMfloor/common/lock.py", line 122, in _call() 
[04] File "D:/python_work/AKMfloor/common/lock.py", line 100, in release() 
[05] File "D:/python_work/AKMfloor/common/enhance.py", line 258, in getTrace() 
[06] File "D:/python_work/AKMfloor/common/enhance.py", line 240, in getThreadStack()
[WARNING]2021-03-25 13:48:13,362: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[INFO]2021-03-25 13:48:13,381: AGV03 battery 0.476 check success
[WARNING]2021-03-25 13:48:13,404: AGV03 Can't find charge point at AKM4F battery: 0.476
[WARNING]2021-03-25 13:48:23,641: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[INFO]2021-03-25 13:48:23,674: AGV03 battery 0.476 check success
[WARNING]2021-03-25 13:48:23,680: AGV03 Can't find charge point at AKM4F battery: 0.476
[WARNING]2021-03-25 13:48:33,912: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[INFO]2021-03-25 13:48:33,932: AGV03 battery 0.476 check success
[WARNING]2021-03-25 13:48:33,944: AGV03 Can't find charge point at AKM4F battery: 0.476
[WARNING]2021-03-25 13:48:44,141: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[INFO]2021-03-25 13:48:44,166: AGV03 battery 0.476 check success
[WARNING]2021-03-25 13:48:44,235: AGV03 Can't find charge point at AKM4F battery: 0.476
[WARNING]2021-03-25 13:48:54,408: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[INFO]2021-03-25 13:48:54,428: AGV03 battery 0.476 check success
[WARNING]2021-03-25 13:48:54,439: AGV03 Can't find charge point at AKM4F battery: 0.476
[DEBUG]2021-03-25 13:48:56,953: GET: http://192.168.20.48:5551/api/manual/seat addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:56,976: GET: http://192.168.20.48:5551/api/manual/tasklist addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:56,978: GET: http://192.168.20.48:5551/api/manual/tasklist addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:57,021: used 43ms 200 OK application/json;charset=utf-8, GET: http://192.168.20.48:5551/api/manual/seat
[DEBUG]2021-03-25 13:48:57,023: GET: http://192.168.20.48:5551/api/manual/seat addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:57,065: GET: http://192.168.20.48:5551/api/manual/seat addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:57,074: GET: http://192.168.20.48:5551/api/manual/seat addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:57,083: GET: http://192.168.20.48:5551/api/manual/seat addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:57,095: used 11ms 200 OK application/json;charset=utf-8, GET: http://192.168.20.48:5551/api/manual/tasklist
[DEBUG]2021-03-25 13:48:57,260: GET: http://192.168.20.48:5551/api/agv/agvStatusList?mapId=AKM2F addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:57,291: used 31ms 200 OK application/json;charset=utf-8, GET: http://192.168.20.48:5551/api/agv/agvStatusList?mapId=AKM2F
[DEBUG]2021-03-25 13:48:57,349: GET: http://192.168.20.48:5551/api/agv/agvStatusList?mapId=AKM2F addr: 192.168.20.60
[DEBUG]2021-03-25 13:48:57,356: used 7ms 200 OK application/json;charset=utf-8, GET: http://192.168.20.48:5551/api/agv/agvStatusList?mapId=AKM2F
[WARNING]2021-03-25 13:49:04,600: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[INFO]2021-03-25 13:49:04,624: AGV03 battery 0.476 check success
[WARNING]2021-03-25 13:49:04,624: AGV03 Can't find charge point at AKM4F battery: 0.476
[DEBUG]2021-03-25 13:49:08,086: GET: http://192.168.20.48:5551/api/scada/addTask?source=%E5%9B%9B%E6%A5%BCTest1&target=%E5%9B%9B%E6%A5%BCTest2 addr: 192.168.20.60
[INFO]2021-03-25 13:49:08,101: Scada send a task to the server from 四楼Test1 to 四楼Test2 payloadId: None
[INFO]2021-03-25 13:49:08,195: create task[605c24548f0ddbc349ddb396]: type= scadaTask , 从四楼Test1运送货架到四楼Test2 {'source': '四楼Test1', 'target': '四楼Test2', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从四楼Test1运送货架到四楼Test2', 'createTime': datetime.datetime(2021, 3, 25, 13, 49, 8, 127744), 'updateTime': datetime.datetime(2021, 3, 25, 13, 49, 8, 127744), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('605c24548f0ddbc349ddb396')}
[INFO]2021-03-25 13:49:08,294: task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waiting] is inside False
[INFO]2021-03-25 13:49:08,307: task cmd: got a task from scada task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waiting]
[DEBUG]2021-03-25 13:49:08,345: used 259ms 200 OK application/json;charset=utf-8, GET: http://192.168.20.48:5551/api/scada/addTask?source=%E5%9B%9B%E6%A5%BCTest1&target=%E5%9B%9B%E6%A5%BCTest2
[INFO]2021-03-25 13:49:08,691: task[605c24548f0ddbc349ddb396]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 3, 25, 13, 49, 8, 667696), 'updateTime': datetime.datetime(2021, 3, 25, 13, 49, 8, 667696), 'status': 'running'}
[INFO]2021-03-25 13:49:08,714: task: start task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waiting]
[INFO]2021-03-25 13:49:08,739: task[605c24548f0ddbc349ddb396] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 3, 25, 13, 49, 8, 732038)}
[DEBUG]2021-03-25 13:49:08,756: task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waitForAgv] waiting -> waitForAgv
[DEBUG]2021-03-25 13:49:10,166: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=AP13&mapId=AKM4F&taskId=605c24548f0ddbc349ddb396&timeout=10 addr: 127.0.0.1
[INFO]2021-03-25 13:49:11,473: apply AGV03 ,taskId: 605c24548f0ddbc349ddb396 ,loc AKM4F.AP13 ,autoLock False , used 1281 ms
[DEBUG]2021-03-25 13:49:11,544: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV03&appName=scadaTask&taskId=605c24548f0ddbc349ddb396 addr: 127.0.0.1
[DEBUG]2021-03-25 13:49:11,557: lock:  AGV03 taskId 605c24548f0ddbc349ddb396 app scadaTask
[WARNING]2021-03-25 13:49:12,569: AGV03 clear task finish, cur= AKM4F.LM12 task_status= 4
[DEBUG]2021-03-25 13:49:12,625: used 1081ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV03&appName=scadaTask&taskId=605c24548f0ddbc349ddb396
[INFO]2021-03-25 13:49:12,685: task[605c24548f0ddbc349ddb396][-] AP13(LM15) -> AP14(LM16) [waitForAgv] apply AGV03
[INFO]2021-03-25 13:49:12,707: task[605c24548f0ddbc349ddb396] update info: {'agvId': 'AGV03', 'failMsg': '成功分配小车AGV03,检测顶升下降', 'updateTime': datetime.datetime(2021, 3, 25, 13, 49, 12, 693138)}
[DEBUG]2021-03-25 13:49:12,729: task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [initJackdown] waitForAgv -> initJackdown
[INFO]2021-03-25 13:49:13,074: task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [initJackdown] _jackDown
[DEBUG]2021-03-25 13:49:13,091: send http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 13:49:13,156: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-25 13:49:14,481: _jack in jackMgr: AGV03 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}, {'id': 2, 'source': 'normal', 'status': True}, {'id': 3, 'source': 'normal', 'status': True}, {'id': 4, 'source': 'normal', 'status': True}, {'id': 5, 'source': 'normal', 'status': True}, {'id': 6, 'source': 'normal', 'status': True}, {'id': 7, 'source': 'normal', 'status': True}, {'id': 17, 'source': 'reserve', 'status': False}, {'id': 20, 'source': 'modbus', 'status': False}, {'id': 21, 'source': 'modbus', 'status': False}, {'id': 22, 'source': 'modbus', 'status': False}, {'id': 23, 'source': 'modbus', 'status': False}, {'id': 24, 'source': 'modbus', 'status': False}, {'id': 25, 'source': 'modbus', 'status': False}, {'id': 26, 'source': 'modbus', 'status': False}, {'id': 27, 'source': 'modbus', 'status': False}, {'id': 30, 'source': 'modbus', 'status': False}, {'id': 31, 'source': 'modbus', 'status': False}, {'id': 32, 'source': 'modbus', 'status': True}, {'id': 33, 'source': 'modbus', 'status': True}, {'id': 34, 'source': 'modbus', 'status': False}, {'id': 35, 'source': 'modbus', 'status': False}, {'id': 36, 'source': 'modbus', 'status': False}, {'id': 37, 'source': 'modbus', 'status': True}]
[INFO]2021-03-25 13:49:14,582: AGV03 jack down status:  True
[DEBUG]2021-03-25 13:49:14,596: used 1440ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[DEBUG]2021-03-25 13:49:14,622: [return] use 1531 ms,http_get: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV03&loc=None&timeoutSec=90
[INFO]2021-03-25 13:49:14,658: task[605c24548f0ddbc349ddb396] update info: {'failMsg': '前往四楼Test1工位点拉取货架', 'updateTime': datetime.datetime(2021, 3, 25, 13, 49, 14, 640255)}
[DEBUG]2021-03-25 13:49:14,676: task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [startMoveJackup] initJackdown -> startMoveJackup
[WARNING]2021-03-25 13:49:14,839: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[WARNING]2021-03-25 13:49:14,863: AGV03 battery 0.476 check failed: isLocked
[DEBUG]2021-03-25 13:49:15,069: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV03&agvId=AGV03&appName=scadaTask&direction=None&floorId=AKM4F&isRotate&loc=AKM4F.AP13&location=AP13&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=605c24548f0ddbc349ddb396_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True addr: 127.0.0.1
[INFO]2021-03-25 13:49:15,079: Begin: AGV03 move from AKM4F.LM12 to AKM4F.AP13 by paths: [('AKM4F', ['LM12', 'LM11', 'LM10', 'LM9', 'LM15', 'AP13'], 12.074)] task: 605c24548f0ddbc349ddb396_2 timeout 86400 used 9 ms
[DEBUG]2021-03-25 13:49:15,079: used 10ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV03&agvId=AGV03&appName=scadaTask&direction=None&floorId=AKM4F&isRotate&loc=AKM4F.AP13&location=AP13&p_direction=0.0&pgv_type=1&recognize=False&seer_jackup=JackLoad&taskId=605c24548f0ddbc349ddb396_2&taskType=scadaTask&timeoutSec=86400&use_pgv=True
[DEBUG]2021-03-25 13:49:15,080: task[605c24548f0ddbc349ddb396][AGV03] AP13(LM15) -> AP14(LM16) [loadPlayload] startMoveJackup -> loadPlayload
[DEBUG]2021-03-25 13:49:15,675: agvInfo: AGV03 AKM4F.LM12 move to AKM4F.LM11 ,taskId 605c24548f0ddbc349ddb396_2
[INFO]2021-03-25 13:49:15,676: goTarget {'id': 'LM11'}
[DEBUG]2021-03-25 13:49:16,383: AGV03 choise next pos cur LM12 next LM10 pre LM11 8.029 True
[DEBUG]2021-03-25 13:49:16,384: AGV03 choise next pos cur LM12 next LM9 pre LM10 9.874 False
[DEBUG]2021-03-25 13:49:16,384: AGV03 turn to wait check cur LM12 next LM9 9.874 False
[DEBUG]2021-03-25 13:49:16,933: agvInfo: AGV03 AKM4F.LM12 move to AKM4F.LM9 ,taskId 605c24548f0ddbc349ddb396_2
[INFO]2021-03-25 13:49:16,933: goTarget {'id': 'LM9'}
[WARNING]2021-03-25 13:49:24,940: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[WARNING]2021-03-25 13:49:24,941: AGV03 battery 0.476 check failed: isLocked
[DEBUG]2021-03-25 13:49:30,350: AGV03 set loc AKM4F.LM10 ,old LM12 (-8.07,-4.42)
[DEBUG]2021-03-25 13:49:31,742: AGV03 turn to wait check cur LM10 next LM15 0.871 False
[DEBUG]2021-03-25 13:49:32,281: agvInfo: AGV03 AKM4F.LM10 move to AKM4F.LM15 ,taskId 605c24548f0ddbc349ddb396_2
[INFO]2021-03-25 13:49:32,282: goTarget {'id': 'LM15'}
[DEBUG]2021-03-25 13:49:33,271: AGV03 set loc AKM4F.LM9 ,old LM10 (-9.81,-4.42)
[DEBUG]2021-03-25 13:49:33,540: AGV03 choise next pos cur LM9 next AP13 pre LM15 2.200 False
[DEBUG]2021-03-25 13:49:33,547: AGV03 turn to wait check cur LM9 next AP13 2.200 False
[DEBUG]2021-03-25 13:49:34,129: agvInfo: AGV03 AKM4F.LM9 move jackup to AKM4F.AP13 ,taskId 605c24548f0ddbc349ddb396_2
[WARNING]2021-03-25 13:49:34,975: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[WARNING]2021-03-25 13:49:34,975: AGV03 battery 0.476 check failed: isLocked
[DEBUG]2021-03-25 13:49:41,314: AGV03 set loc AKM4F.LM15 ,old LM9 (-9.89,-3.53)
[WARNING]2021-03-25 13:49:41,967: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 13:49:42,468: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 13:49:42,970: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 13:49:43,475: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 13:49:44,002: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 13:49:44,504: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 13:49:45,007: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[WARNING]2021-03-25 13:49:45,016: AGV03 low battery charge,batteryLevel= 0.476 start charge level= 0.500
[WARNING]2021-03-25 13:49:45,017: AGV03 battery 0.476 check failed: isLocked
[WARNING]2021-03-25 13:49:45,511: AGV03 waitFinish: loc is diff LM15 AP13 task_status= 2
[DEBUG]2021-03-25 13:49:45,716: AGV03 set loc AKM4F.AP13 ,old LM15 (-9.89,-2.31)
[INFO]2021-03-25 13:49:46,913: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[ERROR]2021-03-25 13:49:46,930: raise alarm obj=AGV03, typeId=54070, desc=AGV异常, id=605c247a07e2e631304f40a8
[WARNING]2021-03-25 13:49:47,046: AGV03 moveJackup error: Cannot Find PGV code：{54070}
[INFO]2021-03-25 13:49:47,490: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:48,038: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:48,049: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[WARNING]2021-03-25 13:49:48,552: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:48,591: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:49,129: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:49,562: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:49,695: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:50,252: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:50,586: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:50,808: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:51,358: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:51,592: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:51,894: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:52,424: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:52,608: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:52,966: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:53,555: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:53,614: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:54,097: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:54,652: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:55,075: AGV03 low battery charge,batteryLevel= 0.472 start charge level= 0.500
[WARNING]2021-03-25 13:49:55,076: AGV03 battery 0.472 check failed: isLocked
[WARNING]2021-03-25 13:49:55,128: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:55,200: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:55,738: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:56,133: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:56,284: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:56,957: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:57,137: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:57,511: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:58,129: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:58,140: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[WARNING]2021-03-25 13:49:58,642: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:58,714: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:49:59,273: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:49:59,645: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:49:59,823: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:50:00,357: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:50:00,652: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:50:00,886: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[INFO]2021-03-25 13:50:01,539: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]
[WARNING]2021-03-25 13:50:01,658: AGV03 moveJackup error: Cannot Find PGV code2：{54070}
[INFO]2021-03-25 13:50:02,136: get 54901 warnings: AGV03 [{'54070': 1616651642, 'desc': 'PGV cannot find code', 'times': 1}]

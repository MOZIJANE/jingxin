[INFO]2021-06-12 19:42:18,462: log files at C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\log
[INFO]2021-06-12 19:42:18,463: find module account.main_account
[INFO]2021-06-12 19:42:18,463: find module agvCtrl.main_agv
[INFO]2021-06-12 19:42:18,464: find module agvDevice.main_agvDevice
[INFO]2021-06-12 19:42:18,464: find module akmCtrl.main_akmCtrl
[INFO]2021-06-12 19:42:18,465: find module alarm.main_alarm
[INFO]2021-06-12 19:42:18,465: find module auth.main_auth
[INFO]2021-06-12 19:42:18,466: find module door.main_door
[INFO]2021-06-12 19:42:18,467: find module elevator.main_elevator
[INFO]2021-06-12 19:42:18,467: find module feed.main_feed
[INFO]2021-06-12 19:42:18,468: find module remoteio.main_remoteio
[INFO]2021-06-12 19:42:18,468: import account.main_account
[INFO]2021-06-12 19:42:18,600: import agvCtrl.main_agv
[INFO]2021-06-12 19:42:19,480: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000204966FEDA0>>
[INFO]2021-06-12 19:42:19,523: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000204966FEF08>>
[INFO]2021-06-12 19:42:19,729: create lock <lock name:timer.lock_2218731069792,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020496A74BC0>>
[ERROR]2021-06-12 19:42:19,749: mqtt is disabled
[INFO]2021-06-12 19:42:19,750: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-12 19:42:19,750: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-12 19:42:22,865: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-12 19:42:22,923: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020496D38080>>
[WARNING]2021-06-12 19:42:22,948: use mockAgvCtrl
[INFO]2021-06-12 19:42:22,953: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020494F3DC88>>
[INFO]2021-06-12 19:42:23,302: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020496DE9030>>
[INFO]2021-06-12 19:42:23,308: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020496DE9F58>>
[INFO]2021-06-12 19:42:23,365: charge policy 1 , fix time
[INFO]2021-06-12 19:42:23,397: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020496E62080>>
[INFO]2021-06-12 19:42:24,061: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap
[DEBUG]2021-06-12 19:42:24,225: elevator thread start
[INFO]2021-06-12 19:42:24,267: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\AKM2F.smap ,used 214 ms
[INFO]2021-06-12 19:42:24,278: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap
[INFO]2021-06-12 19:42:24,347: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmt.smap ,used 79 ms
[INFO]2021-06-12 19:42:24,358: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap
[INFO]2021-06-12 19:42:24,497: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\akmsmtMap.smap ,used 149 ms
[INFO]2021-06-12 19:42:24,508: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap
[INFO]2021-06-12 19:42:24,641: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\desai-all-20191223.smap ,used 142 ms
[INFO]2021-06-12 19:42:24,651: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap
[INFO]2021-06-12 19:42:24,735: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei423.smap ,used 92 ms
[INFO]2021-06-12 19:42:24,745: start load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap
[INFO]2021-06-12 19:42:24,810: load map C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl\projects\test\meiwei428.smap ,used 74 ms
[INFO]2021-06-12 19:42:24,814: import agvDevice.main_agvDevice
[INFO]2021-06-12 19:42:24,815: import akmCtrl.main_akmCtrl
[INFO]2021-06-12 19:42:24,840: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020497217F08>>
[INFO]2021-06-12 19:42:24,895: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000204972B13A0>>
[INFO]2021-06-12 19:42:24,932: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020497217C10>>
[INFO]2021-06-12 19:42:24,946: create lock <lock name:timer.lock_2218813422392,<unlocked _thread.RLock object owner=0 count=0 at 0x00000204971FB2D8>>
[INFO]2021-06-12 19:42:24,948: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020495B381C0>>
[INFO]2021-06-12 19:42:25,000: import alarm.main_alarm
[INFO]2021-06-12 19:42:25,005: import auth.main_auth
[INFO]2021-06-12 19:42:25,013: import door.main_door
[INFO]2021-06-12 19:42:25,020: import elevator.main_elevator
[INFO]2021-06-12 19:42:25,025: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020495B38AD0>>
[INFO]2021-06-12 19:42:25,027: import feed.main_feed
[INFO]2021-06-12 19:42:25,036: IP: 0.0.0.0 port: 10001
[INFO]2021-06-12 19:42:25,037: import remoteio.main_remoteio
[SUCC]2021-06-12 19:42:25,051: utility start, pid=5828, ppid=12816
[DEBUG]2021-06-12 19:42:25,052: start timer
[INFO]2021-06-12 19:42:25,067: load agv file: C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-12 19:42:25,068: create lock <lock name:agvList.AGV30.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000204973354E0>>
[DEBUG]2021-06-12 19:42:25,070: create aliveObj AGV30 AGV离线异常 timeout 300
[INFO]2021-06-12 19:42:25,072: AGV30 start agvList run thread
[INFO]2021-06-12 19:42:25,072: AGV30 start agvList run2 thread
[DEBUG]2021-06-12 19:42:25,083: start timer
[INFO]2021-06-12 19:42:25,086: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.3.105:10001 <--> 192.168.3.106:50375
[INFO]2021-06-12 19:42:25,087: **************回复线程启动**************
[ERROR]2021-06-12 19:42:25,092: agv check init error False
[WARNING]2021-06-12 19:42:25,103: Local server start! version 3.7.3, path C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common, pid 5828
[INFO]2021-06-12 19:42:25,109: add_ignore: taskStatus
[INFO]2021-06-12 19:42:25,110: add_ignore: api/elevator/status
[INFO]2021-06-12 19:42:25,111: add_ignore: scada/getTask
[INFO]2021-06-12 19:42:25,967: AGV30 current map meiwei428
[INFO]2021-06-12 19:42:26,017: AGV30 is online
[DEBUG]2021-06-12 19:42:26,604: GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask addr: 127.0.0.1
[INFO]2021-06-12 19:42:26,607: MeiWeiTask init client agvApi
[DEBUG]2021-06-12 19:42:26,609: used 5ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=MeiWeiTask
[DEBUG]2021-06-12 19:42:29,780: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask addr: 127.0.0.1
[DEBUG]2021-06-12 19:42:29,856: used 76ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=MeiWeiTask
[WARNING]2021-06-12 19:42:29,951: timer_thread[tid:14508] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=14508 count=1 at 0x0000020497217F08>> ,hold 3861 ms
[INFO]2021-06-12 19:42:30,250: name=timer_thread, pid=5828, tid=14508
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "../common/mytimer.py", line 113, in _loop() 
[03] File "../common/lock.py", line 122, in _call() 
[04] File "../common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/美维/MeiWei_back_0421/common/enhance.py", line 240, in getThreadStack()
[INFO]2021-06-12 19:42:34,736: 1
[INFO]2021-06-12 19:42:34,943: {'21': {'loc': '宸ヤ1', 'map': 'test'}, '23': {'loc': '宸ヤ2', 'map': 'test'}}
[INFO]2021-06-12 19:42:34,989: 测试添加任务，起点和目的地，固化在下面的方法中
[INFO]2021-06-12 19:42:35,053: 宸ヤ2
[INFO]2021-06-12 19:42:35,146: source 起点8
[INFO]2021-06-12 19:42:35,178: target 宸ヤ2
[INFO]2021-06-12 19:42:35,209: ---------------------runTask01--------------------addTaskByButton-----
[INFO]2021-06-12 19:42:35,303: ----------------------scadaTask----------------
[INFO]2021-06-12 19:42:35,399: 起点8 宸ヤ2
[INFO]2021-06-12 19:42:35,493: create task[60c49dab1471afd69653ab6f]: type= scadaTask , 从起点8运送货架到宸ヤ2 {'source': '起点8', 'target': '宸ヤ2', 'payloadId': None, 'priority': 1, 'type': 'scadaTask', 'taskName': '从起点8运送货架到宸ヤ2', 'createTime': datetime.datetime(2021, 6, 12, 19, 42, 35, 462325), 'updateTime': datetime.datetime(2021, 6, 12, 19, 42, 35, 462325), 'startTime': None, 'endTime': None, 'status': 'waiting', 'step': 'waiting', 'failMsg': None, 'history': [], '_id': ObjectId('60c49dab1471afd69653ab6f')}
[INFO]2021-06-12 19:42:35,587: 60c49dab1471afd69653ab6f
[WARNING]2021-06-12 19:42:35,745: task[60c49dab1471afd69653ab6f]: failed, {'failMsg': "can't find target-宸ヤ2 info", 'endTime': datetime.datetime(2021, 6, 12, 19, 42, 35, 730244), 'status': 'fail'}
[INFO]2021-06-12 19:42:35,809: {'prepoint': '', 'location': '8', 'floorId': 'meiwei428', 'direction': None, 'payloadId': None, 'p_direction': 0.0, 'WorkPlace': 'true'}
[INFO]2021-06-12 19:42:35,917: task[60c49dab1471afd69653ab6f]:  start {'failMsg': '任务等待执行', 'startTime': datetime.datetime(2021, 6, 12, 19, 42, 35, 870870), 'updateTime': datetime.datetime(2021, 6, 12, 19, 42, 35, 870870), 'status': 'running'}
[INFO]2021-06-12 19:42:36,042: task[60c49dab1471afd69653ab6f] update info: {'failMsg': '等待分配小车', 'updateTime': datetime.datetime(2021, 6, 12, 19, 42, 36, 27438)}
[CRITICAL]2021-06-12 19:42:36,150: invoke <function scadaTask._taskFunc at 0x0000020495B23620> cause a error: 'NoneType' object is not subscriptable
pid=5828, ppid=12816, tid=8484
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskBean.py", line 807, in _taskFunc
    log.debug(str(self), old, "->", self.taskStep)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskBean.py", line 167, in __str__
    self.taskId, a, self.s_info["location"], self.s_info["prepoint"], self.t_info["location"],
TypeError: 'NoneType' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "..\common\utility.py", line 167, in __call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskBean.py", line 813, in _taskFunc
    log.exception("taskFunc2:" + str(self), e)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\akmCtrl\beans\scadaTaskBean.py", line 167, in __str__
    self.taskId, a, self.s_info["location"], self.s_info["prepoint"], self.t_info["location"],
TypeError: 'NoneType' object is not subscriptable

[INFO]2021-06-12 19:42:40,344: 0
[CRITICAL]2021-06-12 19:42:50,648: 192.168.3.105:10001 <--> 192.168.3.106:50375 time out cause a error: <tcpSocket.client object at 0x0000020497318AC8>
pid=5828, ppid=12816, tid=14456
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out

[INFO]2021-06-12 19:42:50,708: tcp server [0.0.0.0][10001] ,connectedLen: 1, disconnect:  192.168.3.105:10001 <--> 192.168.3.106:50375
[WARNING]2021-06-12 19:42:50,756: disconnect 192.168.3.105:10001 <--> 192.168.3.106:50375
[INFO]2021-06-12 19:42:50,850: tcp server [0.0.0.0][10001] ,connectedLen: 1, tcp connected 192.168.3.105:10001 <--> 192.168.3.106:50376
[INFO]2021-06-12 19:42:50,927: **************回复线程启动**************
[CRITICAL]2021-06-12 19:43:01,001: 192.168.3.105:10001 <--> 192.168.3.106:50376 time out cause a error: <tcpSocket.client object at 0x000002049736F5C0>
pid=5828, ppid=12816, tid=5612
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\feed\main_feed.py", line 131, in _handle
    data = client.recv(6)
  File "C:\Users\Administrator\Desktop\SVN\美维\MeiWei_back_0421\common\tcpSocket.py", line 179, in recv
    recvdata = self._socket.recv(bufferLen if remainLen > bufferLen else remainLen)
socket.timeout: timed out


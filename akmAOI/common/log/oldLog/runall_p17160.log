[INFO]2021-03-02 15:38:38,810: log files at D:\python_lx\akm\common\log
[INFO]2021-03-02 15:38:38,812: find module agvCtrl.main_agv
[INFO]2021-03-02 15:38:38,813: find module agvDevice.main_agvDevice
[INFO]2021-03-02 15:38:38,813: find module alarm.main_alarm
[INFO]2021-03-02 15:38:38,815: find module auth.main_auth
[INFO]2021-03-02 15:38:38,815: find module button.main_button
[INFO]2021-03-02 15:38:38,816: find module door.main_door
[INFO]2021-03-02 15:38:38,816: find module elevator.main_elevator
[INFO]2021-03-02 15:38:38,818: find module virtualDoor.main_doorCtrl
[INFO]2021-03-02 15:38:38,818: import agvCtrl.main_agv
[INFO]2021-03-02 15:38:40,311: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4A45C690>>
[INFO]2021-03-02 15:38:40,327: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4A45CED0>>
[INFO]2021-03-02 15:38:40,619: create lock <lock name:timer.lock_2535280044112,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4A776990>>
[ERROR]2021-03-02 15:38:40,654: mqtt is disabled
[INFO]2021-03-02 15:38:40,655: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-02 15:38:40,655: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-02 15:38:43,745: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-02 15:38:43,805: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4A9FFD80>>
[INFO]2021-03-02 15:38:43,806: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4A9FF6C0>>
[INFO]2021-03-02 15:38:43,808: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4A9F2AE0>>
[INFO]2021-03-02 15:38:43,839: create lock <lock name:agvserver,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4AA40EA0>>
[INFO]2021-03-02 15:38:44,868: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4AA07BA0>>
[INFO]2021-03-02 15:38:46,004: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4AAEC8A0>>
[INFO]2021-03-02 15:38:46,012: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4ABA1270>>
[INFO]2021-03-02 15:38:46,208: charge policy 0 , fix time
[INFO]2021-03-02 15:38:46,331: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4ABA1E40>>
[INFO]2021-03-02 15:38:47,494: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap
[DEBUG]2021-03-02 15:38:47,963: elevator thread start
[INFO]2021-03-02 15:38:48,034: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap ,used 563 ms
[INFO]2021-03-02 15:38:48,061: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap
[INFO]2021-03-02 15:38:48,241: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap ,used 206 ms
[INFO]2021-03-02 15:38:48,271: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap
[INFO]2021-03-02 15:38:48,507: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap ,used 265 ms
[INFO]2021-03-02 15:38:48,537: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap
[DEBUG]2021-03-02 15:38:48,996: create aliveObj SK_DOOR 门控离线异常 timeout 60
[DEBUG]2021-03-02 15:38:48,997: create aliveObj DDT_DOOR03 门控离线异常 timeout 60
[INFO]2021-03-02 15:38:49,063: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap ,used 556 ms
[INFO]2021-03-02 15:38:49,094: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap
[INFO]2021-03-02 15:38:49,390: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap ,used 326 ms
[INFO]2021-03-02 15:38:49,419: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap
[INFO]2021-03-02 15:38:49,613: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap ,used 223 ms
[INFO]2021-03-02 15:38:49,638: start load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap
[INFO]2021-03-02 15:38:49,761: load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap ,used 147 ms
[WARN]2021-03-02 15:38:49,762: MainThread[tid:4608] <lock name:mapMgr.lock,<locked _thread.RLock object owner=4608 count=1 at 0x0000024E4AA07BA0>> ,hold 3431 ms
[INFO]2021-03-02 15:38:49,764: name=MainThread, pid=17160, tid=4608
[01] File "D:/python_lx/akm/common/run_all.py", line 57, in <module>() 
[02] File "D:/python_lx/akm/common/run_all.py", line 39, in findModule() 
[03] File "<frozen importlib._bootstrap>", line 991, in _find_and_load() 
[04] File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked() 
[05] File "<frozen importlib._bootstrap>", line 671, in _load_unlocked() 
[06] File "<frozen importlib._bootstrap_external>", line 783, in exec_module() 
[07] File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed() 
[08] File "D:/python_lx/akm/agvCtrl/main_agv.py", line 22, in <module>() 
[09] File "D:/python_lx/akm/common/lock.py", line 124, in _call() 
[10] File "D:/python_lx/akm/common/lock.py", line 102, in release() 
[11] File "D:/python_lx/akm/common/enhance.py", line 268, in getTrace() 
[12] File "D:/python_lx/akm/common/enhance.py", line 248, in getThreadStack()
[INFO]2021-03-02 15:38:49,770: import agvDevice.main_agvDevice
[INFO]2021-03-02 15:38:49,771: import alarm.main_alarm
[INFO]2021-03-02 15:38:49,772: import auth.main_auth
[INFO]2021-03-02 15:38:49,794: import button.main_button
[INFO]2021-03-02 15:38:49,804: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4B0C43F0>>
[INFO]2021-03-02 15:38:49,897: import door.main_door
[INFO]2021-03-02 15:38:49,902: import elevator.main_elevator
[INFO]2021-03-02 15:38:49,902: import virtualDoor.main_doorCtrl
[INFO]2021-03-02 15:38:53,092: create lock <lock name:IOAlarm.s_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4B2A2120>>
[DEBUG]2021-03-02 15:38:53,095: create aliveObj magneticAGV01 二维码掉线异常 timeout 120
[SUCC]2021-03-02 15:38:53,110: utility start, pid=17160, ppid=17184
[DEBUG]2021-03-02 15:38:53,111: start timer
[INFO]2021-03-02 15:38:53,133: load agv file: D:\python_lx\akm\agvCtrl/projects/akm/agv.cfg
[INFO]2021-03-02 15:38:53,134: create lock <lock name:agvList.AGV23.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4BE2E6F0>>
[DEBUG]2021-03-02 15:38:53,137: create aliveObj AGV23 AGV离线异常 timeout 300
[INFO]2021-03-02 15:38:53,138: AGV23 start agvList run thread
[INFO]2021-03-02 15:38:53,139: AGV23 start agvList run2 thread
[INFO]2021-03-02 15:38:53,140: create lock <lock name:agv.AGV23.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4BE46780>>
[DEBUG]2021-03-02 15:38:53,141: try connect AGV23 192.168.20.198:19204
[WARN]2021-03-02 15:38:53,146: Local server start! version 3.8.0, path D:\python_lx\akm\common, pid 17160
[INFO]2021-03-02 15:38:53,147: add_ignore: taskStatus
[INFO]2021-03-02 15:38:53,148: AGV23 connected 192.168.20.198 19204
[INFO]2021-03-02 15:38:53,149: create lock <lock name:agv.AGV23.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4BE467B0>>
[DEBUG]2021-03-02 15:38:53,150: try connect AGV23 192.168.20.198:19205
[INFO]2021-03-02 15:38:53,156: AGV23 connected 192.168.20.198 19205
[INFO]2021-03-02 15:38:53,158: create lock <lock name:agv.AGV23.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4BE467E0>>
[DEBUG]2021-03-02 15:38:53,159: try connect AGV23 192.168.20.198:19206
[INFO]2021-03-02 15:38:53,166: AGV23 connected 192.168.20.198 19206
[INFO]2021-03-02 15:38:53,168: create lock <lock name:agv.AGV23.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4BE46690>>
[DEBUG]2021-03-02 15:38:53,168: try connect AGV23 192.168.20.198:19207
[INFO]2021-03-02 15:38:53,276: AGV23 connected 192.168.20.198 19207
[INFO]2021-03-02 15:38:53,277: create lock <lock name:agv.AGV23.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4BE46CC0>>
[DEBUG]2021-03-02 15:38:53,277: try connect AGV23 192.168.20.198:19208
[INFO]2021-03-02 15:38:53,298: AGV23 connected 192.168.20.198 19208
[INFO]2021-03-02 15:38:53,299: create lock <lock name:agv.AGV23.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x0000024E4BE5EB70>>
[DEBUG]2021-03-02 15:38:53,299: try connect AGV23 192.168.20.198:19210
[INFO]2021-03-02 15:38:53,376: AGV23 connected 192.168.20.198 19210
[INFO]2021-03-02 15:38:53,405: AGV23 current map AKM-FQC
[INFO]2021-03-02 15:38:53,498: AGV23 is online
[INFO]2021-03-02 15:38:57,196: magneticAGV01 (1, 0, 0, 0)
[INFO]2021-03-02 15:38:58,198: magneticAGV01 try to open door 0 ['SK_DOOR', 'DDT_DOOR03'] ['SK_DOOR', 'DDT_DOOR03']
[INFO]2021-03-02 15:38:58,218: task [magneticAGV01] readIo get status  (1, 0, 0, 0, 0, 0, 0, 0)
[DEBUG]2021-03-02 15:38:58,219: magneticAGV01 经过门 ['SK_DOOR', 'DDT_DOOR03'] checkBeginSignal -> opendoor
[INFO]2021-03-02 15:38:58,720: try to open door SK_DOOR
[DEBUG]2021-03-02 15:38:58,720: send http_get: http://127.0.0.1:8999/api/switch/on?id=SK_DOOR
[DEBUG]2021-03-02 15:38:58,735: GET: http://127.0.0.1:8999/api/switch/on?id=SK_DOOR addr: 127.0.0.1
[INFO]2021-03-02 15:38:58,736: The signal to open the door has been sent,  doorIP:192.168.20.163
[DEBUG]2021-03-02 15:38:58,761: send to door module:192.168.20.163, values:outbuf[16] 55 00 00 00 00 AA 03 06 80 00 00 00 00 00 88 16
[DEBUG]2021-03-02 15:38:59,112: read from door module:192.168.20.163, values:inbuf[13] 55 00 00 00 00 AA 83 03 80 81 00 86 16
[DEBUG]2021-03-02 15:38:59,113: used 378ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:8999/api/switch/on?id=SK_DOOR
[DEBUG]2021-03-02 15:38:59,116: [return] use 396 ms,http_get: http://127.0.0.1:8999/api/switch/on?id=SK_DOOR
[WARN]2021-03-02 15:38:59,117: magneticAGV01 经过门 ['SK_DOOR', 'DDT_DOOR03'] opendoor error
[INFO]2021-03-02 15:39:00,216: magneticAGV01 (1, 0, 0, 0)
[INFO]2021-03-02 15:39:01,119: try to open door DDT_DOOR03
[DEBUG]2021-03-02 15:39:01,120: send http_get: http://127.0.0.1:8999/api/switch/on?id=DDT_DOOR03
[DEBUG]2021-03-02 15:39:01,134: GET: http://127.0.0.1:8999/api/switch/on?id=DDT_DOOR03 addr: 127.0.0.1
[INFO]2021-03-02 15:39:01,135: The signal to open the door has been sent,  doorIP:192.168.20.160
[DEBUG]2021-03-02 15:39:01,144: send to door module:192.168.20.160, values:outbuf[16] 55 00 00 00 00 AA 03 06 80 00 00 00 00 00 88 16
[DEBUG]2021-03-02 15:39:01,438: read from door module:192.168.20.160, values:inbuf[13] 55 00 00 00 00 AA 83 03 80 01 00 06 16
[DEBUG]2021-03-02 15:39:01,440: used 305ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:8999/api/switch/on?id=DDT_DOOR03
[DEBUG]2021-03-02 15:39:01,446: [return] use 326 ms,http_get: http://127.0.0.1:8999/api/switch/on?id=DDT_DOOR03
[WARN]2021-03-02 15:39:01,447: magneticAGV01 经过门 ['SK_DOOR', 'DDT_DOOR03'] opendoor error
[INFO]2021-03-02 15:39:03,234: magneticAGV01 (0, 0, 0, 0)
[DEBUG]2021-03-02 15:39:03,449: magneticAGV01 经过门 ['SK_DOOR', 'DDT_DOOR03'] opendoor -> leavefirst
[INFO]2021-03-02 15:39:05,048: task: [magneticAGV01] readDo status  (1, 0, 0, 0, 0, 0, 0, 0)
[DEBUG]2021-03-02 15:39:05,050: magneticAGV01 经过门 ['SK_DOOR', 'DDT_DOOR03'] leavefirst -> waitAlway
[WARN]2021-03-02 15:39:05,551: magneticAGV01 经过门 ['SK_DOOR', 'DDT_DOOR03'] waitAlway error
[INFO]2021-03-02 15:39:06,256: magneticAGV01 (0, 0, 0, 0)

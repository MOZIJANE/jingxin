[INFO]2021-02-28 22:01:42,082: log files at D:\python_lx\akm\common\log
[INFO]2021-02-28 22:01:42,083: find module agvCtrl.main_agv
[INFO]2021-02-28 22:01:42,083: find module agvDevice.main_agvDevice
[INFO]2021-02-28 22:01:42,083: find module alarm.main_alarm
[INFO]2021-02-28 22:01:42,083: find module auth.main_auth
[INFO]2021-02-28 22:01:42,083: find module button.main_button
[INFO]2021-02-28 22:01:42,084: find module door.main_door
[INFO]2021-02-28 22:01:42,084: find module elevator.main_elevator
[INFO]2021-02-28 22:01:42,084: find module virtualDoor.main_doorCtrl
[INFO]2021-02-28 22:01:42,084: import agvCtrl.main_agv
[INFO]2021-02-28 22:01:42,702: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F0854AC660>>
[INFO]2021-02-28 22:01:42,705: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F0854ACEA0>>
[INFO]2021-02-28 22:01:42,844: create lock <lock name:timer.lock_3232055126096,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F0857F6990>>
[ERROR]2021-02-28 22:01:42,857: mqtt is disabled
[INFO]2021-02-28 22:01:42,858: mqtt: subscribe [alarm/raise/+]
[INFO]2021-02-28 22:01:42,858: mqtt: subscribe [alarm/clear/+]
[INFO]2021-02-28 22:01:45,893: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-02-28 22:01:45,955: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085A80D80>>
[INFO]2021-02-28 22:01:45,956: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085A806C0>>
[INFO]2021-02-28 22:01:45,957: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085A73AE0>>
[INFO]2021-02-28 22:01:45,976: create lock <lock name:agvserver,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085AC1EA0>>
[INFO]2021-02-28 22:01:46,281: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085A87BA0>>
[INFO]2021-02-28 22:01:46,661: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085B6C8A0>>
[INFO]2021-02-28 22:01:46,663: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085C21270>>
[INFO]2021-02-28 22:01:46,718: charge policy 0 , fix time
[INFO]2021-02-28 22:01:46,744: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F085C21E40>>
[INFO]2021-02-28 22:01:47,187: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap
[DEBUG]2021-02-28 22:01:47,385: elevator thread start
[INFO]2021-02-28 22:01:47,405: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap ,used 226 ms
[INFO]2021-02-28 22:01:47,414: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap
[INFO]2021-02-28 22:01:47,474: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap ,used 68 ms
[INFO]2021-02-28 22:01:47,482: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap
[INFO]2021-02-28 22:01:47,545: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap ,used 70 ms
[INFO]2021-02-28 22:01:47,568: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap
[INFO]2021-02-28 22:01:47,761: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap ,used 216 ms
[INFO]2021-02-28 22:01:47,775: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap
[INFO]2021-02-28 22:01:47,874: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap ,used 113 ms
[INFO]2021-02-28 22:01:47,882: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap
[INFO]2021-02-28 22:01:47,959: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap ,used 85 ms
[INFO]2021-02-28 22:01:47,967: start load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap
[INFO]2021-02-28 22:01:48,008: load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap ,used 49 ms
[INFO]2021-02-28 22:01:48,011: import agvDevice.main_agvDevice
[INFO]2021-02-28 22:01:48,012: import alarm.main_alarm
[INFO]2021-02-28 22:01:48,012: import auth.main_auth
[INFO]2021-02-28 22:01:48,021: import button.main_button
[INFO]2021-02-28 22:01:48,025: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F086135D80>>
[INFO]2021-02-28 22:01:48,074: import door.main_door
[INFO]2021-02-28 22:01:48,078: import elevator.main_elevator
[INFO]2021-02-28 22:01:48,080: import virtualDoor.main_doorCtrl
[INFO]2021-02-28 22:01:50,410: create lock <lock name:IOAlarm.s_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F08618D840>>
[SUCC]2021-02-28 22:01:50,416: utility start, pid=9892, ppid=15108
[DEBUG]2021-02-28 22:01:50,416: create aliveObj magneticAGV01 二维码掉线异常 timeout 120
[DEBUG]2021-02-28 22:01:50,417: start timer
[INFO]2021-02-28 22:01:50,425: load agv file: D:\python_lx\akm\agvCtrl/projects/akm/agv.cfg
[INFO]2021-02-28 22:01:50,426: create lock <lock name:agvList.AGV23.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F08768FC90>>
[DEBUG]2021-02-28 22:01:50,427: create aliveObj AGV23 AGV离线异常 timeout 300
[INFO]2021-02-28 22:01:50,427: AGV23 start agvList run thread
[INFO]2021-02-28 22:01:50,427: create lock <lock name:agv.AGV23.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x000002F087699AE0>>
[INFO]2021-02-28 22:01:50,428: AGV23 start agvList run2 thread
[DEBUG]2021-02-28 22:01:50,428: try connect AGV23 192.168.20.198:19204
[WARN]2021-02-28 22:01:50,430: Local server start! version 3.8.0, path D:\python_lx\akm\common, pid 9892
[INFO]2021-02-28 22:01:50,430: add_ignore: taskStatus
[INFO]2021-02-28 22:01:54,467: magneticAGV01 (1, 0, 0, 0)
[INFO]2021-02-28 22:01:55,469: +++++++ addTask None
[INFO]2021-02-28 22:01:55,470: magneticAGV01 try to open door 0 ['DOOR100', 'DOOR101'] ['DOOR100', 'DOOR101']
[INFO]2021-02-28 22:01:55,476: task [magneticAGV01] readIo get status  (1, 0, 0, 0, 0, 0, 0, 0)
[DEBUG]2021-02-28 22:01:55,477: 经过门['DOOR100', 'DOOR101'] checkBeginSignal -> opendoor
[INFO]2021-02-28 22:01:55,977: try to open door
[WARN]2021-02-28 22:01:55,978: 经过门['DOOR100', 'DOOR101'] leave error
[INFO]2021-02-28 22:01:57,487: magneticAGV01 (1, 0, 0, 0)
[INFO]2021-02-28 22:01:59,051: task: [magneticAGV01] readDo status  (1, 0, 0, 0, 0, 0, 0, 0)
[DEBUG]2021-02-28 22:01:59,051: 经过门['DOOR100', 'DOOR101'] leave -> waitAlway
[WARN]2021-02-28 22:01:59,553: 经过门['DOOR100', 'DOOR101'] waitAlway error
[ERROR]2021-02-28 22:02:00,430: connect AGV23 failed timed out
[DEBUG]2021-02-28 22:02:00,430: try connect AGV23 192.168.20.198:19204
[INFO]2021-02-28 22:02:00,506: magneticAGV01 (1, 0, 0, 0)
[WARN]2021-02-28 22:02:01,555: 经过门['DOOR100', 'DOOR101'] waitAlway error
[INFO]2021-02-28 22:02:03,521: magneticAGV01 (1, 0, 0, 0)
[WARN]2021-02-28 22:02:03,557: 经过门['DOOR100', 'DOOR101'] waitAlway error
[WARN]2021-02-28 22:02:05,557: 经过门['DOOR100', 'DOOR101'] waitAlway error
[INFO]2021-02-28 22:02:06,527: magneticAGV01 (1, 0, 0, 0)
[WARN]2021-02-28 22:02:07,559: 经过门['DOOR100', 'DOOR101'] waitAlway error
[INFO]2021-02-28 22:02:09,543: magneticAGV01 (1, 0, 0, 0)
[WARN]2021-02-28 22:02:09,561: 经过门['DOOR100', 'DOOR101'] waitAlway error
[ERROR]2021-02-28 22:02:10,434: connect AGV23 failed timed out
[INFO]2021-02-28 22:02:10,436: AGV23 checkLink failed 192.168.20.198 19204
[WARN]2021-02-28 22:02:10,436: agvThread.AGV23[tid:15696] <lock name:agv.AGV23.lock_status,<locked _thread.RLock object owner=15696 count=1 at 0x000002F087699AE0>> ,hold 20008 ms
[INFO]2021-02-28 22:02:10,440: name=agvThread.AGV23, pid=9892, tid=15696
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_lx/akm/agvCtrl/agvList.py", line 565, in run() 
[03] File "D:/python_lx/akm/driver/seerAgv/agvCtrl.py", line 36, in checkLink() 
[04] File "D:/python_lx/akm/driver/seerAgv/agvApi.py", line 184, in checkLink() 
[05] File "D:/python_lx/akm/common/lock.py", line 102, in release() 
[06] File "D:/python_lx/akm/common/enhance.py", line 268, in getTrace() 
[07] File "D:/python_lx/akm/common/enhance.py", line 248, in getThreadStack()
[WARN]2021-02-28 22:02:11,563: 经过门['DOOR100', 'DOOR101'] waitAlway error
[DEBUG]2021-02-28 22:02:12,442: try connect AGV23 192.168.20.198:19204
[INFO]2021-02-28 22:02:12,550: magneticAGV01 (0, 0, 0, 0)
[WARN]2021-02-28 22:02:13,565: 经过门['DOOR100', 'DOOR101'] waitAlway error
[WARN]2021-02-28 22:02:15,568: 经过门['DOOR100', 'DOOR101'] waitAlway error
[INFO]2021-02-28 22:02:15,576: magneticAGV01 (0, 0, 0, 0)
[WARN]2021-02-28 22:02:17,573: 经过门['DOOR100', 'DOOR101'] waitAlway error
[INFO]2021-02-28 22:02:18,584: magneticAGV01 (0, 0, 0, 0)
[WARN]2021-02-28 22:02:19,575: 经过门['DOOR100', 'DOOR101'] clearIO error
[INFO]2021-02-28 22:02:21,608: magneticAGV01 (0, 0, 0, 0)
[ERROR]2021-02-28 22:02:22,444: connect AGV23 failed timed out
[INFO]2021-02-28 22:02:22,445: AGV23 checkLink failed 192.168.20.198 19204
[WARN]2021-02-28 22:02:22,446: agvThread.AGV23[tid:15696] <lock name:agv.AGV23.lock_status,<locked _thread.RLock object owner=15696 count=1 at 0x000002F087699AE0>> ,hold 10004 ms
[INFO]2021-02-28 22:02:22,449: name=agvThread.AGV23, pid=9892, tid=15696
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_lx/akm/agvCtrl/agvList.py", line 565, in run() 
[03] File "D:/python_lx/akm/driver/seerAgv/agvCtrl.py", line 36, in checkLink() 
[04] File "D:/python_lx/akm/driver/seerAgv/agvApi.py", line 184, in checkLink() 
[05] File "D:/python_lx/akm/common/lock.py", line 102, in release() 
[06] File "D:/python_lx/akm/common/enhance.py", line 268, in getTrace() 
[07] File "D:/python_lx/akm/common/enhance.py", line 248, in getThreadStack()
[INFO]2021-02-28 22:02:22,682: task: [magneticAGV01] readDo status  (0, 0, 0, 0, 0, 0, 0, 0)
[WARN]2021-02-28 22:02:22,682: 经过门['DOOR100', 'DOOR101'] checkfinishSignal error
[DEBUG]2021-02-28 22:02:24,457: try connect AGV23 192.168.20.198:19204
[INFO]2021-02-28 22:02:24,653: magneticAGV01 (0, 0, 0, 0)
[INFO]2021-02-28 22:02:24,686: try to close door
[DEBUG]2021-02-28 22:02:24,696: 经过门['DOOR100', 'DOOR101'] checkfinishSignal -> finish
[CRITICAL]2021-02-28 22:02:25,227: taskFunc2:经过门['DOOR100', 'DOOR101'] cause a error: _release() missing 1 required positional argument: 'io'
pid=9892, ppid=15108, tid=2336
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 147, in _taskFunc
    self._release()
TypeError: _release() missing 1 required positional argument: 'io'

[INFO]2021-02-28 22:02:25,229: task: stop 经过门['DOOR100', 'DOOR101']
[CRITICAL]2021-02-28 22:02:26,694: invoke timer func<function _monitorDevices at 0x000002F08618CB80> cause a error: dictionary keys changed during iteration
pid=9892, ppid=15108, tid=3568
Traceback (most recent call last):
  File "D:\python_lx\akm\common\mytimer.py", line 113, in _loop
    v.func(*v.args)
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 98, in _monitorDevices
    for t in g_lastTask:
RuntimeError: dictionary keys changed during iteration

[INFO]2021-02-28 22:02:27,725: magneticAGV01 (0, 0, 0, 0)

[INFO]2021-03-02 15:04:20,088: log files at D:\python_lx\akm\common\log
[INFO]2021-03-02 15:04:20,089: find module agvCtrl.main_agv
[INFO]2021-03-02 15:04:20,089: find module agvDevice.main_agvDevice
[INFO]2021-03-02 15:04:20,089: find module alarm.main_alarm
[INFO]2021-03-02 15:04:20,090: find module auth.main_auth
[INFO]2021-03-02 15:04:20,090: find module button.main_button
[INFO]2021-03-02 15:04:20,090: find module door.main_door
[INFO]2021-03-02 15:04:20,091: find module elevator.main_elevator
[INFO]2021-03-02 15:04:20,091: find module virtualDoor.main_doorCtrl
[INFO]2021-03-02 15:04:20,091: import agvCtrl.main_agv
[INFO]2021-03-02 15:04:20,507: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F017CC690>>
[INFO]2021-03-02 15:04:20,520: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F017CCED0>>
[INFO]2021-03-02 15:04:20,626: create lock <lock name:timer.lock_1301403494480,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01B16990>>
[ERROR]2021-03-02 15:04:20,635: mqtt is disabled
[INFO]2021-03-02 15:04:20,635: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-02 15:04:20,635: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-02 15:04:23,661: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-02 15:04:23,730: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01DA0D80>>
[INFO]2021-03-02 15:04:23,732: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01DA06C0>>
[INFO]2021-03-02 15:04:23,733: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01D93AE0>>
[INFO]2021-03-02 15:04:23,764: create lock <lock name:agvserver,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01DE1EA0>>
[INFO]2021-03-02 15:04:24,072: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01DA6BA0>>
[INFO]2021-03-02 15:04:24,324: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01E8C8A0>>
[INFO]2021-03-02 15:04:24,326: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01F41270>>
[INFO]2021-03-02 15:04:24,377: charge policy 0 , fix time
[INFO]2021-03-02 15:04:24,404: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F01F41E40>>
[INFO]2021-03-02 15:04:24,805: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap
[DEBUG]2021-03-02 15:04:24,957: elevator thread start
[INFO]2021-03-02 15:04:24,975: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap ,used 178 ms
[INFO]2021-03-02 15:04:24,984: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap
[INFO]2021-03-02 15:04:25,045: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap ,used 70 ms
[INFO]2021-03-02 15:04:25,068: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap
[INFO]2021-03-02 15:04:25,137: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap ,used 92 ms
[INFO]2021-03-02 15:04:25,146: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap
[DEBUG]2021-03-02 15:04:25,281: create aliveObj SK_DOOR 门控离线异常 timeout 60
[DEBUG]2021-03-02 15:04:25,281: create aliveObj DDT_DOOR03 门控离线异常 timeout 60
[INFO]2021-03-02 15:04:25,302: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap ,used 164 ms
[INFO]2021-03-02 15:04:25,313: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap
[INFO]2021-03-02 15:04:25,404: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap ,used 101 ms
[INFO]2021-03-02 15:04:25,412: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap
[INFO]2021-03-02 15:04:25,486: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap ,used 81 ms
[INFO]2021-03-02 15:04:25,495: start load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap
[INFO]2021-03-02 15:04:25,541: load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap ,used 55 ms
[INFO]2021-03-02 15:04:25,544: import agvDevice.main_agvDevice
[INFO]2021-03-02 15:04:25,544: import alarm.main_alarm
[INFO]2021-03-02 15:04:25,544: import auth.main_auth
[INFO]2021-03-02 15:04:25,553: import button.main_button
[INFO]2021-03-02 15:04:25,557: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F0245E420>>
[INFO]2021-03-02 15:04:25,651: import door.main_door
[INFO]2021-03-02 15:04:25,658: import elevator.main_elevator
[INFO]2021-03-02 15:04:25,658: import virtualDoor.main_doorCtrl
[INFO]2021-03-02 15:04:27,843: create lock <lock name:IOAlarm.s_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02653E10>>
[DEBUG]2021-03-02 15:04:27,844: create aliveObj magneticAGV01 二维码掉线异常 timeout 120
[SUCC]2021-03-02 15:04:27,851: utility start, pid=3808, ppid=13788
[DEBUG]2021-03-02 15:04:27,852: start timer
[INFO]2021-03-02 15:04:27,860: load agv file: D:\python_lx\akm\agvCtrl/projects/akm/agv.cfg
[INFO]2021-03-02 15:04:27,860: create lock <lock name:agvList.AGV23.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02A954E0>>
[DEBUG]2021-03-02 15:04:27,862: create aliveObj AGV23 AGV离线异常 timeout 300
[INFO]2021-03-02 15:04:27,863: AGV23 start agvList run thread
[INFO]2021-03-02 15:04:27,863: create lock <lock name:agv.AGV23.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02AAF510>>
[DEBUG]2021-03-02 15:04:27,863: try connect AGV23 192.168.20.198:19204
[INFO]2021-03-02 15:04:27,863: AGV23 start agvList run2 thread
[WARN]2021-03-02 15:04:27,866: Local server start! version 3.8.0, path D:\python_lx\akm\common, pid 3808
[INFO]2021-03-02 15:04:27,866: add_ignore: taskStatus
[INFO]2021-03-02 15:04:27,869: AGV23 connected 192.168.20.198 19204
[INFO]2021-03-02 15:04:27,869: create lock <lock name:agv.AGV23.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02A95C90>>
[DEBUG]2021-03-02 15:04:27,869: try connect AGV23 192.168.20.198:19205
[INFO]2021-03-02 15:04:27,885: AGV23 connected 192.168.20.198 19205
[INFO]2021-03-02 15:04:27,886: create lock <lock name:agv.AGV23.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02A95D20>>
[DEBUG]2021-03-02 15:04:27,886: try connect AGV23 192.168.20.198:19206
[INFO]2021-03-02 15:04:27,892: AGV23 connected 192.168.20.198 19206
[INFO]2021-03-02 15:04:27,892: create lock <lock name:agv.AGV23.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02A95BA0>>
[DEBUG]2021-03-02 15:04:27,892: try connect AGV23 192.168.20.198:19207
[INFO]2021-03-02 15:04:27,911: AGV23 connected 192.168.20.198 19207
[INFO]2021-03-02 15:04:27,911: create lock <lock name:agv.AGV23.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02A95B10>>
[DEBUG]2021-03-02 15:04:27,911: try connect AGV23 192.168.20.198:19208
[INFO]2021-03-02 15:04:27,926: AGV23 connected 192.168.20.198 19208
[INFO]2021-03-02 15:04:27,926: create lock <lock name:agv.AGV23.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x0000012F02ACC480>>
[DEBUG]2021-03-02 15:04:27,928: try connect AGV23 192.168.20.198:19210
[INFO]2021-03-02 15:04:28,051: AGV23 connected 192.168.20.198 19210
[INFO]2021-03-02 15:04:28,111: AGV23 current map AKM-FQC
[INFO]2021-03-02 15:04:28,266: AGV23 is online
[INFO]2021-03-02 15:04:33,243: magneticAGV01 (0, 0, 0, 0)
[INFO]2021-03-02 15:04:36,263: magneticAGV01 (0, 0, 0, 0)
[INFO]2021-03-02 15:04:39,279: magneticAGV01 (0, 0, 0, 0)
[INFO]2021-03-02 15:04:42,305: magneticAGV01 (0, 0, 0, 0)
[INFO]2021-03-02 15:04:45,321: magneticAGV01 (0, 0, 0, 0)
[INFO]2021-03-02 15:04:49,666: magneticAGV01 (0, 0, 0, 0)
[WARN]2021-03-02 15:04:49,702: agvThread.AGV23[tid:6572] <lock name:agv.AGV23.lock_status,<locked _thread.RLock object owner=6572 count=1 at 0x0000012F02AAF510>> ,hold 3078 ms
[INFO]2021-03-02 15:04:49,705: name=agvThread.AGV23, pid=3808, tid=6572
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_lx/akm/agvCtrl/agvList.py", line 573, in run() 
[03] File "D:/python_lx/akm/agvCtrl/agvList.py", line 855, in readStatus1() 
[04] File "D:/python_lx/akm/agvCtrl/agvList.py", line 835, in _readStatus1() 
[05] File "D:/python_lx/akm/driver/seerAgv/agvCtrl.py", line 777, in readStatus1() 
[06] File "D:/python_lx/akm/driver/seerAgv/agvApi.py", line 195, in status() 
[07] File "D:/python_lx/akm/driver/seerAgv/agvApi.py", line 254, in _handle() 
[08] File "D:/python_lx/akm/common/lock.py", line 102, in release() 
[09] File "D:/python_lx/akm/common/enhance.py", line 268, in getTrace() 
[10] File "D:/python_lx/akm/common/enhance.py", line 248, in getThreadStack()
[INFO]2021-03-02 15:04:52,686: magneticAGV01 (0, 0, 0, 0)
[DEBUG]2021-03-02 15:04:54,414: AGV23 set loc AKM-FQC.LM9 ,old LM8 (0.69,5.30)
[INFO]2021-03-02 15:04:55,709: magneticAGV01 (0, 0, 0, 0)
[INFO]2021-03-02 15:04:58,722: magneticAGV01 (0, 0, 0, 0)
[DEBUG]2021-03-02 15:04:59,238: AGV23 set loc AKM-FQC.LM10 ,old LM9 (0.70,3.48)
[INFO]2021-03-02 15:05:01,744: magneticAGV01 (1, 0, 0, 0)
[ERROR]2021-03-02 15:05:02,020: raise alarm obj=AGV23, typeId=49997, desc=小车置信度小于最低阈值,当前值:0.7362, id=603de39eba9f4acf5f07a5b4
[INFO]2021-03-02 15:05:02,746: magneticAGV01 try to open door 0 ['SK_DOOR', 'DDT_DOOR03'] ['SK_DOOR', 'DDT_DOOR03']
[CRITICAL]2021-03-02 15:05:02,771: magneticAGV readDIList error cause a error: 'magneticAGVDoor' object has no attribute 'relatedDoorcloseFalg'
pid=3808, ppid=13788, tid=10224
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 88, in _monitorDevices
    g_lastTask[d] = magneticAGVDoor(d,g_devicesAGV[d]["type"],g_devicesAGV[d]["relatedDoor"],g_devicesAGV[d]["virualDoor"])
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 127, in __init__
    self.relatedDoorcloseFalg[door] = False
AttributeError: 'magneticAGVDoor' object has no attribute 'relatedDoorcloseFalg'

[WARN]2021-03-02 15:05:03,719: clear alarm obj=AGV23, typeId=49997, id=603de39eba9f4acf5f07a5b4
[INFO]2021-03-02 15:05:04,800: magneticAGV01 (1, 0, 0, 0)
[INFO]2021-03-02 15:05:05,801: magneticAGV01 try to open door 0 ['SK_DOOR', 'DDT_DOOR03'] ['SK_DOOR', 'DDT_DOOR03']
[CRITICAL]2021-03-02 15:05:05,826: magneticAGV readDIList error cause a error: 'magneticAGVDoor' object has no attribute 'relatedDoorcloseFalg'
pid=3808, ppid=13788, tid=10224
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 88, in _monitorDevices
    g_lastTask[d] = magneticAGVDoor(d,g_devicesAGV[d]["type"],g_devicesAGV[d]["relatedDoor"],g_devicesAGV[d]["virualDoor"])
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 127, in __init__
    self.relatedDoorcloseFalg[door] = False
AttributeError: 'magneticAGVDoor' object has no attribute 'relatedDoorcloseFalg'

[INFO]2021-03-02 15:05:07,856: magneticAGV01 (1, 0, 0, 0)
[INFO]2021-03-02 15:05:08,858: magneticAGV01 try to open door 0 ['SK_DOOR', 'DDT_DOOR03'] ['SK_DOOR', 'DDT_DOOR03']
[CRITICAL]2021-03-02 15:05:08,883: magneticAGV readDIList error cause a error: 'magneticAGVDoor' object has no attribute 'relatedDoorcloseFalg'
pid=3808, ppid=13788, tid=10224
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 88, in _monitorDevices
    g_lastTask[d] = magneticAGVDoor(d,g_devicesAGV[d]["type"],g_devicesAGV[d]["relatedDoor"],g_devicesAGV[d]["virualDoor"])
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 127, in __init__
    self.relatedDoorcloseFalg[door] = False
AttributeError: 'magneticAGVDoor' object has no attribute 'relatedDoorcloseFalg'


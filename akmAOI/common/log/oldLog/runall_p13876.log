[INFO]2021-03-02 15:48:35,987: log files at D:\python_lx\akm\common\log
[INFO]2021-03-02 15:48:35,987: find module agvCtrl.main_agv
[INFO]2021-03-02 15:48:35,988: find module agvDevice.main_agvDevice
[INFO]2021-03-02 15:48:35,988: find module alarm.main_alarm
[INFO]2021-03-02 15:48:35,988: find module auth.main_auth
[INFO]2021-03-02 15:48:35,988: find module button.main_button
[INFO]2021-03-02 15:48:35,989: find module door.main_door
[INFO]2021-03-02 15:48:35,989: find module elevator.main_elevator
[INFO]2021-03-02 15:48:35,989: find module virtualDoor.main_doorCtrl
[INFO]2021-03-02 15:48:35,989: import agvCtrl.main_agv
[INFO]2021-03-02 15:48:36,450: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000200287DC690>>
[INFO]2021-03-02 15:48:36,461: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000200287DCED0>>
[INFO]2021-03-02 15:48:36,553: create lock <lock name:timer.lock_2199705905232,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028B06990>>
[ERROR]2021-03-02 15:48:36,563: mqtt is disabled
[INFO]2021-03-02 15:48:36,563: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-02 15:48:36,563: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-02 15:48:39,591: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-02 15:48:39,658: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028D8FD80>>
[INFO]2021-03-02 15:48:39,659: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028D8F6C0>>
[INFO]2021-03-02 15:48:39,662: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028D83AE0>>
[INFO]2021-03-02 15:48:39,694: create lock <lock name:agvserver,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028DE0EA0>>
[INFO]2021-03-02 15:48:40,006: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028D97BA0>>
[INFO]2021-03-02 15:48:40,251: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028E8C8A0>>
[INFO]2021-03-02 15:48:40,253: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028F41270>>
[INFO]2021-03-02 15:48:40,308: charge policy 0 , fix time
[INFO]2021-03-02 15:48:40,334: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020028F41E40>>
[INFO]2021-03-02 15:48:40,742: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap
[DEBUG]2021-03-02 15:48:40,956: elevator thread start
[INFO]2021-03-02 15:48:40,980: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap ,used 247 ms
[INFO]2021-03-02 15:48:41,006: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap
[INFO]2021-03-02 15:48:41,073: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap ,used 93 ms
[INFO]2021-03-02 15:48:41,082: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap
[INFO]2021-03-02 15:48:41,149: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap ,used 76 ms
[INFO]2021-03-02 15:48:41,156: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap
[DEBUG]2021-03-02 15:48:41,290: create aliveObj SK_DOOR 门控离线异常 timeout 60
[DEBUG]2021-03-02 15:48:41,290: create aliveObj DDT_DOOR03 门控离线异常 timeout 60
[INFO]2021-03-02 15:48:41,311: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap ,used 162 ms
[INFO]2021-03-02 15:48:41,319: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap
[INFO]2021-03-02 15:48:41,402: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap ,used 91 ms
[INFO]2021-03-02 15:48:41,410: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap
[INFO]2021-03-02 15:48:41,482: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap ,used 80 ms
[INFO]2021-03-02 15:48:41,493: start load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap
[INFO]2021-03-02 15:48:41,534: load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap ,used 52 ms
[INFO]2021-03-02 15:48:41,537: import agvDevice.main_agvDevice
[INFO]2021-03-02 15:48:41,538: import alarm.main_alarm
[INFO]2021-03-02 15:48:41,538: import auth.main_auth
[INFO]2021-03-02 15:48:41,547: import button.main_button
[INFO]2021-03-02 15:48:41,551: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020029462600>>
[INFO]2021-03-02 15:48:41,589: import door.main_door
[INFO]2021-03-02 15:48:41,593: import elevator.main_elevator
[INFO]2021-03-02 15:48:41,593: import virtualDoor.main_doorCtrl
[INFO]2021-03-02 15:48:43,602: create lock <lock name:IOAlarm.s_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000200295D50F0>>
[DEBUG]2021-03-02 15:48:43,603: create aliveObj magneticAGV01 二维码掉线异常 timeout 120
[SUCC]2021-03-02 15:48:43,611: utility start, pid=13876, ppid=5916
[DEBUG]2021-03-02 15:48:43,611: start timer
[INFO]2021-03-02 15:48:43,618: load agv file: D:\python_lx\akm\agvCtrl/projects/akm/agv.cfg
[INFO]2021-03-02 15:48:43,619: create lock <lock name:agvList.AGV23.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002002CD4F5A0>>
[DEBUG]2021-03-02 15:48:43,620: create aliveObj AGV23 AGV离线异常 timeout 300
[INFO]2021-03-02 15:48:43,621: AGV23 start agvList run thread
[INFO]2021-03-02 15:48:43,622: create lock <lock name:agv.AGV23.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x000002002CD6A4E0>>
[INFO]2021-03-02 15:48:43,622: AGV23 start agvList run2 thread
[DEBUG]2021-03-02 15:48:43,622: try connect AGV23 192.168.20.198:19204
[WARN]2021-03-02 15:48:43,624: Local server start! version 3.8.0, path D:\python_lx\akm\common, pid 13876
[INFO]2021-03-02 15:48:43,625: add_ignore: taskStatus
[INFO]2021-03-02 15:48:43,630: AGV23 connected 192.168.20.198 19204
[INFO]2021-03-02 15:48:43,630: create lock <lock name:agv.AGV23.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x000002002CD6A510>>
[DEBUG]2021-03-02 15:48:43,630: try connect AGV23 192.168.20.198:19205
[INFO]2021-03-02 15:48:43,672: AGV23 connected 192.168.20.198 19205
[INFO]2021-03-02 15:48:43,672: create lock <lock name:agv.AGV23.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x000002002CD6A540>>
[DEBUG]2021-03-02 15:48:43,673: try connect AGV23 192.168.20.198:19206
[INFO]2021-03-02 15:48:43,678: AGV23 connected 192.168.20.198 19206
[INFO]2021-03-02 15:48:43,679: create lock <lock name:agv.AGV23.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x000002002CD6A690>>
[DEBUG]2021-03-02 15:48:43,679: try connect AGV23 192.168.20.198:19207
[INFO]2021-03-02 15:48:43,685: AGV23 connected 192.168.20.198 19207
[INFO]2021-03-02 15:48:43,685: create lock <lock name:agv.AGV23.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x000002002CD84300>>
[DEBUG]2021-03-02 15:48:43,685: try connect AGV23 192.168.20.198:19208
[INFO]2021-03-02 15:48:43,980: AGV23 connected 192.168.20.198 19208
[INFO]2021-03-02 15:48:43,980: create lock <lock name:agv.AGV23.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x000002002CD84330>>
[DEBUG]2021-03-02 15:48:43,981: try connect AGV23 192.168.20.198:19210
[INFO]2021-03-02 15:48:43,986: AGV23 connected 192.168.20.198 19210
[INFO]2021-03-02 15:48:44,016: AGV23 current map AKM-FQC
[INFO]2021-03-02 15:48:44,187: AGV23 is online
[DEBUG]2021-03-02 15:48:51,367: AGV23 set loc AKM-FQC.LM21 ,old LM20 (0.40,43.88)
[CRITICAL]2021-03-02 15:48:52,670: [modbusApi: 192.168.20.150] execute fcode=1, addr=0 exception:  cause a error: timed out
pid=13876, ppid=5916, tid=14344
Traceback (most recent call last):
  File "D:\python_lx\akm\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 152, in execute
    self.open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 99, in open
    self._do_open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
socket.timeout: timed out

[WARN]2021-03-02 15:48:52,673: timer_thread[tid:14344] <locked _thread.RLock object owner=14344 count=1 at 0x000002002CD4F120> ,hold 5034 ms
[INFO]2021-03-02 15:48:52,676: name=timer_thread, pid=13876, tid=14344
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_lx/akm/common/mytimer.py", line 113, in _loop() 
[03] File "D:/python_lx/akm/virtualDoor/doorCtrlRunTasks.py", line 81, in _monitorDevices() 
[04] File "D:/python_lx/akm/virtualDoor/magneticAGV.py", line 140, in readDIList() 
[05] File "D:/python_lx/akm/virtualDoor/magneticAGV.py", line 192, in readDIList() 
[06] File "D:/python_lx/akm/common/lock.py", line 124, in _call() 
[07] File "D:/python_lx/akm/common/lock.py", line 102, in release() 
[08] File "D:/python_lx/akm/common/enhance.py", line 268, in getTrace() 
[09] File "D:/python_lx/akm/common/enhance.py", line 248, in getThreadStack()
[CRITICAL]2021-03-02 15:48:52,709: magneticAGV01 readDIList fail cause a error: timed out
pid=13876, ppid=5916, tid=14344
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 192, in readDIList
    return self._read(D0, IO_LENTH)
  File "D:\python_lx\akm\common\lock.py", line 122, in _call
    return func(*p,**pp)
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 226, in _read
    s = self.master.read(mdef.READ_COILS, addr, length)
  File "D:\python_lx\akm\common\modbusapi.py", line 45, in read
    return self.__execute(fcode, start, num)
  File "D:\python_lx\akm\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 152, in execute
    self.open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 99, in open
    self._do_open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
socket.timeout: timed out

[CRITICAL]2021-03-02 15:48:52,725: magneticAGV readDIList error cause a error: timed out
pid=13876, ppid=5916, tid=14344
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 81, in _monitorDevices
    s1 = magneticAGV.readDIList(d)["status"]
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 140, in readDIList
    result = remoteioInfo.readDIList()
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 192, in readDIList
    return self._read(D0, IO_LENTH)
  File "D:\python_lx\akm\common\lock.py", line 122, in _call
    return func(*p,**pp)
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 226, in _read
    s = self.master.read(mdef.READ_COILS, addr, length)
  File "D:\python_lx\akm\common\modbusapi.py", line 45, in read
    return self.__execute(fcode, start, num)
  File "D:\python_lx\akm\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 152, in execute
    self.open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 99, in open
    self._do_open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
socket.timeout: timed out


[INFO]2021-03-02 16:20:01,918: log files at D:\python_lx\akm\common\log
[INFO]2021-03-02 16:20:01,918: find module agvCtrl.main_agv
[INFO]2021-03-02 16:20:01,918: find module agvDevice.main_agvDevice
[INFO]2021-03-02 16:20:01,919: find module alarm.main_alarm
[INFO]2021-03-02 16:20:01,919: find module auth.main_auth
[INFO]2021-03-02 16:20:01,919: find module button.main_button
[INFO]2021-03-02 16:20:01,919: find module door.main_door
[INFO]2021-03-02 16:20:01,920: find module elevator.main_elevator
[INFO]2021-03-02 16:20:01,920: find module virtualDoor.main_doorCtrl
[INFO]2021-03-02 16:20:01,920: import agvCtrl.main_agv
[INFO]2021-03-02 16:20:02,310: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097BA7C660>>
[INFO]2021-03-02 16:20:02,315: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097BA7CEA0>>
[INFO]2021-03-02 16:20:02,400: create lock <lock name:timer.lock_2239755806848,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097BD969C0>>
[ERROR]2021-03-02 16:20:02,409: mqtt is disabled
[INFO]2021-03-02 16:20:02,409: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-02 16:20:02,410: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-02 16:20:05,434: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-02 16:20:05,495: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C020DB0>>
[INFO]2021-03-02 16:20:05,495: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C0206F0>>
[INFO]2021-03-02 16:20:05,496: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C013B10>>
[INFO]2021-03-02 16:20:05,514: create lock <lock name:agvserver,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C061ED0>>
[INFO]2021-03-02 16:20:05,804: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C025BD0>>
[INFO]2021-03-02 16:20:06,089: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C10C8D0>>
[INFO]2021-03-02 16:20:06,092: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C1C12A0>>
[INFO]2021-03-02 16:20:06,150: charge policy 0 , fix time
[INFO]2021-03-02 16:20:06,181: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x000002097C1C1E70>>
[INFO]2021-03-02 16:20:06,577: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap
[DEBUG]2021-03-02 16:20:06,730: elevator thread start
[INFO]2021-03-02 16:20:06,745: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-AOI.smap ,used 176 ms
[INFO]2021-03-02 16:20:06,753: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap
[INFO]2021-03-02 16:20:06,808: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DC.smap ,used 63 ms
[INFO]2021-03-02 16:20:06,816: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap
[INFO]2021-03-02 16:20:06,877: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-DDT.smap ,used 69 ms
[INFO]2021-03-02 16:20:06,884: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap
[DEBUG]2021-03-02 16:20:07,030: create aliveObj SK_DOOR 门控离线异常 timeout 60
[INFO]2021-03-02 16:20:07,051: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-FQC.smap ,used 174 ms
[INFO]2021-03-02 16:20:07,060: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap
[INFO]2021-03-02 16:20:07,158: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-LYH.smap ,used 106 ms
[INFO]2021-03-02 16:20:07,170: start load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap
[INFO]2021-03-02 16:20:07,281: load map D:\python_lx\akm\agvCtrl\projects\akm\AKM-ZP.smap ,used 122 ms
[INFO]2021-03-02 16:20:07,291: start load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap
[INFO]2021-03-02 16:20:07,341: load map D:\python_lx\akm\agvCtrl\projects\akm\office.smap ,used 59 ms
[INFO]2021-03-02 16:20:07,345: import agvDevice.main_agvDevice
[INFO]2021-03-02 16:20:07,345: import alarm.main_alarm
[INFO]2021-03-02 16:20:07,346: import auth.main_auth
[INFO]2021-03-02 16:20:07,362: import button.main_button
[INFO]2021-03-02 16:20:07,372: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020900575270>>
[INFO]2021-03-02 16:20:07,473: import door.main_door
[INFO]2021-03-02 16:20:07,480: import elevator.main_elevator
[INFO]2021-03-02 16:20:07,481: import virtualDoor.main_doorCtrl
[INFO]2021-03-02 16:20:09,830: create lock <lock name:IOAlarm.s_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000209005BDF60>>
[DEBUG]2021-03-02 16:20:09,832: create aliveObj magneticAGV01 二维码掉线异常 timeout 120
[SUCC]2021-03-02 16:20:09,839: utility start, pid=10192, ppid=9784
[DEBUG]2021-03-02 16:20:09,840: start timer
[INFO]2021-03-02 16:20:09,847: load agv file: D:\python_lx\akm\agvCtrl/projects/akm/agv.cfg
[INFO]2021-03-02 16:20:09,847: create lock <lock name:agvList.AGV23.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020906691450>>
[DEBUG]2021-03-02 16:20:09,848: create aliveObj AGV23 AGV离线异常 timeout 300
[INFO]2021-03-02 16:20:09,849: AGV23 start agvList run thread
[INFO]2021-03-02 16:20:09,850: create lock <lock name:agv.AGV23.lock_status,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020906691DB0>>
[DEBUG]2021-03-02 16:20:09,850: try connect AGV23 192.168.20.198:19204
[INFO]2021-03-02 16:20:09,850: AGV23 start agvList run2 thread
[WARN]2021-03-02 16:20:09,852: Local server start! version 3.8.0, path D:\python_lx\akm\common, pid 10192
[INFO]2021-03-02 16:20:09,852: add_ignore: taskStatus
[INFO]2021-03-02 16:20:13,801: AGV23 connected 192.168.20.198 19204
[WARN]2021-03-02 16:20:13,801: agvThread.AGV23[tid:14640] <lock name:agv.AGV23.lock_status,<locked _thread.RLock object owner=14640 count=1 at 0x0000020906691DB0>> ,hold 3951 ms
[INFO]2021-03-02 16:20:13,803: name=agvThread.AGV23, pid=10192, tid=14640
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_lx/akm/agvCtrl/agvList.py", line 565, in run() 
[03] File "D:/python_lx/akm/driver/seerAgv/agvCtrl.py", line 36, in checkLink() 
[04] File "D:/python_lx/akm/driver/seerAgv/agvApi.py", line 184, in checkLink() 
[05] File "D:/python_lx/akm/common/lock.py", line 102, in release() 
[06] File "D:/python_lx/akm/common/enhance.py", line 268, in getTrace() 
[07] File "D:/python_lx/akm/common/enhance.py", line 248, in getThreadStack()
[INFO]2021-03-02 16:20:13,804: create lock <lock name:agv.AGV23.lock_ctrl,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020906691C00>>
[DEBUG]2021-03-02 16:20:13,805: try connect AGV23 192.168.20.198:19205
[INFO]2021-03-02 16:20:13,814: AGV23 connected 192.168.20.198 19205
[INFO]2021-03-02 16:20:13,816: create lock <lock name:agv.AGV23.lock_task,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020906691BD0>>
[DEBUG]2021-03-02 16:20:13,816: try connect AGV23 192.168.20.198:19206
[INFO]2021-03-02 16:20:13,831: AGV23 connected 192.168.20.198 19206
[INFO]2021-03-02 16:20:13,832: create lock <lock name:agv.AGV23.lock_conf,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020906691C30>>
[DEBUG]2021-03-02 16:20:13,832: try connect AGV23 192.168.20.198:19207
[INFO]2021-03-02 16:20:13,851: AGV23 connected 192.168.20.198 19207
[INFO]2021-03-02 16:20:13,851: create lock <lock name:agv.AGV23.lock_core,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020905F9C630>>
[DEBUG]2021-03-02 16:20:13,852: try connect AGV23 192.168.20.198:19208
[INFO]2021-03-02 16:20:13,946: AGV23 connected 192.168.20.198 19208
[INFO]2021-03-02 16:20:13,953: create lock <lock name:agv.AGV23.lock_other,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020905F9C600>>
[DEBUG]2021-03-02 16:20:13,960: try connect AGV23 192.168.20.198:19210
[INFO]2021-03-02 16:20:13,982: AGV23 connected 192.168.20.198 19210
[INFO]2021-03-02 16:20:13,999: AGV23 current map AKM-FQC
[INFO]2021-03-02 16:20:14,060: AGV23 is online
[CRITICAL]2021-03-02 16:20:18,968: [modbusApi: 192.168.20.150] execute fcode=1, addr=0 exception:  cause a error: timed out
pid=10192, ppid=9784, tid=4776
Traceback (most recent call last):
  File "D:\python_lx\akm\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 152, in execute
    self.open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 99, in open
    self._do_open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
socket.timeout: timed out

[WARN]2021-03-02 16:20:18,970: timer_thread[tid:4776] <locked _thread.RLock object owner=4776 count=1 at 0x000002090667DFC0> ,hold 5034 ms
[INFO]2021-03-02 16:20:18,972: name=timer_thread, pid=10192, tid=4776
[01] File "C:/Python38/lib/threading.py", line 870, in run() 
[02] File "D:/python_lx/akm/common/mytimer.py", line 113, in _loop() 
[03] File "D:/python_lx/akm/virtualDoor/doorCtrlRunTasks.py", line 81, in _monitorDevices() 
[04] File "D:/python_lx/akm/virtualDoor/magneticAGV.py", line 140, in readDIList() 
[05] File "D:/python_lx/akm/virtualDoor/magneticAGV.py", line 192, in readDIList() 
[06] File "D:/python_lx/akm/common/lock.py", line 124, in _call() 
[07] File "D:/python_lx/akm/common/lock.py", line 102, in release() 
[08] File "D:/python_lx/akm/common/enhance.py", line 268, in getTrace() 
[09] File "D:/python_lx/akm/common/enhance.py", line 248, in getThreadStack()
[CRITICAL]2021-03-02 16:20:18,989: magneticAGV01 readDIList fail cause a error: timed out
pid=10192, ppid=9784, tid=4776
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 192, in readDIList
    return self._read(D0, IO_LENTH)
  File "D:\python_lx\akm\common\lock.py", line 122, in _call
    return func(*p,**pp)
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 226, in _read
    s = self.master.read(mdef.READ_COILS, addr, length)
  File "D:\python_lx\akm\common\modbusapi.py", line 45, in read
    return self.__execute(fcode, start, num)
  File "D:\python_lx\akm\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 152, in execute
    self.open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 99, in open
    self._do_open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
socket.timeout: timed out

[CRITICAL]2021-03-02 16:20:19,000: magneticAGV readDIList error cause a error: timed out
pid=10192, ppid=9784, tid=4776
Traceback (most recent call last):
  File "D:\python_lx\akm\virtualDoor\doorCtrlRunTasks.py", line 81, in _monitorDevices
    s1 = magneticAGV.readDIList(d)["status"]
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 140, in readDIList
    result = remoteioInfo.readDIList()
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 192, in readDIList
    return self._read(D0, IO_LENTH)
  File "D:\python_lx\akm\common\lock.py", line 122, in _call
    return func(*p,**pp)
  File "D:\python_lx\akm\virtualDoor\magneticAGV.py", line 226, in _read
    s = self.master.read(mdef.READ_COILS, addr, length)
  File "D:\python_lx\akm\common\modbusapi.py", line 45, in read
    return self.__execute(fcode, start, num)
  File "D:\python_lx\akm\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Python38\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 152, in execute
    self.open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus.py", line 99, in open
    self._do_open()
  File "C:\Python38\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
socket.timeout: timed out


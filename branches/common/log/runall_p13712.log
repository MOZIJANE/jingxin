[INFO]2021-06-03 15:42:04,291: log files at C:\Users\Administrator\Desktop\SVN\branches\common\log
[INFO]2021-06-03 15:42:04,293: find module account.main_account
[INFO]2021-06-03 15:42:04,297: find module agvCtrl.main_agv
[INFO]2021-06-03 15:42:04,299: find module agvDevice.main_agvDevice
[INFO]2021-06-03 15:42:04,302: find module alarm.main_alarm
[INFO]2021-06-03 15:42:04,305: find module auth.main_auth
[INFO]2021-06-03 15:42:04,307: find module door.main_door
[INFO]2021-06-03 15:42:04,309: find module elevator.main_elevator
[INFO]2021-06-03 15:42:04,315: find module feed.main_feed
[INFO]2021-06-03 15:42:04,317: find module menu.main_menu
[INFO]2021-06-03 15:42:04,320: find module pharmapackCtrl.main_scadaCtrl
[INFO]2021-06-03 15:42:04,322: find module webFront.main_web
[INFO]2021-06-03 15:42:04,324: find module wmqtt.main_wmqtt
[INFO]2021-06-03 15:42:04,328: import account.main_account
[INFO]2021-06-03 15:42:04,751: import agvCtrl.main_agv
[INFO]2021-06-03 15:42:06,458: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C8545AEE0>>
[INFO]2021-06-03 15:42:06,470: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C854B70D0>>
[INFO]2021-06-03 15:42:06,877: create lock <lock name:timer.lock_2252802606864,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C857B7648>>
[ERROR]2021-06-03 15:42:06,925: mqtt is disabled
[INFO]2021-06-03 15:42:06,927: mqtt: subscribe [alarm/raise/+]
[INFO]2021-06-03 15:42:06,930: mqtt: subscribe [alarm/clear/+]
[INFO]2021-06-03 15:42:10,235: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-06-03 15:42:10,353: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C85BE09E0>>
[WARNING]2021-06-03 15:42:10,399: use mockAgvCtrl
[INFO]2021-06-03 15:42:10,876: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020CFFE2CDC8>>
[INFO]2021-06-03 15:42:11,564: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C85D3CD50>>
[INFO]2021-06-03 15:42:11,578: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C85E7B080>>
[INFO]2021-06-03 15:42:11,712: charge policy 1 , fix time
[INFO]2021-06-03 15:42:11,781: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C85E7B2D8>>
[INFO]2021-06-03 15:42:12,444: start load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\comba-ZSC-F1-F3.smap
[DEBUG]2021-06-03 15:42:12,949: elevator thread start
[INFO]2021-06-03 15:42:13,094: load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\comba-ZSC-F1-F3.smap ,used 667 ms
[INFO]2021-06-03 15:42:13,130: start load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\comba-ZXC-3F.smap
[INFO]2021-06-03 15:42:13,359: load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\comba-ZXC-3F.smap ,used 260 ms
[INFO]2021-06-03 15:42:13,378: start load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\comba-ZXC-F3.smap
[INFO]2021-06-03 15:42:13,622: load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\comba-ZXC-F3.smap ,used 260 ms
[INFO]2021-06-03 15:42:13,631: import agvDevice.main_agvDevice
[INFO]2021-06-03 15:42:13,632: import alarm.main_alarm
[INFO]2021-06-03 15:42:13,638: import auth.main_auth
[INFO]2021-06-03 15:42:13,655: import door.main_door
[INFO]2021-06-03 15:42:13,811: import elevator.main_elevator
[INFO]2021-06-03 15:42:13,898: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C862BF440>>
[INFO]2021-06-03 15:42:13,904: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C86212DC8>>
[INFO]2021-06-03 15:42:13,910: import feed.main_feed
[INFO]2021-06-03 15:42:13,970: create lock <lock name:feedTask.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C8635F030>>
[INFO]2021-06-03 15:42:13,986: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C8635F760>>
[INFO]2021-06-03 15:42:14,223: import menu.main_menu
[INFO]2021-06-03 15:42:14,237: import pharmapackCtrl.main_scadaCtrl
[INFO]2021-06-03 15:42:16,767: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C863AAA80>>
[INFO]2021-06-03 15:42:16,772: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C863AA990>>
[INFO]2021-06-03 15:42:17,021: import webFront.main_web
[INFO]2021-06-03 15:42:17,039: import wmqtt.main_wmqtt
[SUCC]2021-06-03 15:42:17,074: utility start, pid=13712, ppid=19256
[DEBUG]2021-06-03 15:42:17,079: start timer
[INFO]2021-06-03 15:42:17,128: load agv file: C:\Users\Administrator\Desktop\SVN\branches\agvCtrl/projects/test/agv.cfg
[INFO]2021-06-03 15:42:17,133: create lock <lock name:agvList.AGV02.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x0000020C863AA7B0>>
[DEBUG]2021-06-03 15:42:17,143: create aliveObj AGV02 AGV离线异常 timeout 300
[INFO]2021-06-03 15:42:17,147: AGV02 start agvList run thread
[INFO]2021-06-03 15:42:17,148: AGV02 start agvList run2 thread
[ERROR]2021-06-03 15:42:17,206: agv check init error False
[INFO]2021-06-03 15:42:17,215: add_ignore: taskStatus
[INFO]2021-06-03 15:42:17,221: add_ignore: api/elevator/status
[INFO]2021-06-03 15:42:17,224: add_ignore: scada/getTask
[INFO]2021-06-03 15:42:17,712: AGV02 current map comba-ZSC-F1-F3
[INFO]2021-06-03 15:42:17,716: AGV02 is online
[CRITICAL]2021-06-03 15:42:21,274: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=13712, ppid=19256, tid=16924
Traceback (most recent call last):
  File "C:\Python37\lib\urllib\request.py", line 1317, in do_open
    encode_chunked=req.has_header('Transfer-encoding'))
  File "C:\Python37\lib\http\client.py", line 1229, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1275, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1224, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1016, in _send_output
    self.send(msg)
  File "C:\Python37\lib\http\client.py", line 956, in send
    self.connect()
  File "C:\Python37\lib\http\client.py", line 928, in connect
    (self.host,self.port), self.timeout, self.source_address)
  File "C:\Python37\lib\socket.py", line 727, in create_connection
    raise err
  File "C:\Python37\lib\socket.py", line 716, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\branches\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python37\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python37\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python37\lib\urllib\request.py", line 543, in _open
    '_open', req)
  File "C:\Python37\lib\urllib\request.py", line 503, in _call_chain
    result = func(*args)
  File "C:\Python37\lib\urllib\request.py", line 1345, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python37\lib\urllib\request.py", line 1319, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "C:\Users\Administrator\Desktop\SVN\branches\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-06-03 15:42:24,358: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=13712, ppid=19256, tid=16924
Traceback (most recent call last):
  File "C:\Python37\lib\urllib\request.py", line 1317, in do_open
    encode_chunked=req.has_header('Transfer-encoding'))
  File "C:\Python37\lib\http\client.py", line 1229, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1275, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1224, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1016, in _send_output
    self.send(msg)
  File "C:\Python37\lib\http\client.py", line 956, in send
    self.connect()
  File "C:\Python37\lib\http\client.py", line 928, in connect
    (self.host,self.port), self.timeout, self.source_address)
  File "C:\Python37\lib\socket.py", line 727, in create_connection
    raise err
  File "C:\Python37\lib\socket.py", line 716, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\branches\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python37\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python37\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python37\lib\urllib\request.py", line 543, in _open
    '_open', req)
  File "C:\Python37\lib\urllib\request.py", line 503, in _call_chain
    result = func(*args)
  File "C:\Python37\lib\urllib\request.py", line 1345, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python37\lib\urllib\request.py", line 1319, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "C:\Users\Administrator\Desktop\SVN\branches\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[CRITICAL]2021-06-03 15:42:27,444: agvApi.init cause a error: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')
pid=13712, ppid=19256, tid=16924
Traceback (most recent call last):
  File "C:\Python37\lib\urllib\request.py", line 1317, in do_open
    encode_chunked=req.has_header('Transfer-encoding'))
  File "C:\Python37\lib\http\client.py", line 1229, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1275, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1224, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Python37\lib\http\client.py", line 1016, in _send_output
    self.send(msg)
  File "C:\Python37\lib\http\client.py", line 956, in send
    self.connect()
  File "C:\Python37\lib\http\client.py", line 928, in connect
    (self.host,self.port), self.timeout, self.source_address)
  File "C:\Python37\lib\socket.py", line 727, in create_connection
    raise err
  File "C:\Python37\lib\socket.py", line 716, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\branches\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Python37\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Python37\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Python37\lib\urllib\request.py", line 543, in _open
    '_open', req)
  File "C:\Python37\lib\urllib\request.py", line 503, in _call_chain
    result = func(*args)
  File "C:\Python37\lib\urllib\request.py", line 1345, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Python37\lib\urllib\request.py", line 1319, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvApi.py", line 40, in init
    _http_get(url + '/api/agv/init', param)
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvApi.py", line 61, in _http_get
    r = webutility.http_get(url, param, timeout=45,writelog=False)
  File "C:\Users\Administrator\Desktop\SVN\branches\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:5551/api/agv/init', {'appName': 'scadaTask'}, 'error:', '<urlopen error [WinError 10061] 由于目标计算机积极拒绝，无法连接。>')

[DEBUG]2021-06-03 15:42:29,511: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-06-03 15:42:29,515: scadaTask init client agvApi
[DEBUG]2021-06-03 15:42:29,520: used 9ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[DEBUG]2021-06-03 15:42:32,679: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-06-03 15:42:32,741: used 62ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[WARNING]2021-06-03 15:42:33,011: timer_thread[tid:16924] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=16924 count=1 at 0x0000020C863AAA80>> ,hold 13911 ms
[INFO]2021-06-03 15:42:33,187: name=timer_thread, pid=13712, tid=16924
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "C:/Users/Administrator/Desktop/SVN/branches/common/mytimer.py", line 113, in _loop() 
[03] File "C:/Users/Administrator/Desktop/SVN/branches/common/lock.py", line 122, in _call() 
[04] File "C:/Users/Administrator/Desktop/SVN/branches/common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/branches/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/branches/common/enhance.py", line 240, in getThreadStack()
[WARNING]2021-06-03 15:42:40,619: runTask:stop save file
[ERROR]2021-06-03 15:42:40,628: process exited, living 0:00:36.748912 seconds

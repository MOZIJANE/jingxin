[INFO]2021-03-17 10:35:23,257: log files at C:\Users\Administrator\Desktop\SVN\branches\common\log
[INFO]2021-03-17 10:35:23,258: find module account.main_account
[INFO]2021-03-17 10:35:23,259: find module agvCtrl.main_agv
[INFO]2021-03-17 10:35:23,260: find module agvDevice.main_agvDevice
[INFO]2021-03-17 10:35:23,261: find module alarm.main_alarm
[INFO]2021-03-17 10:35:23,262: find module auth.main_auth
[INFO]2021-03-17 10:35:23,265: find module door.main_door
[INFO]2021-03-17 10:35:23,266: find module elevator.main_elevator
[INFO]2021-03-17 10:35:23,267: find module menu.main_menu
[INFO]2021-03-17 10:35:23,268: find module pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-17 10:35:23,269: find module webFront.main_web
[INFO]2021-03-17 10:35:23,269: find module wmqtt.main_wmqtt
[INFO]2021-03-17 10:35:23,270: import account.main_account
[INFO]2021-03-17 10:35:23,352: import agvCtrl.main_agv
[INFO]2021-03-17 10:35:23,640: create lock <lock name:doorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A92B48C8>>
[INFO]2021-03-17 10:35:23,643: create lock <lock name:door.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A92B4A80>>
[INFO]2021-03-17 10:35:23,733: create lock <lock name:timer.lock_2511102880680,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A960C4E0>>
[ERROR]2021-03-17 10:35:23,744: mqtt is disabled
[INFO]2021-03-17 10:35:23,745: mqtt: subscribe [alarm/raise/+]
[INFO]2021-03-17 10:35:23,745: mqtt: subscribe [alarm/clear/+]
[INFO]2021-03-17 10:35:26,776: Mongodb connect to 127.0.0.1 port 27017
[INFO]2021-03-17 10:35:26,803: create lock <lock name:elevatorMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A7913878>>
[WARNING]2021-03-17 10:35:26,819: use mockAgvCtrl
[INFO]2021-03-17 10:35:26,822: create lock <lock name:mapMgr.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A7C937B0>>
[INFO]2021-03-17 10:35:27,101: create lock <lock name:agvList.g_agvLock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A9AA4850>>
[INFO]2021-03-17 10:35:27,106: create lock <lock name:taskList.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A9AC0530>>
[INFO]2021-03-17 10:35:27,218: charge policy 1 , fix time
[INFO]2021-03-17 10:35:27,270: create lock <lock name:agvApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248A9AC0C38>>
[INFO]2021-03-17 10:35:27,891: start load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\20190911_F1.smap
[DEBUG]2021-03-17 10:35:28,127: create aliveObj DOOR40 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:28,129: create aliveObj DOOR41 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:28,145: elevator thread start
[INFO]2021-03-17 10:35:28,167: load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\20190911_F1.smap ,used 285 ms
[INFO]2021-03-17 10:35:28,177: start load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\fp-neiwei.smap
[INFO]2021-03-17 10:35:28,371: load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\fp-neiwei.smap ,used 203 ms
[INFO]2021-03-17 10:35:28,384: start load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\fp20190712-1.smap
[DEBUG]2021-03-17 10:35:29,549: create aliveObj DOOR13 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,551: create aliveObj DOOR23 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,556: create aliveObj DOOR08 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,557: create aliveObj DOOR09 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,558: create aliveObj DOOR15 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,558: create aliveObj DOOR07 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,559: create aliveObj DOOR04 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,560: create aliveObj DOOR06 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,560: create aliveObj DOOR17 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,561: create aliveObj DOOR18 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,561: create aliveObj DOOR20 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,564: create aliveObj DOOR25 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,564: create aliveObj DOOR101 门控离线异常 timeout 60
[DEBUG]2021-03-17 10:35:29,568: create aliveObj DOOR27 门控离线异常 timeout 60
[INFO]2021-03-17 10:35:29,601: load map C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\projects\test\fp20190712-1.smap ,used 1228 ms
[INFO]2021-03-17 10:35:29,605: import agvDevice.main_agvDevice
[INFO]2021-03-17 10:35:29,607: import alarm.main_alarm
[INFO]2021-03-17 10:35:29,609: import auth.main_auth
[INFO]2021-03-17 10:35:29,616: import door.main_door
[INFO]2021-03-17 10:35:29,628: import elevator.main_elevator
[INFO]2021-03-17 10:35:29,636: create lock <lock name:elevatorApi.tcp_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC3C0508>>
[INFO]2021-03-17 10:35:29,638: create lock <lock name:elevatorApi.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC3C0030>>
[INFO]2021-03-17 10:35:29,639: import menu.main_menu
[INFO]2021-03-17 10:35:29,647: import pharmapackCtrl.main_scadaCtrl
[INFO]2021-03-17 10:35:29,716: create lock <lock name:runTasks.g_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC42DFA8>>
[INFO]2021-03-17 10:35:29,720: create lock <lock name:runTasks.pre_lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC42DC10>>
[INFO]2021-03-17 10:35:30,123: import webFront.main_web
[INFO]2021-03-17 10:35:30,129: import wmqtt.main_wmqtt
[SUCC]2021-03-17 10:35:30,139: utility start, pid=13016, ppid=2432
[DEBUG]2021-03-17 10:35:30,143: start timer
[INFO]2021-03-17 10:35:30,150: load agv file: C:\Users\Administrator\Desktop\SVN\branches\agvCtrl/projects/test/agv.cfg
[INFO]2021-03-17 10:35:30,151: create lock <lock name:agvList.AGV01.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC7760A8>>
[DEBUG]2021-03-17 10:35:30,153: create aliveObj AGV01 AGV离线异常 timeout 300
[INFO]2021-03-17 10:35:30,154: AGV01 start agvList run thread
[INFO]2021-03-17 10:35:30,155: AGV01 start agvList run2 thread
[INFO]2021-03-17 10:35:30,160: create lock <lock name:agvList.AGV02.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC776558>>
[ERROR]2021-03-17 10:35:30,166: agv check init error False
[DEBUG]2021-03-17 10:35:30,167: create aliveObj AGV02 AGV离线异常 timeout 300
[INFO]2021-03-17 10:35:30,174: AGV02 start agvList run thread
[INFO]2021-03-17 10:35:30,175: AGV02 start agvList run2 thread
[INFO]2021-03-17 10:35:30,176: create lock <lock name:agvList.AGV03.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC7764E0>>
[INFO]2021-03-17 10:35:30,180: AGV02 current map fp20190712-1
[INFO]2021-03-17 10:35:30,182: AGV02 is online
[DEBUG]2021-03-17 10:35:30,182: create aliveObj AGV03 AGV离线异常 timeout 300
[INFO]2021-03-17 10:35:30,189: AGV03 start agvList run thread
[INFO]2021-03-17 10:35:30,189: AGV03 start agvList run2 thread
[INFO]2021-03-17 10:35:30,190: create lock <lock name:agvList.AGV05.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC776918>>
[INFO]2021-03-17 10:35:30,195: AGV03 current map fp20190712-1
[INFO]2021-03-17 10:35:30,197: AGV03 is online
[DEBUG]2021-03-17 10:35:30,198: create aliveObj AGV05 AGV离线异常 timeout 300
[INFO]2021-03-17 10:35:30,202: AGV05 start agvList run thread
[INFO]2021-03-17 10:35:30,202: AGV05 start agvList run2 thread
[INFO]2021-03-17 10:35:30,203: create lock <lock name:agvList.AGV06.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC776B70>>
[INFO]2021-03-17 10:35:30,211: AGV05 current map fp20190712-1
[INFO]2021-03-17 10:35:30,213: AGV05 is online
[DEBUG]2021-03-17 10:35:30,213: create aliveObj AGV06 AGV离线异常 timeout 300
[INFO]2021-03-17 10:35:30,218: AGV06 start agvList run thread
[INFO]2021-03-17 10:35:30,219: AGV06 start agvList run2 thread
[INFO]2021-03-17 10:35:30,219: create lock <lock name:agvList.AGV07.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248AC776DC8>>
[INFO]2021-03-17 10:35:30,225: AGV06 current map fp20190712-1
[DEBUG]2021-03-17 10:35:30,228: create aliveObj AGV07 AGV离线异常 timeout 300
[INFO]2021-03-17 10:35:30,229: AGV06 is online
[INFO]2021-03-17 10:35:30,230: AGV07 start agvList run thread
[INFO]2021-03-17 10:35:30,232: AGV07 start agvList run2 thread
[INFO]2021-03-17 10:35:30,233: create lock <lock name:agvList.AGV08.lock,<unlocked _thread.RLock object owner=0 count=0 at 0x00000248ACC5C030>>
[INFO]2021-03-17 10:35:30,238: AGV07 current map fp20190712-1
[DEBUG]2021-03-17 10:35:30,241: create aliveObj AGV08 AGV离线异常 timeout 300
[INFO]2021-03-17 10:35:30,244: AGV07 is online
[INFO]2021-03-17 10:35:30,246: AGV08 start agvList run thread
[INFO]2021-03-17 10:35:30,247: AGV08 start agvList run2 thread
[INFO]2021-03-17 10:35:30,264: AGV08 current map fp20190712-1
[INFO]2021-03-17 10:35:30,277: AGV08 is online
[INFO]2021-03-17 10:35:30,317: add_ignore: taskStatus
[INFO]2021-03-17 10:35:30,324: add_ignore: api/elevator/status
[INFO]2021-03-17 10:35:30,327: add_ignore: scada/getTask
[INFO]2021-03-17 10:35:30,682: AGV01 current map fp20190712-1
[INFO]2021-03-17 10:35:30,688: AGV01 is online
[DEBUG]2021-03-17 10:35:32,181: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-03-17 10:35:32,191: scadaTask init client agvApi
[DEBUG]2021-03-17 10:35:32,197: used 16ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[DEBUG]2021-03-17 10:35:33,142: GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask addr: 127.0.0.1
[INFO]2021-03-17 10:35:33,314: scadaTask init client agvApi
[DEBUG]2021-03-17 10:35:33,375: used 233ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/init?appName=scadaTask
[DEBUG]2021-03-17 10:35:35,363: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-03-17 10:35:35,484: used 121ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[WARNING]2021-03-17 10:35:35,550: timer_thread[tid:10652] <lock name:runTasks.g_lock,<locked _thread.RLock object owner=10652 count=1 at 0x00000248AC42DFA8>> ,hold 3386 ms
[INFO]2021-03-17 10:35:35,653: name=timer_thread, pid=13016, tid=10652
[01] File "C:/Python37/lib/threading.py", line 865, in run() 
[02] File "C:/Users/Administrator/Desktop/SVN/branches/common/mytimer.py", line 113, in _loop() 
[03] File "C:/Users/Administrator/Desktop/SVN/branches/common/lock.py", line 122, in _call() 
[04] File "C:/Users/Administrator/Desktop/SVN/branches/common/lock.py", line 100, in release() 
[05] File "C:/Users/Administrator/Desktop/SVN/branches/common/enhance.py", line 258, in getTrace() 
[06] File "C:/Users/Administrator/Desktop/SVN/branches/common/enhance.py", line 240, in getThreadStack()
[DEBUG]2021-03-17 10:35:36,694: GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask addr: 127.0.0.1
[DEBUG]2021-03-17 10:35:36,771: used 77ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/startCharge?appName=scadaTask
[ERROR]2021-03-17 10:36:30,920: raise alarm obj=DOOR40, typeId=39998, desc=门控离线异常, id=60516b2e84e1c5c371a6b21a
[ERROR]2021-03-17 10:36:31,128: raise alarm obj=DOOR41, typeId=39998, desc=门控离线异常, id=60516b2f84e1c5c371a6b220
[ERROR]2021-03-17 10:36:31,285: raise alarm obj=DOOR13, typeId=39998, desc=门控离线异常, id=60516b2f84e1c5c371a6b222
[ERROR]2021-03-17 10:36:31,393: raise alarm obj=DOOR23, typeId=39998, desc=门控离线异常, id=60516b2f84e1c5c371a6b225
[ERROR]2021-03-17 10:36:31,580: raise alarm obj=DOOR08, typeId=39998, desc=门控离线异常, id=60516b2f84e1c5c371a6b227
[ERROR]2021-03-17 10:36:31,674: raise alarm obj=DOOR09, typeId=39998, desc=门控离线异常, id=60516b2f84e1c5c371a6b229
[ERROR]2021-03-17 10:36:31,799: raise alarm obj=DOOR15, typeId=39998, desc=门控离线异常, id=60516b2f84e1c5c371a6b22b
[ERROR]2021-03-17 10:36:32,002: raise alarm obj=DOOR07, typeId=39998, desc=门控离线异常, id=60516b2f84e1c5c371a6b22d
[ERROR]2021-03-17 10:36:32,095: raise alarm obj=DOOR04, typeId=39998, desc=门控离线异常, id=60516b3084e1c5c371a6b22f
[ERROR]2021-03-17 10:36:32,281: raise alarm obj=DOOR06, typeId=39998, desc=门控离线异常, id=60516b3084e1c5c371a6b231
[ERROR]2021-03-17 10:36:32,419: raise alarm obj=DOOR17, typeId=39998, desc=门控离线异常, id=60516b3084e1c5c371a6b233
[ERROR]2021-03-17 10:36:32,558: raise alarm obj=DOOR18, typeId=39998, desc=门控离线异常, id=60516b3084e1c5c371a6b235
[ERROR]2021-03-17 10:36:32,745: raise alarm obj=DOOR20, typeId=39998, desc=门控离线异常, id=60516b3084e1c5c371a6b237
[ERROR]2021-03-17 10:36:32,884: raise alarm obj=DOOR25, typeId=39998, desc=门控离线异常, id=60516b3084e1c5c371a6b239
[ERROR]2021-03-17 10:36:33,010: raise alarm obj=DOOR101, typeId=39998, desc=门控离线异常, id=60516b3084e1c5c371a6b23b
[ERROR]2021-03-17 10:36:33,152: raise alarm obj=DOOR27, typeId=39998, desc=门控离线异常, id=60516b3184e1c5c371a6b23d
[DEBUG]2021-03-17 10:36:57,821: GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=LM242&mapId=fp20190712-1&taskId=60516b473ea14a7aa15ab4be&timeout=10 addr: 127.0.0.1
[INFO]2021-03-17 10:37:00,654: apply AGV05 ,taskId: 60516b473ea14a7aa15ab4be ,loc fp20190712-1.LM242 ,autoLock False , used 2757 ms
[DEBUG]2021-03-17 10:37:00,715: used 2894ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/apply?appName=scadaTask&autoLock=False&exclude&loc=LM242&mapId=fp20190712-1&taskId=60516b473ea14a7aa15ab4be&timeout=10
[DEBUG]2021-03-17 10:37:01,098: GET: http://127.0.0.1:5551/api/agv/checkInitStatus?agv=AGV05&loc=None&timeoutSec=90 addr: 127.0.0.1
[DEBUG]2021-03-17 10:37:01,251: used 153ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/checkInitStatus?agv=AGV05&loc=None&timeoutSec=90
[DEBUG]2021-03-17 10:37:01,650: GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV05&appName=scadaTask&taskId=60516b473ea14a7aa15ab4be addr: 127.0.0.1
[DEBUG]2021-03-17 10:37:01,712: lock:  AGV05 taskId 60516b473ea14a7aa15ab4be app scadaTask
[WARNING]2021-03-17 10:37:02,870: AGV05 clear task finish, cur= fp20190712-1.AP863 task_status= 0
[DEBUG]2021-03-17 10:37:02,948: used 1298ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/lock?agv=AGV05&appName=scadaTask&taskId=60516b473ea14a7aa15ab4be
[DEBUG]2021-03-17 10:37:04,856: GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV05&loc=None&timeoutSec=90 addr: 127.0.0.1
[INFO]2021-03-17 10:37:04,886: _jack in jackMgr: AGV05 down [{'id': 0, 'source': 'normal', 'status': True}, {'id': 1, 'source': 'normal', 'status': True}]
[INFO]2021-03-17 10:37:04,948: AGV05 jack down status:  1
[DEBUG]2021-03-17 10:37:05,024: used 168ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/jackdown?agv=AGV05&loc=None&timeoutSec=90
[DEBUG]2021-03-17 10:37:05,871: GET: http://127.0.0.1:5551/api/agv/checkLineIdle?agv=AGV05&appName=scadaTask&end=AP238&start=LM242 addr: 127.0.0.1
[DEBUG]2021-03-17 10:37:05,978: used 107ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/checkLineIdle?agv=AGV05&appName=scadaTask&end=AP238&start=LM242
[DEBUG]2021-03-17 10:37:06,672: GET: http://127.0.0.1:5551/api/agv/move?WorkPlace=None&agv=AGV05&agvId=AGV05&appName=scadaTask&floorId=fp20190712-1&isRotate&loc=fp20190712-1.LM242&location=LM242&recognize=False&seer_jackup=JackUnload&taskId=60516b473ea14a7aa15ab4be_1&taskType=scadaTask&timeoutSec=86400 addr: 127.0.0.1
[CRITICAL]2021-03-17 10:37:06,903: invoke <function urlMove at 0x00000248AA11D400> cause a error: fp20190712-1.AP863->fp20190712-1.LM242 路径不存在1,agvId=AGV05
pid=13016, ppid=2432, tid=8420
Traceback (most recent call last):
  File "C:\Users\Administrator\Desktop\SVN\branches\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\main_agv.py", line 123, in urlMove
    agvControl.move(target=target, agvId=agvId, taskId=taskId, timeout=timeout,paramObj=paramObj)
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvControl.py", line 1240, in move
    _func()
  File "C:\Users\Administrator\Desktop\SVN\branches\common\lock.py", line 120, in _call
    return func(*p,**pp)
  File "C:\Users\Administrator\Desktop\SVN\branches\agvCtrl\agvControl.py", line 1206, in _func
    raise Exception(mapMgr.formatLoc(agv.mapId,agv.curTarget)+"->"+target+" 路径不存在1,agvId="+agv.agvId)
Exception: fp20190712-1.AP863->fp20190712-1.LM242 路径不存在1,agvId=AGV05

[DEBUG]2021-03-17 10:37:07,227: GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV05&appName=scadaTask&taskId=60516b473ea14a7aa15ab4be addr: 127.0.0.1
[DEBUG]2021-03-17 10:37:07,352: used 125ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/isLocked?agv=AGV05&appName=scadaTask&taskId=60516b473ea14a7aa15ab4be
[DEBUG]2021-03-17 10:37:07,660: GET: http://127.0.0.1:5551/api/agv/release?agv=AGV05&appName=scadaTask&force=False&taskId=60516b473ea14a7aa15ab4be addr: 127.0.0.1
[DEBUG]2021-03-17 10:37:07,802: unlock: AGV05 taskId 60516b473ea14a7aa15ab4be app scadaTask force False
[DEBUG]2021-03-17 10:37:07,864: used 204ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/release?agv=AGV05&appName=scadaTask&force=False&taskId=60516b473ea14a7aa15ab4be
[DEBUG]2021-03-17 10:37:08,188: GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV05&appName=scadaTask&force=False&timeout=10800 addr: 127.0.0.1
[INFO]2021-03-17 10:37:08,264: AGV05 is in home loc fp20190712-1.AP863
[DEBUG]2021-03-17 10:37:08,312: used 124ms 200 OK application/json;charset=utf-8, GET: http://127.0.0.1:5551/api/agv/goHome?agv=AGV05&appName=scadaTask&force=False&timeout=10800

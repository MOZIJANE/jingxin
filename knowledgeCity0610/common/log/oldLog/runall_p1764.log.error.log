[CRITICAL]2021-05-26 12:07:55,005: readDIList error cause a error: ('http get', 'http://127.0.0.1:8999/api/remoteio/readDOList', {'id': 'upStation01'}, 'error:', 'timed out')
pid=1764, ppid=10836, tid=1296
Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 543, in _open
    '_open', req)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 503, in _call_chain
    result = func(*args)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 1345, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 1320, in do_open
    r = h.getresponse()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\http\client.py", line 1321, in getresponse
    response.begin()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\http\client.py", line 296, in begin
    version, status, reason = self._read_status()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\http\client.py", line 257, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\socket.py", line 589, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\autoCtrl\deviceCtrl.py", line 71, in _monitorDevices
    s1 = ioApi.readDOList(devices[d]["io1"])["status"] #上板机
  File "..\remoteio\remoteioApi.py", line 73, in readDOList
    return _remoteio('/api/remoteio/readDOList', id, param)
  File "..\remoteio\remoteioApi.py", line 100, in _remoteio
    return http_get(url + apiurl, param)
  File "..\remoteio\remoteioApi.py", line 16, in http_get
    r = webutility.http_get(url, param)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:8999/api/remoteio/readDOList', {'id': 'upStation01'}, 'error:', 'timed out')

[CRITICAL]2021-05-26 12:07:58,879: [modbusApi: 172.16.167.221] execute fcode=1, addr=8256 exception:  cause a error: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
pid=1764, ppid=10836, tid=3996
Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus.py", line 298, in execute
    response = self._recv(expected_length)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 216, in _recv
    rcv_byte = self._sock.recv(1)
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。

[CRITICAL]2021-05-26 12:07:59,367: upStation01 readDIList fail cause a error: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
pid=1764, ppid=10836, tid=3996
Traceback (most recent call last):
  File "..\remoteio\remoteioMgr.py", line 262, in readDOList
    return self._read(M30, IO_LENTH)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\lock.py", line 122, in _call
    return func(*p,**pp)
  File "..\remoteio\remoteioMgr.py", line 314, in _read
    s = self.master.read(mdef.READ_COILS,addr, length)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 45, in read
    return self.__execute(fcode, start, num)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus.py", line 298, in execute
    response = self._recv(expected_length)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 216, in _recv
    rcv_byte = self._sock.recv(1)
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。

[CRITICAL]2021-05-26 12:07:59,467: invoke <function urlReadDOList at 0x00000239F711EF28> cause a error: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
pid=1764, ppid=10836, tid=3996
Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\remoteio\main_remoteio.py", line 87, in urlReadDOList
    return ioMgr.readDOList(id)
  File "..\remoteio\remoteioMgr.py", line 158, in readDOList
    result=remoteioInfo.readDOList()
  File "..\remoteio\remoteioMgr.py", line 262, in readDOList
    return self._read(M30, IO_LENTH)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\lock.py", line 122, in _call
    return func(*p,**pp)
  File "..\remoteio\remoteioMgr.py", line 314, in _read
    s = self.master.read(mdef.READ_COILS,addr, length)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 45, in read
    return self.__execute(fcode, start, num)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus.py", line 298, in execute
    response = self._recv(expected_length)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 216, in _recv
    rcv_byte = self._sock.recv(1)
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。

[CRITICAL]2021-05-26 12:08:12,205: readDIList error cause a error: ('http get', 'http://127.0.0.1:8999/api/remoteio/readDOList', {'id': 'upStation01'}, 'error:', 'timed out')
pid=1764, ppid=10836, tid=1296
Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\webutility.py", line 103, in http_get
    f = urllib.request.urlopen(u,timeout=timeout)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 222, in urlopen
    return opener.open(url, data, timeout)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 525, in open
    response = self._open(req, data)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 543, in _open
    '_open', req)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 503, in _call_chain
    result = func(*args)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 1345, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 1320, in do_open
    r = h.getresponse()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\http\client.py", line 1321, in getresponse
    response.begin()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\http\client.py", line 296, in begin
    version, status, reason = self._read_status()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\http\client.py", line 257, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\socket.py", line 589, in readinto
    return self._sock.recv_into(b)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\autoCtrl\deviceCtrl.py", line 71, in _monitorDevices
    s1 = ioApi.readDOList(devices[d]["io1"])["status"] #上板机
  File "..\remoteio\remoteioApi.py", line 73, in readDOList
    return _remoteio('/api/remoteio/readDOList', id, param)
  File "..\remoteio\remoteioApi.py", line 100, in _remoteio
    return http_get(url + apiurl, param)
  File "..\remoteio\remoteioApi.py", line 16, in http_get
    r = webutility.http_get(url, param)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\webutility.py", line 105, in http_get
    raise Exception("http get",url,params,"error:",str(e))
Exception: ('http get', 'http://127.0.0.1:8999/api/remoteio/readDOList', {'id': 'upStation01'}, 'error:', 'timed out')

[CRITICAL]2021-05-26 12:08:16,905: [modbusApi: 172.16.167.221] execute fcode=1, addr=8256 exception:  cause a error: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
pid=1764, ppid=10836, tid=6108
Traceback (most recent call last):
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 199, in _send
    flush_socket(self._sock, 3)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 52, in flush_socket
    i_socks = select.select(input_socks, input_socks, input_socks, 0.0)[0]
ValueError: file descriptor cannot be a negative integer (-1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus.py", line 292, in execute
    self._send(request)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 204, in _send
    self._do_open()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
TimeoutError: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。

[CRITICAL]2021-05-26 12:08:17,235: invoke <function urlReadDOList at 0x00000239F711EF28> cause a error: 'NoneType' object has no attribute 'close'
pid=1764, ppid=10836, tid=6108
Traceback (most recent call last):
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 199, in _send
    flush_socket(self._sock, 3)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 52, in flush_socket
    i_socks = select.select(input_socks, input_socks, input_socks, 0.0)[0]
ValueError: file descriptor cannot be a negative integer (-1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "..\remoteio\remoteioMgr.py", line 262, in readDOList
    return self._read(M30, IO_LENTH)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\lock.py", line 122, in _call
    return func(*p,**pp)
  File "..\remoteio\remoteioMgr.py", line 314, in _read
    s = self.master.read(mdef.READ_COILS,addr, length)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 45, in read
    return self.__execute(fcode, start, num)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\modbusapi.py", line 35, in __execute
    data = self.master.execute(self.__salveId, fcode, start, quantity_of_x=num, output_value=value)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 39, in new
    raise excpt
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\utils.py", line 37, in new
    ret = fcn(*args, **kwargs)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus.py", line 292, in execute
    self._send(request)
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 204, in _send
    self._do_open()
  File "C:\Users\comba\AppData\Local\Programs\Python\Python37\lib\site-packages\modbus_tk\modbus_tcp.py", line 173, in _do_open
    self._sock.connect((self._host, self._port))
TimeoutError: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\common\scadaUtility.py", line 45, in __call
    ret = func(*p,**pp)
  File "C:\Users\comba\Desktop\KLC\knowledgeCity\remoteio\main_remoteio.py", line 87, in urlReadDOList
    return ioMgr.readDOList(id)
  File "..\remoteio\remoteioMgr.py", line 158, in readDOList
    result=remoteioInfo.readDOList()
  File "..\remoteio\remoteioMgr.py", line 264, in readDOList
    self.master.close()
AttributeError: 'NoneType' object has no attribute 'close'

